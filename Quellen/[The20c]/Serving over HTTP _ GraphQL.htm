<!DOCTYPE html>
<!-- saved from url=(0044)https://graphql.org/learn/serving-over-http/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Serving over HTTP | GraphQL</title><meta name="viewport" content="width=640"><meta name="description" content="GraphQL provides a complete description of the data in your API, gives clients the power to ask for exactly what they need and nothing more, makes it easier to evolve APIs over time, and enables powerful developer tools."><meta property="og:title" content="GraphQL: A query language for APIs."><meta property="og:description" content="GraphQL provides a complete description of the data in your API, gives clients the power to ask for exactly what they need and nothing more, makes it easier to evolve APIs over time, and enables powerful developer tools."><meta property="og:type" content="website"><meta property="og:url" content="http://graphql.org/"><meta property="og:image" content="/img/og_image.png"><meta property="og:image:type" content="image/png"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@graphql"><meta name="twitter:title" content="GraphQL: A query language for APIs."><meta name="twitter:description" content="GraphQL gives clients the power to ask for exactly what they need and nothing more, making it easier to evolve APIs over time."><meta name="twitter:image" content="/img/twitter_image.png"><link rel="shortcut icon" href="https://graphql.org/img/favicon.png"><link rel="home" type="application/rss+xml" href="https://graphql.org/blog/rss.xml" title="GraphQL Team Blog"><link rel="stylesheet" href="./Serving over HTTP _ GraphQL_files/style.css"><link rel="stylesheet" href="./Serving over HTTP _ GraphQL_files/css"><link rel="stylesheet" href="./Serving over HTTP _ GraphQL_files/css(1)"><link rel="stylesheet" href="./Serving over HTTP _ GraphQL_files/docsearch.min.css"></head><body><header><section><a class="nav-home" href="https://graphql.org/"><img class="nav-logo" src="./Serving over HTTP _ GraphQL_files/logo.svg" alt="GraphQL Logo" width="30" height="30">GraphQL</a><nav><a href="https://graphql.org/learn/">Learn</a><a href="https://graphql.org/code/">Code</a><a href="https://graphql.org/community/">Community</a><a href="https://graphql.github.io/graphql-spec/" target="_blank" rel="noopener noreferrer">Spec</a><a href="https://graphql.org/codeofconduct/">Code of Conduct</a><a href="https://foundation.graphql.org/" target="_blank" rel="noopener noreferrer">Foundation</a><a href="https://l.graphql.org/" target="_blank" rel="noopener noreferrer">Landscape</a></nav><div class="algolia-search-wrapper"><span class="algolia-autocomplete" style="position: relative; display: inline-block; direction: ltr;"><input type="text" id="algolia-search-input" placeholder="Search docs..." aria-label="Search docs" class="aa-input" autocomplete="off" spellcheck="false" role="combobox" aria-autocomplete="list" aria-expanded="false" aria-labelledby="algolia-search-input" aria-owns="algolia-autocomplete-listbox-0" dir="auto" style="position: relative; vertical-align: top;"><pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: Rubik, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 15px; font-style: normal; font-variant: normal; font-weight: 300; word-spacing: 0px; letter-spacing: normal; text-indent: 0px; text-rendering: auto; text-transform: none;"></pre><span class="aa-dropdown-menu" role="listbox" id="algolia-autocomplete-listbox-0" style="position: absolute; top: 100%; z-index: 100; display: none; left: 0px; right: auto;"><div class="aa-dataset-1"></div></span></span></div></section></header><section><div class="documentationContent"><div class="inner-content"><h1>Serving over HTTP</h1><div><p>HTTP is the most common choice for client-server protocol when using GraphQL because of its ubiquity. Here are some guidelines for setting up a GraphQL server to operate over HTTP.</p><h2><a class="anchor" name="web-request-pipeline"></a>Web Request Pipeline <a class="hash-link" href="https://graphql.org/learn/serving-over-http/#web-request-pipeline">#</a></h2><p>Most modern web frameworks use a pipeline model where requests are passed through a stack of middleware (AKA filters/plugins). As the request flows through the pipeline, it can be inspected, transformed, modified, or terminated with a response. GraphQL should be placed after all authentication middleware, so that you have access to the same session and user information you would in your HTTP endpoint handlers.</p><h2><a class="anchor" name="uris-routes"></a>URIs, Routes <a class="hash-link" href="https://graphql.org/learn/serving-over-http/#uris-routes">#</a></h2><p>HTTP is commonly associated with REST, which uses "resources" as its core concept. In contrast, GraphQL's conceptual model is an entity graph. As a result, entities in GraphQL are not identified by URLs. Instead, a GraphQL server operates on a single URL/endpoint, usually <code>/graphql</code>, and all GraphQL requests for a given service should be directed at this endpoint.</p><h2><a class="anchor" name="http-methods-headers-and-body"></a>HTTP Methods, Headers, and Body <a class="hash-link" href="https://graphql.org/learn/serving-over-http/#http-methods-headers-and-body">#</a></h2><p>Your GraphQL HTTP server should handle the HTTP GET and POST methods.</p><h3><a class="anchor" name="get-request"></a>GET request <a class="hash-link" href="https://graphql.org/learn/serving-over-http/#get-request">#</a></h3><p>When receiving an HTTP GET request, the GraphQL query should be specified in the "query" query string. For example, if we wanted to execute the following GraphQL query:</p><pre class="prism language-graphql"><span class="punctuation">{</span>
  me <span class="punctuation">{</span>
    name
  <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p>This request could be sent via an HTTP GET like so:</p><pre class="prism language-undefined">http<span class="punctuation">:</span><span class="operator">/</span><span class="operator">/</span>myapi<span class="operator">/</span>graphql<span class="operator">?</span>query<span class="operator">=</span><span class="punctuation">{</span>me<span class="punctuation">{</span>name<span class="punctuation">}</span><span class="punctuation">}</span></pre><p>Query variables can be sent as a JSON-encoded string in an additional query parameter called <code>variables</code>.  If the query contains several named operations, an <code>operationName</code> query parameter can be used to control which one should be executed.</p><h3><a class="anchor" name="post-request"></a>POST request <a class="hash-link" href="https://graphql.org/learn/serving-over-http/#post-request">#</a></h3><p>A standard GraphQL POST request should use the <code>application/json</code> content type, and include a JSON-encoded body of the following form:</p><pre class="prism language-js"><span class="punctuation">{</span>
  <span class="string">"query"</span><span class="punctuation">:</span> <span class="string">"..."</span><span class="punctuation">,</span>
  <span class="string">"operationName"</span><span class="punctuation">:</span> <span class="string">"..."</span><span class="punctuation">,</span>
  <span class="string">"variables"</span><span class="punctuation">:</span> <span class="punctuation">{</span> <span class="string">"myVariable"</span><span class="punctuation">:</span> <span class="string">"someValue"</span><span class="punctuation">,</span> <span class="punctuation">.</span><span class="punctuation">.</span><span class="punctuation">.</span> <span class="punctuation">}</span>
<span class="punctuation">}</span></pre><p><code>operationName</code> and <code>variables</code> are optional fields. <code>operationName</code> is only required if multiple operations are present in the query.</p><p>In addition to the above, we recommend supporting two additional cases:</p><ul><li>If the "query" query string parameter is present (as in the GET example above), it should be parsed and handled in the same way as the HTTP GET case.</li><li>If the "application/graphql" Content-Type header is present, treat the HTTP POST body contents as the GraphQL query string.</li></ul><p>If you're using express-graphql, you already get these behaviors for free.</p><h2><a class="anchor" name="response"></a>Response <a class="hash-link" href="https://graphql.org/learn/serving-over-http/#response">#</a></h2><p>Regardless of the method by which the query and variables were sent, the response should be returned in the body of the request in JSON format. As mentioned in the spec, a query might result in some data and some errors, and those should be returned in a JSON object of the form:</p><pre class="prism language-js"><span class="punctuation">{</span>
  <span class="string">"data"</span><span class="punctuation">:</span> <span class="punctuation">{</span> <span class="punctuation">.</span><span class="punctuation">.</span><span class="punctuation">.</span> <span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="string">"errors"</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="punctuation">.</span><span class="punctuation">.</span><span class="punctuation">.</span> <span class="punctuation">]</span>
<span class="punctuation">}</span></pre><p>If there were no errors returned, the <code>"errors"</code> field should not be present on the response. If no data is returned, <a href="http://facebook.github.io/graphql/#sec-Data" target="_blank" rel="nofollow noopener noreferrer">according to the GraphQL spec</a>, the <code>"data"</code> field should only be included if the error occurred during execution.</p><h2><a class="anchor" name="graphiql"></a>GraphiQL <a class="hash-link" href="https://graphql.org/learn/serving-over-http/#graphiql">#</a></h2><p>GraphiQL is useful during testing and development but should be disabled in production by default. If you are using express-graphql, you can toggle it based on the NODE_ENV environment variable:</p><pre class="prism language-undefined">app<span class="punctuation">.</span><span class="function">use</span><span class="punctuation">(</span><span class="string">'/graphql'</span><span class="punctuation">,</span> <span class="function">graphqlHTTP</span><span class="punctuation">(</span><span class="punctuation">{</span>
  schema<span class="punctuation">:</span> MySessionAwareGraphQLSchema<span class="punctuation">,</span>
  graphiql<span class="punctuation">:</span> process<span class="punctuation">.</span>env<span class="punctuation">.</span>NODE_ENV <span class="operator">===</span> <span class="string">'development'</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span></pre><h2><a class="anchor" name="node"></a>Node <a class="hash-link" href="https://graphql.org/learn/serving-over-http/#node">#</a></h2><p>If you are using NodeJS, we recommend using either <a href="https://github.com/graphql/express-graphql" target="_blank" rel="nofollow noopener noreferrer">express-graphql</a> or <a href="https://github.com/apollographql/apollo-server" target="_blank" rel="nofollow noopener noreferrer">apollo-server</a>.</p></div><a class="read-next" href="https://graphql.org/learn/authorization"><span class="read-next-continue">Continue Reading →</span><span class="read-next-title">Authorization</span></a></div><div class="nav-docs"><div><h3>Learn</h3><ul><li><a style="margin-left:0;" class="active" href="https://graphql.org/learn/">Introduction</a></li><li><a style="margin-left:0;" class="active" href="https://graphql.org/learn/queries/">Queries and Mutations</a><ul><li><a href="https://graphql.org/learn/queries/#fields">Fields</a></li><li><a href="https://graphql.org/learn/queries/#arguments">Arguments</a></li><li><a href="https://graphql.org/learn/queries/#aliases">Aliases</a></li><li><a href="https://graphql.org/learn/queries/#fragments">Fragments</a></li><li><a href="https://graphql.org/learn/queries/#operation-name">Operation Name</a></li><li><a href="https://graphql.org/learn/queries/#variables">Variables</a></li><li><a href="https://graphql.org/learn/queries/#directives">Directives</a></li><li><a href="https://graphql.org/learn/queries/#mutations">Mutations</a></li><li><a href="https://graphql.org/learn/queries/#inline-fragments">Inline Fragments</a></li></ul></li><li><a style="margin-left:0;" class="active" href="https://graphql.org/learn/schema/">Schemas and Types</a><ul><li><a href="https://graphql.org/learn/schema/#type-system">Type System</a></li><li><a href="https://graphql.org/learn/schema/#type-language">Type Language</a></li><li><a href="https://graphql.org/learn/schema/#object-types-and-fields">Object Types and Fields</a></li><li><a href="https://graphql.org/learn/schema/#arguments">Arguments</a></li><li><a href="https://graphql.org/learn/schema/#the-query-and-mutation-types">The Query and Mutation Types</a></li><li><a href="https://graphql.org/learn/schema/#scalar-types">Scalar Types</a></li><li><a href="https://graphql.org/learn/schema/#enumeration-types">Enumeration Types</a></li><li><a href="https://graphql.org/learn/schema/#lists-and-non-null">Lists and Non-Null</a></li><li><a href="https://graphql.org/learn/schema/#interfaces">Interfaces</a></li><li><a href="https://graphql.org/learn/schema/#union-types">Union Types</a></li><li><a href="https://graphql.org/learn/schema/#input-types">Input Types</a></li></ul></li><li><a style="margin-left:0;" class="active" href="https://graphql.org/learn/validation/">Validation</a></li><li><a style="margin-left:0;" class="active" href="https://graphql.org/learn/execution/">Execution</a></li><li><a style="margin-left:0;" class="active" href="https://graphql.org/learn/introspection/">Introspection</a></li></ul></div><div><h3>Best Practices</h3><ul><li><a style="margin-left:0;" class="active" href="https://graphql.org/learn/best-practices/">Introduction</a></li><li><a style="margin-left:0;" class="active" href="https://graphql.org/learn/thinking-in-graphs/">Thinking in Graphs</a></li><li><a style="margin-left:0;" class="active" href="https://graphql.org/learn/serving-over-http/">Serving over HTTP</a></li><li><a style="margin-left:0;" class="active" href="https://graphql.org/learn/authorization/">Authorization</a></li><li><a style="margin-left:0;" class="active" href="https://graphql.org/learn/pagination/">Pagination</a></li><li><a style="margin-left:0;" class="active" href="https://graphql.org/learn/global-object-identification/">Global Object Identification</a></li><li><a style="margin-left:0;" class="active" href="https://graphql.org/learn/caching/">Caching</a></li></ul></div></div></div></section><footer><section class="sitemap"><a href="https://graphql.org/" class="nav-home" aria-label="Homepage"></a><div><h5><a href="https://graphql.org/learn/">Learn</a></h5><a href="https://graphql.org/learn/">Introduction</a><a href="https://graphql.org/learn/queries/">Query Language</a><a href="https://graphql.org/learn/schema/">Type System</a><a href="https://graphql.org/learn/execution/">Execution</a><a href="https://graphql.org/learn/best-practices/">Best Practices</a></div><div><h5><a href="https://graphql.org/code">Code</a></h5><a href="https://graphql.org/code/#server-libraries">Servers</a><a href="https://graphql.org/code/#graphql-clients">Clients</a><a href="https://graphql.org/code/#tools">Tools</a></div><div><h5><a href="https://graphql.org/community">Community</a></h5><a href="https://graphql.org/community/upcoming-events/">Upcoming Events</a><a href="http://stackoverflow.com/questions/tagged/graphql" target="_blank" rel="noopener noreferrer">Stack Overflow</a><a href="https://www.facebook.com/groups/graphql.community/" target="_blank" rel="noopener noreferrer">Facebook Group</a><a href="https://twitter.com/GraphQL" target="_blank" rel="noopener noreferrer">Twitter</a></div><div><h5>More</h5><a href="https://graphql.github.io/graphql-spec/" target="_blank" rel="noopener noreferrer">GraphQL Specification</a><a href="https://foundation.graphql.org/" target="_blank" rel="noopener noreferrer">GraphQL Foundation</a><a href="https://github.com/graphql" target="_blank" rel="noopener noreferrer">GraphQL GitHub</a><a href="https://github.com/graphql/graphql.github.io/edit/source/site/learn/BestPractice-ServingOverHTTP.md" target="_blank" rel="noopener noreferrer">Edit this page ✎</a></div></section><section class="copyright">Copyright © 2020 The GraphQL Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage">Trademark Usage</a> page. Linux is a registered trademark of Linus Torvalds. <a href="http://www.linuxfoundation.org/privacy">Privacy Policy</a> and <a href="http://www.linuxfoundation.org/terms">Terms of Use</a>.</section></footer><script async="" src="./Serving over HTTP _ GraphQL_files/analytics.js"></script><script type="text/javascript" src="./Serving over HTTP _ GraphQL_files/docsearch.min.js"></script><script>
        docsearch({
          apiKey: 'd103541f3e6041148aade2e746ed4d61',
          indexName: 'graphql',
          inputSelector: '#algolia-search-input'
        });
      </script><script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-44373548-16', 'auto');
ga('send', 'pageview');
      </script></body></html>