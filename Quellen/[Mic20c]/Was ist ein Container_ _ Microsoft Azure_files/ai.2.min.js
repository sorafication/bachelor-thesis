/*!
 * Application Insights JavaScript SDK - Web, 2.5.8
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
var e=this,t=function(e){"use strict";var i="function",a="object",t="undefined",o="prototype",s="hasOwnProperty";function n(){return typeof globalThis!==t&&globalThis?globalThis:typeof self!==t&&self?self:typeof window!==t&&window?window:typeof global!==t&&global?global:null}function r(e){var t=Object.create;if(t)return t(e);if(null==e)return{};var n=typeof e;if(n!=a&&n!=i)throw new TypeError("Object prototype may only be an Object:"+e);function r(){}return r[o]=e,new r}var c,u,v,l,U,d,p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[s](n)&&(e[n]=t[n])})(e,t)},f=n()||{};__assign=f.__assign=f.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object[o][s].call(t,i)&&(e[i]=t[i]);return e},__extends=f.__extends=f.__extends||function(e,t){function n(){this.constructor=e}p(e,t),e[o]=null===t?r(t):(n[o]=t[o],new n)},(u=c={})[u.LocalStorage=0]="LocalStorage",u[u.SessionStorage=1]="SessionStorage",(l=v=v||{})[l.Default=0]="Default",l[l.Required=1]="Required",l[l.Array=2]="Array",l[l.Hidden=4]="Hidden",(d=U=U||{})[d.AI=0]="AI",d[d.AI_AND_W3C=1]="AI_AND_W3C",d[d.W3C=2]="W3C";var g={Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5},F=t,x=a,O=o,h=i,m="window",y="document",I="navigator",S="location",T="performance",C="JSON",q=n;function w(e){var t=q();return t&&t[e]?t[e]:e===m&&E()?window:null}function E(){return typeof window===x&&window}function _(){return E()?window:w(m)}function b(){return typeof document===x&&document}function N(){return b()?document:w(y)}function D(){return typeof navigator===x&&navigator?navigator:w(I)}function V(){return typeof location===x&&location?location:w(S)}function z(){return w(T)}function A(){return typeof JSON===x&&JSON||null!==w(C)}function k(){return A()?JSON||w(C):null}var R="attachEvent",P="addEventListener",L="detachEvent",M="removeEventListener";function B(e,t){return typeof e===t}function H(e){return B(e,t)||e===undefined}function j(e){return H(e)||null===e}function G(e,t){return e&&Object[o].hasOwnProperty.call(e,t)}function K(e){return B(e,a)}function W(e){return B(e,i)}function X(e,t,n,r){void 0===r&&(r=!1);var i=!1;if(!j(e))try{j(e[P])?j(e[R])||(e[R]("on"+t,n),i=!0):(e[P](t,n,r),i=!0)}catch(a){}return i}function Y(e,t,n,r){if(void 0===r&&(r=!1),!j(e))try{j(e[M])?j(e[L])||e[L]("on"+t,n):e[M](t,n,r)}catch(i){}}var J=(Z.isDate=function(e){return"[object Date]"===Object[o].toString.call(e)},Z.isArray=function(e){return"[object Array]"===Object[o].toString.call(e)},Z.isError=function(e){return"[object Error]"===Object[o].toString.call(e)},Z.isString=function(e){return B(e,"string")},Z.isNumber=function(e){return B(e,"number")},Z.isBoolean=function(e){return B(e,"boolean")},Z.disableCookies=function(){Z._canUseCookies=!1},Z.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(ee,function(e){var t,n=0|((t=w("crypto"))?t.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random());return("x"===e?n:3&n|8).toString(16)})},Z.toISOString=function(e){if(Z.isDate(e)){var t=function(e){var t=e+"";return 1===t.length&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}},Z.arrForEach=function(e,t,n){for(var r=e.length,i=0;i<r;i++)i in e&&t.call(n||e,e[i],i,e)},Z.arrIndexOf=function(e,t,n){for(var r=e.length,i=n||0,a=Math.max(0<=i?i:r-Math.abs(i),0);a<r;a++)if(a in e&&e[a]===t)return a;return-1},Z.arrMap=function(e,t,n){for(var r=e.length,i=n||e,a=Array(r),o=0;o<r;o++)o in e&&(a[o]=t.call(i,e[o],e));return a},Z.arrReduce=function(e,t,n){var r,i=e.length,a=0;if(3<=arguments.length)r=n;else{for(;a<i&&!(a in e);)a++;r=e[a++]}for(;a<i;)a in e&&(r=t(r,e[a],a,e)),a++;return r},Z.strTrim=function(e){return Z.isString(e)?e.replace(/^\s+|\s+$/g,""):e},Z.objKeys=function(e){var t=!{toString:null}.propertyIsEnumerable("toString");if(!(W(e)||K(e)&&null!==e))throw new TypeError("objKeys called on non-object");var n=[];for(var r in e)G(e,r)&&n.push(r);if(t)for(var i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=i.length,o=0;o<a;o++)G(e,i[o])&&n.push(i[o]);return n},Z.objDefineAccessors=function(e,t,n,r){var i=Object.defineProperty;if(i)try{var a={enumerable:!0,configurable:!0};return n&&(a.get=n),r&&(a.set=r),i(e,t,a),!0}catch(o){}return!1},Z.addEventHandler=function(e,t){var n=!1,r=_();r&&(n=X(r,e,t),n=X(r.body,e,t)||n);var i=N();return i&&(n=te.Attach(i,e,t)||n),n},Z.dateNow=function(){var e=Date;return e.now?e.now():(new e).getTime()},Z.perfNow=function(){var e=z();return e&&e.now?e.now():Z.dateNow()},Z.isTypeof=B,Z.isUndefined=H,Z.isNullOrUndefined=j,Z.hasOwnProperty=G,Z.isFunction=W,Z.isObject=K,Z.objCreate=r,Z);function Z(){}var Q,$,ee=/[xy]/g,te=(ne.Attach=X,ne.AttachEvent=X,ne.Detach=Y,ne.DetachEvent=Y,ne);function ne(){}($=Q=Q||{})[$.CRITICAL=1]="CRITICAL",$[$.WARNING=2]="WARNING";var re={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100},ie="constructor",ae="prototype",oe="function",se="_dynInstFuncs",ce="_isDynProxy",ue="_dynClass",le="_dynCls$",de="_unknown_",pe="__proto__",fe=Object.getPrototypeOf,ge=0;function he(e,t){return e&&Object[ae].hasOwnProperty.call(e,t)}function me(e){return typeof e===oe}function ve(e){return e&&(e===Object[ae]||e===Array[ae])}function ye(e){return ve(e)||e===Function[ae]}function xe(e){if(e){if(fe)return fe(e);var t=e[pe]||e[ae]||e[ie];if(t)return t}return null}function Ie(e,t,n){return t!==ie&&me(e[t])&&(n||he(e,t))}function Se(e){throw new TypeError("DynamicProto: "+e)}function Te(e,t){return he(e,ae)?e.name||t||de:((e||{})[ie]||{}).name||t||de}function Ce(e,n,t){he(e,ae)||Se("theClass is an invalid class definition.");var r=e[ae];!function(e){for(var t=xe(n);t&&!ye(t);){if(t===e)return 1;t=xe(t)}}(r)&&Se("["+Te(e)+"] is not in class heirarchy of ["+Te(n)+"]");var i=null;he(r,ue)?i=r[ue]:(i=le+Te(e,"_")+"$"+ge,ge++,r[ue]=i);var a=function(e){var t={};for(var n in e)!t[n]&&Ie(e,n,!1)&&(t[n]=e[n]);return t}(n);t(n,function(e,t,n){function r(e,t){return function(){return t.apply(e,arguments)}}var i={};for(var a in n)i[a]=r(t,n[a]);for(var o=xe(e),s=[];o&&!ye(o)&&!function(e,t){for(var n=e.length-1;0<=n;n--)if(e[n]===t)return 1}(s,o);){for(var a in o)!i[a]&&Ie(o,a,!fe)&&(i[a]=r(t,o[a]));s.push(o),o=xe(o)}return i}(r,n,a)),function(e,t,n,r){if(!ve(e)){var i=n[se]=n[se]||{},a=i[t]=i[t]||{};for(var o in n)Ie(n,o,!1)&&n[o]!==r[o]&&(a[o]=n[o],delete n[o],he(e,o)&&(!e[o]||e[o][ce])||(e[o]=function(n,r){var i=function(){if(this&&he(n,ue)){var e=((this[se]||{})[n[ue]]||{})[r];if(e)return e.apply(this,arguments);Se("Missing ["+r+"] "+oe)}var t=n[r];return t===i&&(t=xe(n)[r]),me(t)||Se("["+r+"] is not a "+oe),t.apply(this,arguments)};return i[ce]=1,i}(e,o)))}}(r,i,n,a)}function we(e){return e?'"'+e.replace(/\"/g,"")+'"':""}var Ee=(_e.dataType="MessageData",_e);function _e(e,t,n,r){void 0===n&&(n=!1),this.messageId=e,this.message=(n?"AI: ":"AI (Internal): ")+e;var i="";A()&&(i=k().stringify(r));var a=(t?" message:"+we(t):"")+(r?" props:"+we(i):"");this.message+=a}var be=function xa(a){this.identifier="DiagnosticLogger",this.queue=[];var o=0,u={};Ce(xa,this,function(s){var r=J.isNullOrUndefined,c=J.isUndefined,i=J.isFunction;function e(e,t){var n=a[e];return r(n)?t:n}r(a)&&(a={}),s.consoleLoggingLevel=function(){return e("loggingLevelConsole",0)},s.telemetryLoggingLevel=function(){return e("loggingLevelTelemetry",1)},s.maxInternalMessageLimit=function(){return e("maxMessageLimit",25)},s.enableDebugExceptions=function(){return e("enableDebugExceptions",!1)},s.throwInternal=function(e,t,n,r,i){void 0===i&&(i=!1);var a,o=new Ee(t,n,i,r);if(s.enableDebugExceptions())throw o;!c(o)&&o&&(c(o.message)||(i?(a=+o.messageId,!u[a]&&s.consoleLoggingLevel()>=Q.WARNING&&(s.warnToConsole(o.message),u[a]=!0)):s.consoleLoggingLevel()>=Q.WARNING&&s.warnToConsole(o.message),s.logInternalMessage(e,o)))},s.warnToConsole=function(e){var t,n=typeof console!==F?console:w("console");n&&(t="log",n.warn&&(t="warn"),i(n[t])&&n[t](e))},s.resetInternalMessageCount=function(){o=0,u={}},s.logInternalMessage=function(e,t){var n,r,i,a;o>=s.maxInternalMessageLimit()||(n=!0,r="AITR_"+t.messageId,u[r]?n=!1:u[r]=!0,n&&(e<=s.telemetryLoggingLevel()&&(s.queue.push(t),o++),o===s.maxInternalMessageLimit()&&(i="Internal events throttle limit per PageView reached for this app.",a=new Ee(re.MessageLimitPerPVExceeded,i,!1),s.queue.push(a),s.warnToConsole(i))))}})},Ne="ctx",De=(Ae.ParentContextKey="parent",Ae.ChildrenContextKey="childEvts",Ae);function Ae(e,i,t){var n,a=this,o=!1;a.start=J.dateNow(),a.name=e,a.isAsync=t,a.isChildEvt=function(){return!1},J.isFunction(i)&&(o=J.objDefineAccessors(a,"payload",function(){return!n&&J.isFunction(i)&&(n=i(),i=null),n})),a.getCtx=function(e){return e?e===Ae.ParentContextKey||e===Ae.ChildrenContextKey?a[e]:(a[Ne]||{})[e]:null},a.setCtx=function(e,t){e&&(e===Ae.ParentContextKey?(a[e]||(a.isChildEvt=function(){return!0}),a[e]=t):e===Ae.ChildrenContextKey?a[e]=t:(a[Ne]=a[Ne]||{})[e]=t)},a.complete=function(){var e=0,t=a.getCtx(Ae.ChildrenContextKey);if(J.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];r&&(e+=r.time)}a.time=J.dateNow()-a.start,a.exTime=a.time-e,a.complete=function(){},!o&&J.isFunction(i)&&(a.payload=i())}}var ke=function Ia(t){this.ctx={},Ce(Ia,this,function(n){n.create=function(e,t,n){return new De(e,t,n)},n.fire=function(e){e&&(e.complete(),t&&t.perfEvent(e))},n.setCtx=function(e,t){e&&((n[Ne]=n[Ne]||{})[e]=t)},n.getCtx=function(e){return(n[Ne]||{})[e]}})},Re="CoreUtils.doPerf";function Pe(e,t,n,r,i){if(e){var a=e;if(a&&J.isFunction(a.getPerfMgr)&&(a=a.getPerfMgr()),a){var o,s=void 0,c=a.getCtx(Re);try{if(s=a.create(t(),r,i))return c&&s.setCtx&&(s.setCtx(De.ParentContextKey,c),c.getCtx&&c.setCtx&&((o=c.getCtx(De.ChildrenContextKey))||(o=[],c.setCtx(De.ChildrenContextKey,o)),o.push(s))),a.setCtx(Re,s),n(s)}catch(u){s&&s.setCtx&&s.setCtx("exception",u)}finally{s&&a.fire(s),a.setCtx(Re,c)}}}return n()}var Le=J.isFunction,Me=function(i,t){var a=this,o=null,s=Le(i.processTelemetry),c=Le(i.setNextPlugin);a._hasRun=!1,a.getPlugin=function(){return i},a.getNext=function(){return o},a.setNext=function(e){o=e},a.processTelemetry=function(n,r){r=r||t;var e=i?i.identifier:"TelemetryPluginChain";Pe(r?r.core():null,function(){return e+":processTelemetry"},function(){if(i&&s){a._hasRun=!0;try{r.setNext(o),c&&i.setNextPlugin(o),o&&(o._hasRun=!1),i.processTelemetry(n,r)}catch(t){var e=o&&o._hasRun;o&&e||r.diagLog().throwInternal(Q.CRITICAL,re.PluginException,"Plugin ["+i.identifier+"] failed during processTelemetry - "+t),o&&!e&&o.processTelemetry(n,r)}}else o&&(a._hasRun=!0,o.processTelemetry(n,r))},function(){return{item:n}},!n.sync)}},Ue=J.isNullOrUndefined;function Fe(e,t){var n=[];if(e&&0<e.length)for(var r=null,i=0;i<e.length;i++){var a,o=e[i];o&&J.isFunction(o.processTelemetry)&&(a=new Me(o,t),n.push(a),r&&r.setNext(a),r=a)}return 0<n.length?n[0]:null}var Oe=function Sa(e,a,n,t){var r,i,o,s,c=this,u=null;null!==t&&(e&&J.isFunction(e.getPlugin)?u=function(e,t,n){var r=[],i=!n;if(e)for(;e;){var a=e.getPlugin();!i&&a!==n||(i=!0,r.push(a)),e=e.getNext()}return i||r.push(n),Fe(r,t)}(e,c,t||e.getPlugin()):t?(r=c,o=e,s=!1,(i=t)&&e&&(o=[],J.arrForEach(e,function(e){!s&&e!==i||(s=!0,o.push(e))})),i&&!s&&(o=o||[]).push(i),u=Fe(o,r)):J.isUndefined(t)&&(u=Fe(e,c))),c.core=function(){return n},c.diagLog=function(){return(n||{}).logger||new be(a||{})},c.getCfg=function(){return a},c.getExtCfg=function(e,t){var n,r;return void 0===t&&(t={}),!a||(r=a.extensionConfig)&&e&&(n=r[e]),n||t},c.getConfig=function(e,t,n){var r;void 0===n&&(n=!1);var i=c.getExtCfg(e,null);return i&&!Ue(i[t])?r=i[t]:a&&!Ue(a[t])&&(r=a[t]),Ue(r)?n:r},c.hasNext=function(){return null!=u},c.getNext=function(){return u},c.setNext=function(e){u=e},c.processNext=function(e){var t=u;t&&(u=t.getNext(),t.processTelemetry(e,c))},c.createNew=function(e,t){return void 0===e&&(e=null),new Sa(e||u,a,n,t)}},qe=J.isFunction,Ve="getPlugin",ze=(Be.prototype.initialize=function(e,t,n,r){this._baseTelInit(e,t,n,r)},Be);function Be(){var a=this,o=!1,s=null,c=null;a.core=null,a.diagLog=function(e){return a._getTelCtx(e).diagLog()},a.isInitialized=function(){return o},a.setInitialized=function(e){o=e},a.setNextPlugin=function(e){c=e},a.processNext=function(e,t){t?t.processNext(e):c&&qe(c.processTelemetry)&&c.processTelemetry(e,null)},a._getTelCtx=function(e){void 0===e&&(e=null);var t,n=e;return n||(t=s||new Oe(null,{},a.core),n=c&&c[Ve]?t.createNew(null,c[Ve]):t.createNew(null,c)),n},a._baseTelInit=function(e,t,n,r){e&&(e.extensionConfig=e.extensionConfig||[]),!r&&t&&(r=t.getProcessTelContext().getNext());var i=c;c&&c[Ve]&&(i=c[Ve]()),a.core=t,s=new Oe(r,e,t,i),o=!0}}var He=J.isFunction,je="processTelemetry",Ge="priority",Ke="setNextPlugin",We="isInitialized";function Xe(t,n){for(var e=[],r=null,i=t.getNext();i;){var a=i.getPlugin();a&&(r&&He(r[Ke])&&He(a[je])&&r[Ke](a),He(a[We])&&a[We]()||e.push(a),r=a,i=i.getNext())}J.arrForEach(e,function(e){e.initialize(t.getCfg(),t.core(),n,t.getNext())})}function Ye(e){return e.sort(function(e,t){var n=0,r=He(t[je]);return He(e[je])?n=r?e[Ge]-t[Ge]:1:r&&(n=-1),n})}var Je,Ze=500,Qe="Channel has invalid priority",$e=J.objDefineAccessors,et=(Je=ze,__extends(tt,Je),tt._staticInit=($e(tt.prototype,"ChannelControls",tt.prototype.getChannelControls),void $e(tt.prototype,"channelQueue",tt.prototype.getChannelControls)),tt);function tt(){var r=Je.call(this)||this;r.identifier="ChannelControllerPlugin",r.priority=Ze;var c,u=J.arrForEach;function l(e){e&&0<e.length&&(e=e.sort(function(e,t){return e.priority-t.priority}),u(e,function(e){if(e.priority<Ze)throw Error(Qe+e.identifier)}),c.push(e))}return Ce(tt,r,function(o,s){o.setNextPlugin=function(e){},o.processTelemetry=function(t,n){c&&u(c,function(e){0<e.length&&r._getTelCtx(n).createNew(e).processNext(t)})},o.getChannelControls=function(){return c},o.initialize=function(t,n,r){var e,i,a;o.isInitialized()||(s.initialize(t,n,r),t.isCookieUseDisabled&&J.disableCookies(),i=r,c=[],(e=(t||{}).channels)&&u(e,l),i&&(a=[],u(i,function(e){e.priority>Ze&&a.push(e)}),l(a)),u(c,function(e){return Xe(new Oe(e,t,n),r)}))}}),r}var nt,rt=J.arrForEach,it=J.isNullOrUndefined,at="_notificationManager",ot=function Ta(e){this.listeners=[];var a=J.arrForEach,t=!!(e||{}).perfEvtsSendAll;Ce(Ta,this,function(i){i.addNotificationListener=function(e){i.listeners.push(e)},i.removeNotificationListener=function(e){for(var t=J.arrIndexOf(i.listeners,e);-1<t;)i.listeners.splice(t,1),t=J.arrIndexOf(i.listeners,e)},i.eventsSent=function(t){a(i.listeners,function(e){e&&e.eventsSent&&setTimeout(function(){return e.eventsSent(t)},0)})},i.eventsDiscarded=function(t,n){a(i.listeners,function(e){e&&e.eventsDiscarded&&setTimeout(function(){return e.eventsDiscarded(t,n)},0)})},i.eventsSendRequest=function(n,r){a(i.listeners,function(e){if(e&&e.eventsSendRequest)if(r)setTimeout(function(){return e.eventsSendRequest(n,r)},0);else try{e.eventsSendRequest(n,r)}catch(t){}})},i.perfEvent=function(n){n&&(!t&&n.isChildEvt()||a(i.listeners,function(e){if(e&&e.perfEvent)if(n.isAsync)setTimeout(function(){return e.perfEvent(n)},0);else try{e.perfEvent(n)}catch(t){}}))}})},st=(nt=function Ca(){var t,c,u,n,l=!1;Ce(Ca,this,function(s){s._extensions=[],c=new et,t=[],s.isInitialized=function(){return l},s.initialize=function(e,t,r,n){if(s.isInitialized())throw Error("Core should not be initialized more than once");if(!e||it(e.instrumentationKey))throw Error("Please provide instrumentation key");u=n,s[at]=n,s.config=e||{},e.extensions=it(e.extensions)?[]:e.extensions,(e.extensionConfig=it(e.extensionConfig)?{}:e.extensionConfig).NotificationManager=n,r=r||J.objCreate({throwInternal:function(e,t,n,r,i){void 0===i&&(i=!1)},warnToConsole:function(e){},resetInternalMessageCount:function(){}}),s.logger=r;var i=[];i.push.apply(i,t.concat(e.extensions)),i=Ye(i);var a=[],o={};if(rt(i,function(e){if(it(e)||it(e.initialize))throw Error("Extensions must provide callback to initialize");var t=e.priority,n=e.identifier;e&&t&&(it(o[t])?o[t]=n:r.warnToConsole("Two extensions have same priority #"+t+" - "+o[t]+", "+n)),(!t||t<c.priority)&&a.push(e)}),i.push(c),a.push(c),i=Ye(i),s._extensions=i,Xe(new Oe([c],e,s),i),Xe(new Oe(a,e,s),i),s._extensions=a,0===s.getTransmissionControls().length)throw Error("No channels available");l=!0,s.releaseQueue()},s.getTransmissionControls=function(){return c.getChannelControls()},s.track=function(e){e.iKey||(e.iKey=s.config.instrumentationKey),e.time||(e.time=J.toISOString(new Date)),it(e.ver)&&(e.ver="4.0"),s.isInitialized()?s.getProcessTelContext().processNext(e):t.push(e)},s.getProcessTelContext=function(){var e=s._extensions,t=e;return e&&0!==e.length||(t=[c]),new Oe(t,s.config,s)},s.getNotifyMgr=function(){return u||(u=J.objCreate({addNotificationListener:function(e){},removeNotificationListener:function(e){},eventsSent:function(e){},eventsDiscarded:function(e,t){},eventsSendRequest:function(e,t){}}),s[at]=u),u},s.getPerfMgr=function(){return n||s.config&&s.config.enablePerfMgr&&(n=new ke(s.getNotifyMgr())),n},s.setPerfMgr=function(e){n=e},s.eventCnt=function(){return t.length},s.releaseQueue=function(){0<t.length&&(rt(t,function(e){s.getProcessTelContext().processNext(e)}),t=[])}})},__extends(ct,nt),ct);function ct(){var e=nt.call(this)||this;return Ce(ct,e,function(r,i){function t(e){var t=r.getNotifyMgr();t&&t.eventsDiscarded([e],g.InvalidEvent)}r.initialize=function(e,t,n,r){i.initialize(e,t,n||new be(e),r||new ot(e))},r.track=function(e){Pe(r.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){if(null===e)throw t(e),Error("Invalid telemetry item");!function(e){if(J.isNullOrUndefined(e.name))throw t(e),Error("telemetry name required")}(e),i.track(e)},function(){return{item:e}},!e.sync)},r.addNotificationListener=function(e){var t=r.getNotifyMgr();t&&t.addNotificationListener(e)},r.removeNotificationListener=function(e){var t=r.getNotifyMgr();t&&t.removeNotificationListener(e)},r.pollInternalLogs=function(n){var e=r.config.diagnosticLogInterval;return e&&0<e||(e=1e4),setInterval(function(){var e=r.logger?r.logger.queue:[];J.arrForEach(e,function(e){var t={name:n||"InternalMessageId: "+e.messageId,iKey:r.config.instrumentationKey,time:J.toISOString(new Date),baseType:Ee.dataType,baseData:{message:e.message}};r.track(t)}),e.length=0},e)}}),e}var ut="_aiHooks",lt=["req","rsp","hkErr","fnErr"],dt="__proto__",pt="constructor";function ft(e,t){if(e)for(var n=0;n<e.length&&!t(e[n],n);n++);}function gt(e,c,u,l,d){0<=d&&d<=2&&ft(e,function(e,t){var n=e.cbks,r=n[lt[d]];if(r){c.ctx=function(){return l[t]=l[t]||{}};try{r.apply(c.inst,u)}catch(o){var i=c.err;try{var a=n[lt[2]];a&&(c.err=o,a.apply(c.inst,u))}catch(s){}finally{c.err=i}}}})}var ht=Object.getPrototypeOf;function mt(e,t,n,r){if(void 0===r&&(r=!0),e&&t&&n){var i=function l(e,t,n){var r=null;return e&&(J.hasOwnProperty(e,t)?r=e:n&&(r=l(function(e){if(e){if(ht)return ht(e);var t=e[dt]||e[O]||e[pt];if(t)return t}return null}(e),t,!1))),r}(e,t,r);if(i){var a=i[t];if(typeof a===h){var o,s=a[ut];s||(u=s={i:0,n:t,f:a,h:[]},(o=function(){var n=arguments,e=u.h,r={name:u.n,inst:this,ctx:null,set:function(e,t){(n=a([],n))[e]=t,i=a([r],n)}},t=[],i=a([r],n);function a(t,e){return ft(e,function(e){t.push(e)}),t}gt(e,r,i,t,0);var o=u.f;try{r.rslt=o.apply(this,n)}catch(s){throw r.err=s,gt(e,r,i,t,3),s}return gt(e,r,i,t,1),r.rslt})[ut]=s,i[t]=o);var c={id:s.i,cbks:n,rm:function(){var n=this.id;ft(s.h,function(e,t){return e.id===n&&(s.h.splice(t,1),1)})}};return s.i++,s.h.push(c),c}}}var u;return null}var vt=(yt.requestContextHeader="Request-Context",yt.requestContextTargetKey="appId",yt.requestContextAppIdFormat="appId=cid-v1:",yt.requestIdHeader="Request-Id",yt.traceParentHeader="traceparent",yt.sdkContextHeader="Sdk-Context",yt.sdkContextHeaderAppIdRequest="appId",yt.requestContextHeaderLowerCase="request-context",yt);function yt(){}var xt=(It.sanitizeKeyAndAddUniqueness=function(e,t,n){var r=t.length,i=It.sanitizeKey(e,t);if(i.length!==r){for(var a=0,o=i;n[o]!==undefined;)a++,o=i.substring(0,It.MAX_NAME_LENGTH-3)+It.padNumber(a);i=o}return i},It.sanitizeKey=function(e,t){var n;return t&&(t=It.trim(t.toString())).length>It.MAX_NAME_LENGTH&&(n=t.substring(0,It.MAX_NAME_LENGTH),e.throwInternal(Q.WARNING,re.NameTooLong,"name is too long.  It has been truncated to "+It.MAX_NAME_LENGTH+" characters.",{name:t},!0)),n||t},It.sanitizeString=function(e,t,n){var r;return void 0===n&&(n=It.MAX_STRING_LENGTH),t&&(n=n||It.MAX_STRING_LENGTH,(t=It.trim(t)).toString().length>n&&(r=t.toString().substring(0,n),e.throwInternal(Q.WARNING,re.StringValueTooLong,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t},It.sanitizeUrl=function(e,t){return It.sanitizeInput(e,t,It.MAX_URL_LENGTH,re.UrlTooLong)},It.sanitizeMessage=function(e,t){var n;return t&&t.length>It.MAX_MESSAGE_LENGTH&&(n=t.substring(0,It.MAX_MESSAGE_LENGTH),e.throwInternal(Q.WARNING,re.MessageTruncated,"message is too long, it has been truncated to "+It.MAX_MESSAGE_LENGTH+" characters.",{message:t},!0)),n||t},It.sanitizeException=function(e,t){var n;return t&&t.length>It.MAX_EXCEPTION_LENGTH&&(n=t.substring(0,It.MAX_EXCEPTION_LENGTH),e.throwInternal(Q.WARNING,re.ExceptionTruncated,"exception is too long, it has been truncated to "+It.MAX_EXCEPTION_LENGTH+" characters.",{exception:t},!0)),n||t},It.sanitizeProperties=function(e,t){if(t){var n={};for(var r in t){var i=t[r];if(J.isObject(i)&&A())try{i=k().stringify(i)}catch(a){e.throwInternal(Q.WARNING,re.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:a},!0)}i=It.sanitizeString(e,i,It.MAX_PROPERTY_LENGTH),n[r=It.sanitizeKeyAndAddUniqueness(e,r,n)]=i}t=n}return t},It.sanitizeMeasurements=function(e,t){if(t){var n={};for(var r in t){var i=t[r];n[r=It.sanitizeKeyAndAddUniqueness(e,r,n)]=i}t=n}return t},It.sanitizeId=function(e,t){return t?It.sanitizeInput(e,t,It.MAX_ID_LENGTH,re.IdTooLong).toString():t},It.sanitizeInput=function(e,t,n,r){var i;return t&&(t=It.trim(t)).length>n&&(i=t.substring(0,n),e.throwInternal(Q.WARNING,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),i||t},It.padNumber=function(e){var t="00"+e;return t.substr(t.length-3)},It.trim=function(e){return J.isString(e)?e.replace(/^\s+|\s+$/g,""):e},It.MAX_NAME_LENGTH=150,It.MAX_ID_LENGTH=128,It.MAX_PROPERTY_LENGTH=8192,It.MAX_STRING_LENGTH=1024,It.MAX_URL_LENGTH=2048,It.MAX_MESSAGE_LENGTH=32768,It.MAX_EXCEPTION_LENGTH=32768,It);function It(){}var St=D(),Tt=J.isString,Ct=null,wt=(Et.createDomEvent=function(e){var t,n=null;return J.isFunction(Event)?n=new Event(e):(t=N())&&t.createEvent&&(n=t.createEvent("Event")).initEvent(e,!0,!0),n},Et.disableStorage=function(){Et._canUseLocalStorage=!1,Et._canUseSessionStorage=!1},Et._getLocalStorageObject=function(){return Et.canUseLocalStorage()?Et._getVerifiedStorageObject(c.LocalStorage):null},Et._getVerifiedStorageObject=function(e){var t,n,r=null;try{if(J.isNullOrUndefined(q()))return null;n=new Date,(r=w(e===c.LocalStorage?"localStorage":"sessionStorage")).setItem(n.toString(),n.toString()),t=r.getItem(n.toString())!==n.toString(),r.removeItem(n.toString()),t&&(r=null)}catch(i){r=null}return r},Et.isInternalApplicationInsightsEndpoint=function(e){return!!~Et._internalEndpoints.indexOf(e.toLowerCase())},Et.canUseLocalStorage=function(){return Et._canUseLocalStorage===undefined&&(Et._canUseLocalStorage=!!Et._getVerifiedStorageObject(c.LocalStorage)),Et._canUseLocalStorage},Et.getStorage=function(e,t){var n=Et._getLocalStorageObject();if(null!==n)try{return n.getItem(t)}catch(r){Et._canUseLocalStorage=!1,e.throwInternal(Q.WARNING,re.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+Et.getExceptionName(r),{exception:Et.dump(r)})}return null},Et.setStorage=function(e,t,n){var r=Et._getLocalStorageObject();if(null!==r)try{return r.setItem(t,n),!0}catch(i){Et._canUseLocalStorage=!1,e.throwInternal(Q.WARNING,re.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+Et.getExceptionName(i),{exception:Et.dump(i)})}return!1},Et.removeStorage=function(e,t){var n=Et._getLocalStorageObject();if(null!==n)try{return n.removeItem(t),!0}catch(r){Et._canUseLocalStorage=!1,e.throwInternal(Q.WARNING,re.BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+Et.getExceptionName(r),{exception:Et.dump(r)})}return!1},Et._getSessionStorageObject=function(){return Et.canUseSessionStorage()?Et._getVerifiedStorageObject(c.SessionStorage):null},Et.canUseSessionStorage=function(){return Et._canUseSessionStorage===undefined&&(Et._canUseSessionStorage=!!Et._getVerifiedStorageObject(c.SessionStorage)),Et._canUseSessionStorage},Et.getSessionStorageKeys=function(){var e=[];if(Et.canUseSessionStorage())for(var t in w("sessionStorage"))e.push(t);return e},Et.getSessionStorage=function(e,t){var n=Et._getSessionStorageObject();if(null!==n)try{return n.getItem(t)}catch(r){Et._canUseSessionStorage=!1,e.throwInternal(Q.WARNING,re.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+Et.getExceptionName(r),{exception:Et.dump(r)})}return null},Et.setSessionStorage=function(e,t,n){var r=Et._getSessionStorageObject();if(null!==r)try{return r.setItem(t,n),!0}catch(i){Et._canUseSessionStorage=!1,e.throwInternal(Q.WARNING,re.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+Et.getExceptionName(i),{exception:Et.dump(i)})}return!1},Et.removeSessionStorage=function(e,t){var n=Et._getSessionStorageObject();if(null!==n)try{return n.removeItem(t),!0}catch(r){Et._canUseSessionStorage=!1,e.throwInternal(Q.WARNING,re.BrowserFailedRemovalFromSessionStorage,"Browser failed removal of session storage item. "+Et.getExceptionName(r),{exception:Et.dump(r)})}return!1},Et.disableCookies=function(){J.disableCookies()},Et.canUseCookies=function(e){if(J._canUseCookies===undefined){J._canUseCookies=!1;try{J._canUseCookies=Et.document.cookie!==undefined}catch(t){e.throwInternal(Q.WARNING,re.CannotAccessCookie,"Cannot access document.cookie - "+Et.getExceptionName(t),{exception:Et.dump(t)})}}return J._canUseCookies},Et.disallowsSameSiteNone=function(e){return!(!Tt(e)||!~e.indexOf("CPU iPhone OS 12")&&!~e.indexOf("iPad; CPU OS 12")&&!(~e.indexOf("Macintosh; Intel Mac OS X 10_14")&&~e.indexOf("Version/")&&~e.indexOf("Safari"))&&(!~e.indexOf("Macintosh; Intel Mac OS X 10_14")||(n=(t=e.length)-40,"AppleWebKit/605.1.15 (KHTML, like Gecko)"!=e.substring(0<=n?n:0,t)))&&!~e.indexOf("Chrome/5")&&!~e.indexOf("Chrome/6")&&(!~e.indexOf("UnrealEngine")||~e.indexOf("Chrome"))&&!~e.indexOf("UCBrowser/12")&&!~e.indexOf("UCBrowser/11"));var t,n},Et.setCookie=function(e,t,n,r){var i,a,o;Et.canUseCookies(e)&&(a=i="",r&&(i=";domain="+r),(o=V())&&"https:"===o.protocol&&(a=";secure",null===Ct&&(Ct=Et.disallowsSameSiteNone((D()||{}).userAgent)),Ct||(n+=";SameSite=None")),Et.document.cookie=t+"="+n+i+";path=/"+a)},Et.stringToBoolOrDefault=function(e,t){return void 0===t&&(t=!1),e===undefined||null===e?t:"true"==e.toString().toLowerCase()},Et.getCookie=function(e,t){if(Et.canUseCookies(e)){var n="";if(t&&t.length)for(var r=t+"=",i=Et.document.cookie.split(";"),a=0;a<i.length;a++){var o=i[a];if((o=Et.trim(o))&&!o.indexOf(r)){n=o.substring(r.length,i[a].length);break}}return n}},Et.deleteCookie=function(e,t){Et.canUseCookies(e)&&(Et.document.cookie=t+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},Et.newId=function(){for(var e="",t=1073741824*Math.random();0<t;)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[0|t%64],t=Math.floor(t/64);return e},Et.random32=function(){return 4294967296*Math.random()|0},Et.generateW3CId=function(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n="",r=0;r<4;r++)n+=t[15&(e=Et.random32())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+4*Math.random()|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+i+n.substr(16,3)+n.substr(19,12)},Et.getIEVersion=function(e){void 0===e&&(e=null);var t=e?e.toLowerCase():St?(St.userAgent||"").toLowerCase():"";if(~t.indexOf("msie"))return parseInt(t.split("msie")[1]);if(t.indexOf("trident/")){var n=parseInt(t.split("trident/")[1]);if(n)return n+4}return null},Et.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=""+(e=Math.round(e))%1e3,n=""+Math.floor(e/1e3)%60,r=""+Math.floor(e/6e4)%60,i=""+Math.floor(e/36e5)%24,a=Math.floor(e/864e5),t=1===t.length?"00"+t:2===t.length?"0"+t:t,n=n.length<2?"0"+n:n,r=r.length<2?"0"+r:r;return(0<a?a+".":"")+(i=i.length<2?"0"+i:i)+":"+r+":"+n+"."+t},Et.isCrossOriginError=function(e,t,n,r,i){return("Script error."===e||"Script error"===e)&&!i},Et.dump=function(e){var t=Object[O].toString.call(e),n="";return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":A()&&(n=k().stringify(e)),t+n},Et.getExceptionName=function(e){return"[object Error]"===Object[O].toString.call(e)?e.name:""},Et.addEventHandler=function(e,t){return te.Attach(_(),e,t)},Et.IsBeaconApiSupported=function(){return"sendBeacon"in St&&St.sendBeacon},Et.getExtension=function(e,t){for(var n=null,r=0;!n&&r<e.length;)e[r]&&e[r].identifier===t&&(n=e[r]),r++;return n},Et.document=N()||{},Et._canUseLocalStorage=undefined,Et._canUseSessionStorage=undefined,Et._internalEndpoints=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],Et.NotSpecified="not_specified",Et.trim=J.strTrim,Et.isArray=J.isArray,Et.isError=J.isError,Et.isDate=J.isDate,Et.toISOStringForIE8=J.toISOString,Et);function Et(){}var _t=(bt.parseUrl=function(e){var t=bt._htmlAnchorIdx,n=bt._htmlAnchorElement,r=n[t];return bt.document.createElement?n[t]||(r=n[t]=bt.document.createElement("a")):r={host:bt.parseHost(e,!0)},r.href=e,++t>=n.length&&(t=0),bt._htmlAnchorIdx=t,r},bt.getAbsoluteUrl=function(e){var t,n=bt.parseUrl(e);return n&&(t=n.href),t},bt.getPathName=function(e){var t,n=bt.parseUrl(e);return n&&(t=n.pathname),t},bt.getCompleteUrl=function(e,t){return e?e.toUpperCase()+" "+t:t},bt.parseHost=function(e,t){var n=bt.parseFullHost(e,t);if(n){var r=n.match(/(www[0-9]?\.)?(.[^/:]+)(\:[\d]+)?/i);if(null!=r&&3<r.length&&Tt(r[2])&&0<r[2].length)return r[2]+(r[3]||"")}return n},bt.parseFullHost=function(e,t){var n,r,i,a=null;return!e||null!=(n=e.match(/(\w*):\/\/(.[^/:]+)(\:[\d]+)?/i))&&2<n.length&&Tt(n[2])&&0<n[2].length&&(a=n[2]||"",t&&2<n.length&&(r=(n[1]||"").toLowerCase(),i=n[3]||"",("http"==r&&":80"===i||"https"==r&&":443"===i)&&(i=""),a+=i)),a},bt.document=N()||{},bt._htmlAnchorIdx=0,bt._htmlAnchorElement=[null,null,null,null,null],bt);function bt(){}var Nt=(Dt.canIncludeCorrelationHeader=function(e,t,n){if(!t||e&&e.disableCorrelationHeaders)return!1;if(e&&e.correlationHeaderExcludePatterns)for(var r=0;r<e.correlationHeaderExcludePatterns.length;r++)if(e.correlationHeaderExcludePatterns[r].test(t))return!1;var i=_t.parseUrl(t).host.toLowerCase();if(i&&(~i.indexOf(":443")||~i.indexOf(":80"))&&(i=(_t.parseFullHost(t,!0)||"").toLowerCase()),!(e&&e.enableCorsCorrelation||i===n))return!1;var a,o=e&&e.correlationHeaderDomains;if(o&&(J.arrForEach(o,function(e){var t=RegExp(e.toLowerCase().replace(/\./g,".").replace(/\*/g,".*"));a=a||t.test(i)}),!a))return!1;var s=e&&e.correlationHeaderExcludedDomains;if(!s||0===s.length)return!0;for(r=0;r<s.length;r++)if(RegExp(s[r].toLowerCase().replace(/\./g,".").replace(/\*/g,".*")).test(i))return!1;return i&&0<i.length},Dt.getCorrelationContext=function(e){if(e){var t=Dt.getCorrelationContextValue(e,vt.requestContextTargetKey);if(t&&t!==Dt.correlationIdPrefix)return t}},Dt.getCorrelationContextValue=function(e,t){if(e)for(var n=e.split(","),r=0;r<n.length;++r){var i=n[r].split("=");if(2===i.length&&i[0]===t)return i[1]}},Dt.correlationIdPrefix="cid-v1:",Dt);function Dt(){}var At=(kt.ParseDependencyPath=function(e,t,n,r){var i,a,o,s=r,c=r,s=t&&0<t.length?(o=(i=_t.parseUrl(t)).host,s||(null!=i.pathname?("/"!=(a=0===i.pathname.length?"/":i.pathname)[0]&&(a="/"+a),c=i.pathname,xt.sanitizeString(e,n?n+" "+a:a)):xt.sanitizeString(e,t))):o=r;return{target:o,name:s,data:c}},kt);function kt(){}var Rt=(Pt.Now=function(){var e=z();return e&&e.now&&e.timing?e.now()+e.timing.navigationStart:(new Date).getTime()},Pt.GetDuration=function(e,t){var n=null;return 0===e||0===t||J.isNullOrUndefined(e)||J.isNullOrUndefined(t)||(n=t-e),n},Pt);function Pt(){}var Lt="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Mt="sampleRate",Ut="ProcessLegacy",Ft="http.method",Ot="https://dc.services.visualstudio.com",qt=(Vt.parse=function(e){if(!e)return{};var t,n=e.split(Vt._FIELDS_SEPARATOR),r=J.arrReduce(n,function(e,t){var n,r,i=t.split(Vt._FIELD_KEY_VALUE_SEPARATOR);return 2===i.length&&(n=i[0].toLowerCase(),r=i[1],e[n]=r),e},{});return 0<J.objKeys(r).length&&(r.endpointsuffix&&(t=r.location?r.location+".":"",r.ingestionendpoint=r.ingestionendpoint||"https://"+t+"dc."+r.endpointsuffix),r.ingestionendpoint=r.ingestionendpoint||Ot),r},Vt._FIELDS_SEPARATOR=";",Vt._FIELD_KEY_VALUE_SEPARATOR="=",Vt);function Vt(){}var zt,Bt=function(){},Ht=(zt=Bt,__extends(jt,zt),jt);function jt(){return zt.call(this)||this}var Gt,Kt=(Gt=function(){this.ver=1,this.sampleRate=100,this.tags={}},__extends(Wt,Gt),Wt);function Wt(e,t,n){var r=Gt.call(this)||this;return r.name=xt.sanitizeString(e,n)||wt.NotSpecified,r.data=t,r.time=J.toISOString(new Date),r.aiDataContract={time:v.Required,iKey:v.Required,name:v.Required,sampleRate:function(){return 100===r.sampleRate?v.Hidden:v.Required},tags:v.Required,data:v.Required},r}var Xt,Yt=function(){},Jt=(Xt=Yt,__extends(Zt,Xt),Zt);function Zt(){var e=Xt.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var Qt,$t=(Qt=Jt,__extends(en,Qt),en.envelopeType="Microsoft.ApplicationInsights.{0}.Event",en.dataType="EventData",en);function en(e,t,n,r){var i=Qt.call(this)||this;return i.aiDataContract={ver:v.Required,name:v.Required,properties:v.Default,measurements:v.Default},i.name=xt.sanitizeString(e,t)||wt.NotSpecified,i.properties=xt.sanitizeProperties(e,n),i.measurements=xt.sanitizeMeasurements(e,r),i}var tn,nn=(tn=Yt,__extends(rn,tn),rn);function rn(){var e=tn.call(this)||this;return e.ver=2,e.exceptions=[],e.properties={},e.measurements={},e}var an,on="error",sn=(an=nn,__extends(cn,an),cn.CreateFromInterface=function(t,e,n,r){var i=e.exceptions&&J.arrMap(e.exceptions,function(e){return ln.CreateFromInterface(t,e)});return new cn(t,__assign({},e,{exceptions:i}),n,r)},cn.prototype.toInterface=function(){var e=this,t=e.exceptions,n=e.properties,r=e.measurements,i=e.severityLevel,a=(e.ver,e.problemGroup),o=e.id,s=e.isManual;return{ver:"4.0",exceptions:t instanceof Array&&J.arrMap(t,function(e){return e.toInterface()})||undefined,severityLevel:i,properties:n,measurements:r,problemGroup:a,id:o,isManual:s}},cn.CreateSimpleException=function(e,t,n,r,i,a){return{exceptions:[{hasFullStack:!0,message:e,stack:i,typeName:t}]}},cn.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",cn.dataType="ExceptionData",cn);function cn(e,t,n,r,i,a){var o,s=an.call(this)||this;return s.aiDataContract={ver:v.Required,exceptions:v.Required,severityLevel:v.Default,properties:v.Default,measurements:v.Default},"ver"in(o=t)&&"exceptions"in o&&"properties"in o?(s.exceptions=t.exceptions,s.properties=t.properties,s.measurements=t.measurements,t.severityLevel&&(s.severityLevel=t.severityLevel),t.id&&(s.id=t.id),t.problemGroup&&(s.problemGroup=t.problemGroup),s.ver=2,J.isNullOrUndefined(t.isManual)||(s.isManual=t.isManual)):(s.exceptions=[new ln(e,t)],s.properties=xt.sanitizeProperties(e,n)||{},s.measurements=xt.sanitizeMeasurements(e,r),i&&(s.severityLevel=i),a&&(s.id=a)),s}var un,ln=(un=function(){this.hasFullStack=!0,this.parsedStack=[]},__extends(dn,un),dn.prototype.toInterface=function(){var e=this.parsedStack instanceof Array&&J.arrMap(this.parsedStack,function(e){return e.toInterface()});return{id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this.stack,parsedStack:e||undefined}},dn.CreateFromInterface=function(e,t){var n=t.parsedStack instanceof Array&&J.arrMap(t.parsedStack,function(e){return fn.CreateFromInterface(e)})||t.parsedStack;return new dn(e,__assign({},t,{parsedStack:n}))},dn.parseStack=function(e){if(J.isString(e)){for(var t=e.split("\n"),n=[],r=0,i=0,a=0;a<=t.length;a++){var o,s=t[a];fn.regex.test(s)&&(i+=(o=new fn(t[a],r++)).sizeInBytes,n.push(o))}if(32768<i)for(var c=0,u=n.length-1,l=0,d=c,p=u;c<u;){if(32768<(l+=n[c].sizeInBytes+n[u].sizeInBytes)){var f=p-d+1;n.splice(d,f);break}d=c,p=u,c++,u--}}return n},dn);function dn(e,t){var n,r,i=un.call(this)||this;return i.aiDataContract={id:v.Default,outerId:v.Default,typeName:v.Required,message:v.Required,hasFullStack:v.Default,stack:v.Default,parsedStack:v.Array},"hasFullStack"in t&&"typeName"in t?(i.typeName=t.typeName,i.message=t.message,i.stack=t.stack,i.parsedStack=t.parsedStack,i.hasFullStack=t.hasFullStack):(n=t,wt.isError(n)||(n=n[on]||n.evt||n),i.typeName=xt.sanitizeString(e,function(e){var t="";if(e&&!(t=e.typeName||e.name||""))try{var n=/function (.{1,})\(/.exec(e.constructor.toString()),t=n&&1<n.length?n[1]:""}catch(r){}return t}(n))||wt.NotSpecified,i.message=xt.sanitizeMessage(e,t.message)||wt.NotSpecified,r=t.stack,i.parsedStack=dn.parseStack(r),i.stack=xt.sanitizeException(e,r),i.hasFullStack=wt.isArray(i.parsedStack)&&0<i.parsedStack.length),i}var pn,fn=(pn=function(){},__extends(gn,pn),gn.CreateFromInterface=function(e){return new gn(e,null)},gn.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},gn.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,gn.baseSize=58,gn);function gn(e,t){var n,r,i=pn.call(this)||this;return i.sizeInBytes=0,i.aiDataContract={level:v.Required,method:v.Required,assembly:v.Default,fileName:v.Default,line:v.Default},"string"==typeof e?(n=e,i.level=t,i.method="<no_method>",i.assembly=wt.trim(n),i.fileName="",i.line=0,(r=n.match(gn.regex))&&5<=r.length&&(i.method=wt.trim(r[2])||i.method,i.fileName=wt.trim(r[4]),i.line=parseInt(r[5])||0)):(i.level=e.level,i.method=e.method,i.assembly=e.assembly,i.fileName=e.fileName,i.line=e.line,i.sizeInBytes=0),i.sizeInBytes+=i.method.length,i.sizeInBytes+=i.fileName.length,i.sizeInBytes+=i.assembly.length,i.sizeInBytes+=gn.baseSize,i.sizeInBytes+=i.level.toString().length,i.sizeInBytes+=i.line.toString().length,i}var hn,mn,vn,yn=(hn=Yt,__extends(xn,hn),xn);function xn(){var e=hn.call(this)||this;return e.ver=2,e.metrics=[],e.properties={},e.measurements={},e}(vn=mn={})[vn.Measurement=0]="Measurement",vn[vn.Aggregation=1]="Aggregation";var In,Sn=(In=function(){this.kind=mn.Measurement},__extends(Tn,In),Tn);function Tn(){var e=In.apply(this,arguments)||this;return e.aiDataContract={name:v.Required,kind:v.Default,value:v.Required,count:v.Default,min:v.Default,max:v.Default,stdDev:v.Default},e}var Cn,wn=(Cn=yn,__extends(En,Cn),En.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",En.dataType="MetricData",En);function En(e,t,n,r,i,a,o,s){var c=Cn.call(this)||this;c.aiDataContract={ver:v.Required,metrics:v.Required,properties:v.Default};var u=new Sn;return u.count=0<r?r:undefined,u.max=isNaN(a)||null===a?undefined:a,u.min=isNaN(i)||null===i?undefined:i,u.name=xt.sanitizeString(e,t)||wt.NotSpecified,u.value=n,c.metrics=[u],c.properties=xt.sanitizeProperties(e,o),c.measurements=xt.sanitizeMeasurements(e,s),c}var _n,bn=(_n=Jt,__extends(Nn,_n),Nn);function Nn(){var e=_n.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var Dn,An=(Dn=bn,__extends(kn,Dn),kn.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",kn.dataType="PageviewData",kn);function kn(e,t,n,r,i,a,o){var s=Dn.call(this)||this;return s.aiDataContract={ver:v.Required,name:v.Default,url:v.Default,duration:v.Default,properties:v.Default,measurements:v.Default,id:v.Default},s.id=xt.sanitizeId(e,o),s.url=xt.sanitizeUrl(e,n),s.name=xt.sanitizeString(e,t)||wt.NotSpecified,isNaN(r)||(s.duration=wt.msToTimeSpan(r)),s.properties=xt.sanitizeProperties(e,i),s.measurements=xt.sanitizeMeasurements(e,a),s}var Rn,Pn=(Rn=Yt,__extends(Ln,Rn),Ln);function Ln(){var e=Rn.call(this)||this;return e.ver=2,e.success=!0,e.properties={},e.measurements={},e}var Mn,Un=(Mn=Pn,__extends(Fn,Mn),Fn.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",Fn.dataType="RemoteDependencyData",Fn);function Fn(e,t,n,r,i,a,o,s,c,u,l,d){void 0===c&&(c="Ajax");var p=Mn.call(this)||this;p.aiDataContract={id:v.Required,ver:v.Required,name:v.Default,resultCode:v.Default,duration:v.Default,success:v.Default,data:v.Default,target:v.Default,type:v.Default,properties:v.Default,measurements:v.Default,kind:v.Default,value:v.Default,count:v.Default,min:v.Default,max:v.Default,stdDev:v.Default,dependencyKind:v.Default,dependencySource:v.Default,commandName:v.Default,dependencyTypeName:v.Default},p.id=t,p.duration=wt.msToTimeSpan(i),p.success=a,p.resultCode=o+"",p.type=xt.sanitizeString(e,c);var f=At.ParseDependencyPath(e,n,s,r);return p.data=xt.sanitizeUrl(e,r)||f.data,p.target=xt.sanitizeString(e,f.target),u&&(p.target=p.target+" | "+u),p.name=xt.sanitizeString(e,f.name),p.properties=xt.sanitizeProperties(e,l),p.measurements=xt.sanitizeMeasurements(e,d),p}var On,qn=(On=Yt,__extends(Vn,On),Vn);function Vn(){var e=On.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var zn,Bn=(zn=qn,__extends(Hn,zn),Hn.envelopeType="Microsoft.ApplicationInsights.{0}.Message",Hn.dataType="MessageData",Hn);function Hn(e,t,n,r,i){var a=zn.call(this)||this;return a.aiDataContract={ver:v.Required,message:v.Required,severityLevel:v.Default,properties:v.Default},t=t||wt.NotSpecified,a.message=xt.sanitizeMessage(e,t),a.properties=xt.sanitizeProperties(e,r),a.measurements=xt.sanitizeMeasurements(e,i),n&&(a.severityLevel=n),a}var jn,Gn=(jn=bn,__extends(Kn,jn),Kn);function Kn(){var e=jn.call(this)||this;return e.ver=2,e.properties={},e.measurements={},e}var Wn,Xn=(Wn=Gn,__extends(Yn,Wn),Yn.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",Yn.dataType="PageviewPerformanceData",Yn);function Yn(e,t,n,r,i,a,o){var s=Wn.call(this)||this;return s.aiDataContract={ver:v.Required,name:v.Default,url:v.Default,duration:v.Default,perfTotal:v.Default,networkConnect:v.Default,sentRequest:v.Default,receivedResponse:v.Default,domProcessing:v.Default,properties:v.Default,measurements:v.Default},s.url=xt.sanitizeUrl(e,n),s.name=xt.sanitizeString(e,t)||wt.NotSpecified,s.properties=xt.sanitizeProperties(e,i),s.measurements=xt.sanitizeMeasurements(e,a),o&&(s.domProcessing=o.domProcessing,s.duration=o.duration,s.networkConnect=o.networkConnect,s.perfTotal=o.perfTotal,s.receivedResponse=o.receivedResponse,s.sentRequest=o.sentRequest),s}var Jn,Zn,Qn,$n=(Jn=Ht,__extends(er,Jn),er);function er(e,t){var n=Jn.call(this)||this;return n.aiDataContract={baseType:v.Required,baseData:v.Required},n.baseType=e,n.baseData=t,n}(Qn=Zn={})[Qn.Verbose=0]="Verbose",Qn[Qn.Information=1]="Information",Qn[Qn.Warning=2]="Warning",Qn[Qn.Error=3]="Error",Qn[Qn.Critical=4]="Critical";var tr=(nr.getConfig=function(e,t,n,r){var i;return void 0===r&&(r=!1),i=n&&e.extensionConfig&&e.extensionConfig[n]&&!J.isNullOrUndefined(e.extensionConfig[n][t])?e.extensionConfig[n][t]:e[t],J.isNullOrUndefined(i)?r:i},nr);function nr(){}var rr=function(){this.applicationVersion="ai.application.ver",this.applicationBuild="ai.application.build",this.applicationTypeId="ai.application.typeId",this.applicationId="ai.application.applicationId",this.applicationLayer="ai.application.layer",this.deviceId="ai.device.id",this.deviceIp="ai.device.ip",this.deviceLanguage="ai.device.language",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceFriendlyName="ai.device.friendlyName",this.deviceNetwork="ai.device.network",this.deviceNetworkName="ai.device.networkName",this.deviceOEMName="ai.device.oemName",this.deviceOS="ai.device.os",this.deviceOSVersion="ai.device.osVersion",this.deviceRoleInstance="ai.device.roleInstance",this.deviceRoleName="ai.device.roleName",this.deviceScreenResolution="ai.device.screenResolution",this.deviceType="ai.device.type",this.deviceMachineName="ai.device.machineName",this.deviceVMName="ai.device.vmName",this.deviceBrowser="ai.device.browser",this.deviceBrowserVersion="ai.device.browserVersion",this.locationIp="ai.location.ip",this.locationCountry="ai.location.country",this.locationProvince="ai.location.province",this.locationCity="ai.location.city",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationRootId="ai.operation.rootId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.sessionIsNew="ai.session.isNew",this.userAccountAcquisitionDate="ai.user.accountAcquisitionDate",this.userAccountId="ai.user.accountId",this.userAgent="ai.user.userAgent",this.userId="ai.user.id",this.userStoreRegion="ai.user.storeRegion",this.userAuthUserId="ai.user.authUserId",this.userAnonymousUserAcquisitionDate="ai.user.anonUserAcquisitionDate",this.userAuthenticatedUserAcquisitionDate="ai.user.authUserAcquisitionDate",this.cloudName="ai.cloud.name",this.cloudRole="ai.cloud.role",this.cloudRoleVer="ai.cloud.roleVer",this.cloudRoleInstance="ai.cloud.roleInstance",this.cloudEnvironment="ai.cloud.environment",this.cloudLocation="ai.cloud.location",this.cloudDeploymentUnit="ai.cloud.deploymentUnit",this.internalNodeName="ai.internal.nodeName",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalSnippet="ai.internal.snippet",this.internalSdkSrc="ai.internal.sdkSrc"},ir=(ar.create=function(e,t,n,r,i,a){if(n=xt.sanitizeString(r,n)||wt.NotSpecified,J.isNullOrUndefined(e)||J.isNullOrUndefined(t)||J.isNullOrUndefined(n))throw Error("Input doesn't contain all required fields");var o={name:n,time:J.toISOString(new Date),iKey:"",ext:a||{},tags:[],data:{},baseType:t,baseData:e};if(!J.isNullOrUndefined(i))for(var s in i)i.hasOwnProperty(s)&&(o.data[s]=i[s]);return o},ar);function ar(){}var or=(sr.UserExt="user",sr.DeviceExt="device",sr.TraceExt="trace",sr.WebExt="web",sr.AppExt="app",sr.OSExt="os",sr.SessionExt="ses",sr.SDKExt="sdk",sr);function sr(){}var cr=new rr,ur="AppInsightsPropertiesPlugin",lr="AppInsightsChannelPlugin",dr="ApplicationInsightsAnalytics",pr={PropertiesPluginIdentifier:ur,BreezeChannelIdentifier:lr,AnalyticsPluginIdentifier:dr,Util:wt,CorrelationIdHelper:Nt,UrlHelper:_t,DateTimeUtils:Rt,ConnectionStringParser:qt,FieldType:function(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(v),RequestHeaders:vt,DisabledPropertyName:Lt,ProcessLegacy:Ut,SampleRate:Mt,HttpMethod:Ft,DEFAULT_BREEZE_ENDPOINT:Ot,AIData:Ht,AIBase:Bt,Envelope:Kt,Event:$t,Exception:sn,Metric:wn,PageView:An,PageViewData:bn,RemoteDependencyData:Un,Trace:Bn,PageViewPerformance:Xn,Data:$n,SeverityLevel:function(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(Zn),ConfigurationManager:tr,ContextTagKeys:rr,DataSanitizer:xt,TelemetryItemCreator:ir,CtxTagKeys:cr,Extensions:or,DistributedTracingModes:function(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(U)},fr=(gr.getDefaultConfig=function(e){return(e=e||{}).endpointUrl=e.endpointUrl||"https://dc.services.visualstudio.com/v2/track",e.sessionRenewalMs=18e5,e.sessionExpirationMs=864e5,e.maxBatchSizeInBytes=0<e.maxBatchSizeInBytes?e.maxBatchSizeInBytes:102400,e.maxBatchInterval=isNaN(e.maxBatchInterval)?15e3:e.maxBatchInterval,e.enableDebug=wt.stringToBoolOrDefault(e.enableDebug),e.disableExceptionTracking=wt.stringToBoolOrDefault(e.disableExceptionTracking),e.disableTelemetry=wt.stringToBoolOrDefault(e.disableTelemetry),e.verboseLogging=wt.stringToBoolOrDefault(e.verboseLogging),e.emitLineDelimitedJson=wt.stringToBoolOrDefault(e.emitLineDelimitedJson),e.diagnosticLogInterval=e.diagnosticLogInterval||1e4,e.autoTrackPageVisitTime=wt.stringToBoolOrDefault(e.autoTrackPageVisitTime),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||100<=e.samplingPercentage)&&(e.samplingPercentage=100),e.disableAjaxTracking=wt.stringToBoolOrDefault(e.disableAjaxTracking),e.maxAjaxCallsPerView=isNaN(e.maxAjaxCallsPerView)?500:e.maxAjaxCallsPerView,e.isBeaconApiDisabled=wt.stringToBoolOrDefault(e.isBeaconApiDisabled,!0),e.disableCorrelationHeaders=wt.stringToBoolOrDefault(e.disableCorrelationHeaders),e.correlationHeaderExcludedDomains=e.correlationHeaderExcludedDomains||["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],e.disableFlushOnBeforeUnload=wt.stringToBoolOrDefault(e.disableFlushOnBeforeUnload),e.disableFlushOnUnload=wt.stringToBoolOrDefault(e.disableFlushOnUnload,e.disableFlushOnBeforeUnload),e.enableSessionStorageBuffer=wt.stringToBoolOrDefault(e.enableSessionStorageBuffer,!0),e.isRetryDisabled=wt.stringToBoolOrDefault(e.isRetryDisabled),e.isCookieUseDisabled=wt.stringToBoolOrDefault(e.isCookieUseDisabled),e.isStorageUseDisabled=wt.stringToBoolOrDefault(e.isStorageUseDisabled),e.isBrowserLinkTrackingEnabled=wt.stringToBoolOrDefault(e.isBrowserLinkTrackingEnabled),e.enableCorsCorrelation=wt.stringToBoolOrDefault(e.enableCorsCorrelation),e},gr.prototype.addTelemetryInitializers=function(e){var t=this;this._hasLegacyInitializers||(this.appInsightsNew.addTelemetryInitializer(function(e){t._processLegacyInitializers(e)}),this._hasLegacyInitializers=!0),this._queue.push(e)},gr.prototype.startTrackPage=function(e){this.appInsightsNew.startTrackPage(e)},gr.prototype.stopTrackPage=function(e,t,n,r){this.appInsightsNew.stopTrackPage(e,t,n)},gr.prototype.trackPageView=function(e,t,n,r,i){var a={name:e,uri:t,properties:n,measurements:r};this.appInsightsNew.trackPageView(a)},gr.prototype.trackEvent=function(e,t,n){this.appInsightsNew.trackEvent({name:e})},gr.prototype.trackDependency=function(e,t,n,r,i,a,o){this.appInsightsNew.trackDependencyData({id:e,target:n,type:r,duration:i,properties:{HttpMethod:t},success:a,responseCode:o})},gr.prototype.trackException=function(e,t,n,r,i){this.appInsightsNew.trackException({exception:e})},gr.prototype.trackMetric=function(e,t,n,r,i,a){this.appInsightsNew.trackMetric({name:e,average:t,sampleCount:n,min:r,max:i})},gr.prototype.trackTrace=function(e,t,n){this.appInsightsNew.trackTrace({message:e,severityLevel:n})},gr.prototype.flush=function(e){this.appInsightsNew.flush(e)},gr.prototype.setAuthenticatedUserContext=function(e,t,n){this.appInsightsNew.context.user.setAuthenticatedUserContext(e,t,n)},gr.prototype.clearAuthenticatedUserContext=function(){this.appInsightsNew.context.user.clearAuthenticatedUserContext()},gr.prototype._onerror=function(e,t,n,r,i){this.appInsightsNew._onerror({message:e,url:t,lineNumber:n,columnNumber:r,error:i})},gr.prototype.startTrackEvent=function(e){this.appInsightsNew.startTrackEvent(e)},gr.prototype.stopTrackEvent=function(e,t,n){this.appInsightsNew.stopTrackEvent(e,t,n)},gr.prototype.downloadAndSetup=function(e){throw Error("downloadAndSetup not implemented in web SKU")},gr.prototype.updateSnippetDefinitions=function(e){for(var t in this)"string"==typeof t&&(e[t]=this[t])},gr.prototype.loadAppInsights=function(){var r,i=this;this.config.iKey&&(r=this.trackPageView,this.trackPageView=function(e,t,n){r.call(i,null,e,t,n)});var e="logPageView";"function"==typeof this.snippet[e]&&(this[e]=function(e,t,n){i.trackPageView(null,e,t,n)});var t="logEvent";return"function"==typeof this.snippet[t]&&(this[t]=function(e,t,n){i.trackEvent(e,t,n)}),this},gr.prototype._processLegacyInitializers=function(e){return e.tags[Ut]=this._queue,e},gr);function gr(e,t){this._hasLegacyInitializers=!1,this._queue=[],this.config=gr.getDefaultConfig(e.config),this.appInsightsNew=t,this.context={addTelemetryInitializer:this.addTelemetryInitializers.bind(this)}}var hr=function wa(y,x,t,I){Ce(wa,this,function(e){var d,p=J.arrForEach,f=J.isNullOrUndefined,g=null,h=[],m=!1;function v(){t&&p(t.getTransmissionControls(),function(e){p(e,function(e){return e.flush(!0)})})}t&&(d=t.logger),e.trackPageView=function(r,i){var e,a=r.name;!f(a)&&"string"==typeof a||(e=N(),a=r.name=e&&e.title||"");var t,o=r.uri;if(!f(o)&&"string"==typeof o||(t=V(),o=r.uri=t&&t.href||""),!I.isPerformanceTimingSupported())return y.sendPageViewInternal(r,i),v(),void d.throwInternal(Q.WARNING,re.NavigationTimingNotSupported,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");var n,s,c=!1,u=I.getPerformanceTiming().navigationStart,l=Rt.GetDuration(u,+new Date);I.shouldCollectDuration(l)||(l=undefined),f(i)||f(i.duration)||(n=i.duration),!x&&isNaN(n)||(isNaN(n)&&((i=i||{}).duration=l),y.sendPageViewInternal(r,i),v(),c=!0),i=i||{},s=function(){var e,t=!1;try{I.isPerformanceTimingDataReady()?(t=!0,e={name:a,uri:o},I.populatePageViewPerformanceEvent(e),e.isValid||c?(c||(i.duration=e.durationMs,y.sendPageViewInternal(r,i)),m||(y.sendPageViewPerformanceInternal(e,i),m=!0)):(i.duration=l,y.sendPageViewInternal(r,i))):6e4<Rt.GetDuration(u,+new Date)&&(t=!0,c||(i.duration=6e4,y.sendPageViewInternal(r,i)))}catch(n){d.throwInternal(Q.CRITICAL,re.TrackPVFailedCalc,"trackPageView failed on page load calculation: "+wt.getExceptionName(n),{exception:wt.dump(n)})}return t},h.push(s),g=g||setInterval(function(){var e=h.slice(0),t=!1;h=[],p(e,function(e){e()?t=!0:h.push(e)}),0===h.length&&(clearInterval(g),g=null),t&&v()},100)}})},mr=(vr.prototype.trackPreviousPageVisit=function(e,t){try{var n=this.restartPageVisitTimer(e,t);n&&this.pageVisitTimeTrackingHandler(n.pageName,n.pageUrl,n.pageVisitTime)}catch(r){this._logger.warnToConsole("Auto track page visit time failed, metric will not be collected: "+wt.dump(r))}},vr.prototype.restartPageVisitTimer=function(e,t){try{var n=this.stopPageVisitTimer();return this.startPageVisitTimer(e,t),n}catch(r){return this._logger.warnToConsole("Call to restart failed: "+wt.dump(r)),null}},vr.prototype.startPageVisitTimer=function(e,t){try{if(wt.canUseSessionStorage()){if(null!=wt.getSessionStorage(this._logger,this.prevPageVisitDataKeyName))throw Error("Cannot call startPageVisit consecutively without first calling stopPageVisit");var n=new yr(e,t),r=k().stringify(n);wt.setSessionStorage(this._logger,this.prevPageVisitDataKeyName,r)}}catch(i){this._logger.warnToConsole("Call to start failed: "+wt.dump(i))}},vr.prototype.stopPageVisitTimer=function(){try{if(wt.canUseSessionStorage()){var e=J.dateNow(),t=wt.getSessionStorage(this._logger,this.prevPageVisitDataKeyName);if(t&&A()){var n=k().parse(t);return n.pageVisitTime=e-n.pageVisitStartTime,wt.removeSessionStorage(this._logger,this.prevPageVisitDataKeyName),n}return null}return null}catch(r){return this._logger.warnToConsole("Stop page visit timer failed: "+wt.dump(r)),null}},vr);function vr(e,t){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=t,this._logger=e}var yr=function(e,t){this.pageVisitStartTime=J.dateNow(),this.pageName=e,this.pageUrl=t},xr=(Ir.prototype.populatePageViewPerformanceEvent=function(e){e.isValid=!1;var t,n,r,i,a,o=this.getPerformanceNavigationTiming(),s=this.getPerformanceTiming();(o||s)&&(a=o?(t=o.duration,n=Rt.GetDuration(o.startTime,o.connectEnd),r=Rt.GetDuration(o.requestStart,o.responseStart),i=Rt.GetDuration(o.responseStart,o.responseEnd),Rt.GetDuration(o.responseEnd,o.loadEventEnd)):(t=Rt.GetDuration(s.navigationStart,s.loadEventEnd),n=Rt.GetDuration(s.navigationStart,s.connectEnd),r=Rt.GetDuration(s.requestStart,s.responseStart),i=Rt.GetDuration(s.responseStart,s.responseEnd),Rt.GetDuration(s.responseEnd,s.loadEventEnd)),0===t?this._logger.throwInternal(Q.WARNING,re.ErrorPVCalc,"error calculating page view performance.",{total:t,network:n,request:r,response:i,dom:a}):this.shouldCollectDuration(t,n,r,i,a)?t<Math.floor(n)+Math.floor(r)+Math.floor(i)+Math.floor(a)?this._logger.throwInternal(Q.WARNING,re.ClientPerformanceMathError,"client performance math error.",{total:t,network:n,request:r,response:i,dom:a}):(e.durationMs=t,e.perfTotal=e.duration=wt.msToTimeSpan(t),e.networkConnect=wt.msToTimeSpan(n),e.sentRequest=wt.msToTimeSpan(r),e.receivedResponse=wt.msToTimeSpan(i),e.domProcessing=wt.msToTimeSpan(a),e.isValid=!0):this._logger.throwInternal(Q.WARNING,re.InvalidDurationValue,"Invalid page load duration value. Browser perf data won't be sent.",{total:t,network:n,request:r,response:i,dom:a}))},Ir.prototype.getPerformanceTiming=function(){return this.isPerformanceTimingSupported()?z().timing:null},Ir.prototype.getPerformanceNavigationTiming=function(){return this.isPerformanceNavigationTimingSupported()?z().getEntriesByType("navigation")[0]:null},Ir.prototype.isPerformanceNavigationTimingSupported=function(){var e=z();return e&&e.getEntriesByType&&0<e.getEntriesByType("navigation").length},Ir.prototype.isPerformanceTimingSupported=function(){var e=z();return e&&e.timing},Ir.prototype.isPerformanceTimingDataReady=function(){var e=z(),t=e?e.timing:0;return t&&0<t.domainLookupStart&&0<t.navigationStart&&0<t.responseStart&&0<t.requestStart&&0<t.loadEventEnd&&0<t.responseEnd&&0<t.connectEnd&&0<t.domLoading},Ir.prototype.shouldCollectDuration=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=["googlebot","adsbot-google","apis-google","mediapartners-google"],r=(D()||{}).userAgent,i=!1;if(r)for(var a=0;a<n.length;a++)i=i||!!~r.toLowerCase().indexOf(n[a]);if(i)return!1;for(a=0;a<e.length;a++)if(e[a]>=this.MAX_DURATION_ALLOWED)return!1;return!0},Ir);function Ir(e){this.MAX_DURATION_ALLOWED=36e5,e&&(this._logger=e.logger)}var Sr="duration";function Tr(e,t){e&&e.dispatchEvent&&t&&e.dispatchEvent(t)}var Cr,wr=(Cr=ze,__extends(Er,Cr),Er.getDefaultConfig=function(e){return(e=e||{}).sessionRenewalMs=18e5,e.sessionExpirationMs=864e5,e.disableExceptionTracking=wt.stringToBoolOrDefault(e.disableExceptionTracking),e.autoTrackPageVisitTime=wt.stringToBoolOrDefault(e.autoTrackPageVisitTime),e.overridePageViewDuration=wt.stringToBoolOrDefault(e.overridePageViewDuration),e.enableUnhandledPromiseRejectionTracking=wt.stringToBoolOrDefault(e.enableUnhandledPromiseRejectionTracking),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||100<=e.samplingPercentage)&&(e.samplingPercentage=100),e.isCookieUseDisabled=wt.stringToBoolOrDefault(e.isCookieUseDisabled),e.isStorageUseDisabled=wt.stringToBoolOrDefault(e.isStorageUseDisabled),e.isBrowserLinkTrackingEnabled=wt.stringToBoolOrDefault(e.isBrowserLinkTrackingEnabled),e.enableAutoRouteTracking=wt.stringToBoolOrDefault(e.enableAutoRouteTracking),e.namePrefix=e.namePrefix||"",e},Er.prototype.processTelemetry=function(a,o){var s=this;Pe(this.core,function(){return s.identifier+":processTelemetry"},function(){var e=!1,t=s._telemetryInitializers.length;o=s._getTelCtx(o);for(var n=0;n<t;++n){var r=s._telemetryInitializers[n];if(r)try{if(!1===r.call(null,a)){e=!0;break}}catch(i){o.diagLog().throwInternal(Q.CRITICAL,re.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+wt.getExceptionName(i),{exception:wt.dump(i)},!0)}}e||s.processNext(a,o)},function(){return{item:a}},!a.sync)},Er.prototype.trackEvent=function(e,t){try{var n=ir.create(e,$t.dataType,$t.envelopeType,this.diagLog(),t);this.core.track(n)}catch(r){this.diagLog().throwInternal(Q.WARNING,re.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+wt.getExceptionName(r),{exception:wt.dump(r)})}},Er.prototype.startTrackEvent=function(e){try{this._eventTracking.start(e)}catch(t){this.diagLog().throwInternal(Q.CRITICAL,re.StartTrackEventFailed,"startTrackEvent failed, event will not be collected: "+wt.getExceptionName(t),{exception:wt.dump(t)})}},Er.prototype.stopTrackEvent=function(e,t,n){try{this._eventTracking.stop(e,undefined,t)}catch(r){this.diagLog().throwInternal(Q.CRITICAL,re.StopTrackEventFailed,"stopTrackEvent failed, event will not be collected: "+wt.getExceptionName(r),{exception:wt.dump(r)})}},Er.prototype.trackTrace=function(e,t){try{var n=ir.create(e,Bn.dataType,Bn.envelopeType,this.diagLog(),t);this.core.track(n)}catch(r){this.diagLog().throwInternal(Q.WARNING,re.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+wt.getExceptionName(r),{exception:wt.dump(r)})}},Er.prototype.trackMetric=function(e,t){try{var n=ir.create(e,wn.dataType,wn.envelopeType,this.diagLog(),t);this.core.track(n)}catch(r){this.diagLog().throwInternal(Q.CRITICAL,re.TrackMetricFailed,"trackMetric failed, metric will not be collected: "+wt.getExceptionName(r),{exception:wt.dump(r)})}},Er.prototype.trackPageView=function(e,t){try{var n=e||{};this._pageViewManager.trackPageView(n,__assign({},n.properties,n.measurements,t)),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(n.name,n.uri)}catch(r){this.diagLog().throwInternal(Q.CRITICAL,re.TrackPVFailed,"trackPageView failed, page view will not be collected: "+wt.getExceptionName(r),{exception:wt.dump(r)})}},Er.prototype.sendPageViewInternal=function(e,t,n){var r=N();r&&(e.refUri=e.refUri===undefined?r.referrer:e.refUri);var i=ir.create(e,An.dataType,An.envelopeType,this.diagLog(),t,n);this.core.track(i),this._trackAjaxAttempts=0},Er.prototype.sendPageViewPerformanceInternal=function(e,t,n){var r=ir.create(e,Xn.dataType,Xn.envelopeType,this.diagLog(),t,n);this.core.track(r)},Er.prototype.trackPageViewPerformance=function(e,t){try{this._pageViewPerformanceManager.populatePageViewPerformanceEvent(e),this.sendPageViewPerformanceInternal(e,t)}catch(n){this.diagLog().throwInternal(Q.CRITICAL,re.TrackPVFailed,"trackPageViewPerformance failed, page view will not be collected: "+wt.getExceptionName(n),{exception:wt.dump(n)})}},Er.prototype.startTrackPage=function(e){try{var t;"string"!=typeof e&&(e=(t=N())&&t.title||""),this._pageTracking.start(e)}catch(n){this.diagLog().throwInternal(Q.CRITICAL,re.StartTrackFailed,"startTrackPage failed, page view may not be collected: "+wt.getExceptionName(n),{exception:wt.dump(n)})}},Er.prototype.stopTrackPage=function(e,t,n,r){try{var i,a;"string"!=typeof e&&(e=(i=N())&&i.title||""),"string"!=typeof t&&(t=(a=V())&&a.href||""),this._pageTracking.stop(e,t,n,r),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(e,t)}catch(o){this.diagLog().throwInternal(Q.CRITICAL,re.StopTrackFailed,"stopTrackPage failed, page view will not be collected: "+wt.getExceptionName(o),{exception:wt.dump(o)})}},Er.prototype.sendExceptionInternal=function(e,t,n){var r=new sn(this.diagLog(),e.exception||Error(wt.NotSpecified),e.properties,e.measurements,e.severityLevel,e.id).toInterface(),i=ir.create(r,sn.dataType,sn.envelopeType,this.diagLog(),t,n);this.core.track(i)},Er.prototype.trackException=function(e,t){try{this.sendExceptionInternal(e,t)}catch(n){this.diagLog().throwInternal(Q.CRITICAL,re.TrackExceptionFailed,"trackException failed, exception will not be collected: "+wt.getExceptionName(n),{exception:wt.dump(n)})}},Er.prototype._onerror=function(e){try{var t,n={url:e&&e.url||(N()||{}).URL,lineNumber:e.lineNumber,columnNumber:e.columnNumber,message:e.message};wt.isCrossOriginError(e.message,e.url,e.lineNumber,e.columnNumber,e.error)?this._sendCORSException(n.url):(wt.isError(e.error)||(t="window.onerror@"+n.url+":"+e.lineNumber+":"+(e.columnNumber||0),e.error=Error(e.message),e.error.stack=t),this.trackException({exception:e.error,severityLevel:Zn.Error},n))}catch(i){var r=e.error?e.error.name+", "+e.error.message:"null";this.diagLog().throwInternal(Q.CRITICAL,re.ExceptionWhileLoggingError,"_onError threw exception while logging error, error will not be collected: "+wt.getExceptionName(i),{exception:wt.dump(i),errorString:r})}},Er.prototype.addTelemetryInitializer=function(e){this._telemetryInitializers.push(e)},Er.prototype.initialize=function(e,t,n,r){var o=this;if(!this.isInitialized()){if(J.isNullOrUndefined(t))throw Error("Error initializing");Cr.prototype.initialize.call(this,e,t,n,r),this.setInitialized(!1);var i=this._getTelCtx(),a=this.identifier;this._globalconfig={instrumentationKey:e.instrumentationKey,endpointUrl:e.endpointUrl||"https://dc.services.visualstudio.com/v2/track"},this.config=i.getExtCfg(a);var s=Er.getDefaultConfig();if(s!==undefined){for(var c in s)this.config[c]=i.getConfig(a,c,s[c]);if(this._globalconfig)for(var c in s)this._globalconfig[c]===undefined&&(this._globalconfig[c]=s[c])}this.config.isCookieUseDisabled&&wt.disableCookies(),this.config.isStorageUseDisabled&&wt.disableStorage();var u={instrumentationKey:function(){return e.instrumentationKey},accountId:function(){return o.config.accountId||e.accountId},sessionRenewalMs:function(){return o.config.sessionRenewalMs||e.sessionRenewalMs},sessionExpirationMs:function(){return o.config.sessionExpirationMs||e.sessionExpirationMs},sampleRate:function(){return o.config.samplingPercentage||e.samplingPercentage},cookieDomain:function(){return o.config.cookieDomain||e.cookieDomain},sdkExtension:function(){return o.config.sdkExtension||e.sdkExtension},isBrowserLinkTrackingEnabled:function(){return o.config.isBrowserLinkTrackingEnabled||e.isBrowserLinkTrackingEnabled},appId:function(){return o.config.appId||e.appId}};this._pageViewPerformanceManager=new xr(this.core),this._pageViewManager=new hr(this,this.config.overridePageViewDuration,this.core,this._pageViewPerformanceManager),this._pageVisitTimeManager=new mr(this.diagLog(),function(e,t,n){return o.trackPageVisitTime(e,t,n)}),this._telemetryInitializers=this._telemetryInitializers||[],this._addDefaultTelemetryInitializers(u),this._eventTracking=new _r(this.diagLog(),"trackEvent"),this._eventTracking.action=function(e,t,n,r){(r=r||{})[Sr]=n.toString(),o.trackEvent({name:e,properties:r})},this._pageTracking=new _r(this.diagLog(),"trackPageView"),this._pageTracking.action=function(e,t,n,r,i){J.isNullOrUndefined(r)&&(r={}),r[Sr]=n.toString();var a={name:e,uri:t,properties:r,measurements:i};o.sendPageViewInternal(a,r)};var l,d,p,f,g,h=_(),m=typeof history===x&&history?history:w("history"),v=V(),y=this;!1===this.config.disableExceptionTracking&&!this.config.autoExceptionInstrumented&&h&&(l=h.onerror,h.onerror=function(e,t,n,r,i){var a=l&&l(e,t,n,r,i);return!0!==a&&y._onerror({message:e,url:t,lineNumber:n,columnNumber:r,error:i}),a},this.config.autoExceptionInstrumented=!0),!1===this.config.disableExceptionTracking&&!0===this.config.enableUnhandledPromiseRejectionTracking&&!this.config.autoUnhandledPromiseInstrumented&&h&&(d=h.onunhandledrejection,h.onunhandledrejection=function(e){var t=d&&d.call(h,e);return!0!==t&&y._onerror({message:e.reason.toString(),error:e.reason instanceof Error?e.reason:Error(e.reason.toString()),url:v?v.href:"",lineNumber:0,columnNumber:0}),t},this.config.autoUnhandledPromiseInstrumented=!0),!0===this.config.enableAutoRouteTracking&&m&&J.isFunction(m.pushState)&&J.isFunction(m.replaceState)&&h&&"undefined"!=typeof Event&&(p=this,J.arrForEach(n,function(e){e.identifier===ur&&(o._properties=e)}),m.pushState=(g=m.pushState,function(){var e=g.apply(this,arguments);return Tr(h,wt.createDomEvent(p.config.namePrefix+"pushState")),Tr(h,wt.createDomEvent(p.config.namePrefix+"locationchange")),e}),m.replaceState=(f=m.replaceState,function(){var e=f.apply(this,arguments);return Tr(h,wt.createDomEvent(p.config.namePrefix+"replaceState")),Tr(h,wt.createDomEvent(p.config.namePrefix+"locationchange")),e}),h.addEventListener&&(h.addEventListener(p.config.namePrefix+"popstate",function(){Tr(h,wt.createDomEvent(p.config.namePrefix+"locationchange"))}),h.addEventListener(p.config.namePrefix+"locationchange",function(){p._properties&&p._properties.context&&p._properties.context.telemetryTrace&&(p._properties.context.telemetryTrace.traceID=wt.generateW3CId(),p._properties.context.telemetryTrace.name=v&&v.pathname||"_unknown_"),o._currUri&&(o._prevUri=o._currUri),o._currUri=v&&v.href||"",setTimeout((function(e){p.trackPageView({refUri:e,properties:{duration:0}})}).bind(o,o._prevUri),p.autoRoutePVDelay)}))),this.setInitialized(!0)}},Er.prototype.trackPageVisitTime=function(e,t,n){var r={PageName:e,PageUrl:t};this.trackMetric({name:"PageVisitTime",average:n,max:n,min:n,sampleCount:1},r)},Er.prototype._addDefaultTelemetryInitializers=function(e){var r;e.isBrowserLinkTrackingEnabled()||(r=["/browserLinkSignalR/","/__browserLink/"],this._addTelemetryInitializer(function(e){if(e.baseType===Un.dataType){var t=e.baseData;if(t)for(var n=0;n<r.length;n++)if(t.target&&~t.target.indexOf(r[n]))return!1}return!0}))},Er.prototype._addTelemetryInitializer=function(e){this._telemetryInitializers.push(e)},Er.prototype._sendCORSException=function(e){var t={message:"Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",url:e,lineNumber:0,columnNumber:0,error:undefined},n=ir.create(t,sn.dataType,sn.envelopeType,this.diagLog(),{url:e});this.core.track(n)},Er.Version="2.5.8",Er);function Er(){var e=Cr.call(this)||this;e.identifier=dr,e.priority=180,e.autoRoutePVDelay=500,e._trackAjaxAttempts=0;var t=V();return e._prevUri=t&&t.href||"",e}var _r=(br.prototype.start=function(e){"undefined"!=typeof this._events[e]&&this._logger.throwInternal(Q.WARNING,re.StartCalledMoreThanOnce,"start was called more than once for this event without calling stop.",{name:this._name,key:e},!0),this._events[e]=+new Date},br.prototype.stop=function(e,t,n,r){var i,a,o=this._events[e];isNaN(o)?this._logger.throwInternal(Q.WARNING,re.StopCalledWithoutStart,"stop was called without a corresponding start.",{name:this._name,key:e},!0):(i=+new Date,a=Rt.GetDuration(o,i),this.action(e,t,a,n,r)),delete this._events[e],this._events[e]=undefined},br);function br(e,t){this._name=t,this._events={},this._logger=e}var Nr=function Ea(n){var r=[];Ce(Ea,this,function(t){t.enqueue=function(e){r.push(e)},t.count=function(){return r.length},t.clear=function(){r.length=0},t.getItems=function(){return r.slice(0)},t.batchPayloads=function(e){return e&&0<e.length?n.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},t.markAsSent=function(e){t.clear()},t.clearSent=function(e){}})},Dr=(Ar.BUFFER_KEY="AI_buffer",Ar.SENT_BUFFER_KEY="AI_sentBuffer",Ar.MAX_BUFFER_SIZE=2e3,Ar);function Ar(o,s){var c,u=!1;Ce(Ar,this,function(e){var t=i(Ar.BUFFER_KEY),n=i(Ar.SENT_BUFFER_KEY);function r(t,e){var n=[];return J.arrForEach(e,function(e){J.isFunction(e)||-1!==J.arrIndexOf(t,e)||n.push(e)}),n}function i(e){var t=e;try{t=s.namePrefix&&s.namePrefix()?s.namePrefix()+"_"+t:t;var n=wt.getSessionStorage(o,t);if(n){var r=k().parse(n);if(J.isString(r)&&(r=k().parse(r)),r&&wt.isArray(r))return r}}catch(i){o.throwInternal(Q.CRITICAL,re.FailedToRestoreStorageBuffer," storage key: "+t+", "+wt.getExceptionName(i),{exception:wt.dump(i)})}return[]}function a(e,t){var n=e;try{n=s.namePrefix&&s.namePrefix()?s.namePrefix()+"_"+n:n;var r=JSON.stringify(t);wt.setSessionStorage(o,n,r)}catch(i){wt.setSessionStorage(o,n,JSON.stringify([])),o.throwInternal(Q.WARNING,re.FailedToSetStorageBuffer," storage key: "+n+", "+wt.getExceptionName(i)+". Buffer cleared",{exception:wt.dump(i)})}}(c=t.concat(n)).length>Ar.MAX_BUFFER_SIZE&&(c.length=Ar.MAX_BUFFER_SIZE),a(Ar.SENT_BUFFER_KEY,[]),a(Ar.BUFFER_KEY,c),e.enqueue=function(e){c.length>=Ar.MAX_BUFFER_SIZE?u||(o.throwInternal(Q.WARNING,re.SessionStorageBufferFull,"Maximum buffer size reached: "+c.length,!0),u=!0):(c.push(e),a(Ar.BUFFER_KEY,c))},e.count=function(){return c.length},e.clear=function(){c=[],a(Ar.BUFFER_KEY,[]),a(Ar.SENT_BUFFER_KEY,[]),u=!1},e.getItems=function(){return c.slice(0)},e.batchPayloads=function(e){return e&&0<e.length?s.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},e.markAsSent=function(e){c=r(e,c),a(Ar.BUFFER_KEY,c);var t=i(Ar.SENT_BUFFER_KEY);t instanceof Array&&e instanceof Array&&((t=t.concat(e)).length>Ar.MAX_BUFFER_SIZE&&(o.throwInternal(Q.CRITICAL,re.SessionStorageBufferFull,"Sent buffer reached its maximum size: "+t.length,!0),t.length=Ar.MAX_BUFFER_SIZE),a(Ar.SENT_BUFFER_KEY,t))},e.clearSent=function(e){var t=r(e,i(Ar.SENT_BUFFER_KEY));a(Ar.SENT_BUFFER_KEY,t)}})}var kr="baseType",Rr="baseData",Pr="properties",Lr=J.arrForEach,Mr=J.objKeys,Ur=J.isNullOrUndefined;function Fr(e,t,n){return e&&n&&(e[t]=n,e[t])}var Or=(qr.extractPropsAndMeasurements=function(n,r,i){Ur(n)||Lr(Mr(n),function(e){var t=n[e];J.isNumber(t)?i[e]=t:J.isString(t)?r[e]=t:A()&&(r[e]=k().stringify(t))})},qr.createEnvelope=function(e,t,n,r){var i=new Kt(e,r,t);Fr(i,"sampleRate",n[Mt]),(n[Rr]||{}).startTime&&(i.time=J.toISOString(n[Rr].startTime)),i.iKey=n.iKey;var a=n.iKey.replace(/-/g,"");return i.name=i.name.replace("{0}",a),qr.extractPartAExtensions(n,i),n.tags=n.tags||[],i},qr.extractPartAExtensions=function(e,t){var n=t.tags=t.tags||{},r=e.ext=e.ext||{},i=e.tags=e.tags||[],a=r.user;a&&(Fr(n,cr.userAuthUserId,a.authId),Fr(n,cr.userId,a.id||a.localId));var o=r.app;o&&Fr(n,cr.sessionId,o.sesId);var s=r.device;s&&(Fr(n,cr.deviceId,s.id||s.localId),Fr(n,cr.deviceType,s.deviceClass),Fr(n,cr.deviceIp,s.ip),Fr(n,cr.deviceModel,s.model),Fr(n,cr.deviceType,s.deviceType));var c,u,l,d=e.ext.web;d&&(Fr(n,cr.deviceLanguage,d.browserLang),Fr(n,cr.deviceBrowserVersion,d.browserVer),Fr(n,cr.deviceBrowser,d.browser),Fr(l=(u=(c=t.data=t.data||{})[Rr]=c[Rr]||{})[Pr]=u[Pr]||{},"domain",d.domain),Fr(l,"isManual",d.isManual?"true":null),Fr(l,"screenRes",d.screenRes),Fr(l,"userConsent",d.userConsent?"true":null));var p=r.os;p&&Fr(n,cr.deviceOS,p.name);var f=r.trace;f&&(Fr(n,cr.operationParentId,f.parentID),Fr(n,cr.operationName,f.name),Fr(n,cr.operationId,f.traceID));for(var g={},h=i.length-1;0<=h;h--)!function(e){var t=i[e];Lr(Mr(t),function(e){g[e]=t[e]}),i.splice(e,1)}(h);Lr(Mr(i),function(e){g[e]=i[e]}),t.tags=__assign({},n,g),t.tags[cr.internalSdkVersion]||(t.tags[cr.internalSdkVersion]="javascript:"+qr.Version)},qr.prototype.Init=function(e,t){this._logger=e,Ur(t[Rr])&&this._logger.throwInternal(Q.CRITICAL,re.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.")},qr.Version="2.5.8",qr);function qr(){}var Vr,zr=(Vr=Or,__extends(Br,Vr),Br.prototype.Create=function(e,t){Vr.prototype.Init.call(this,e,t);var n=t[Rr].measurements||{},r=t[Rr][Pr]||{};Or.extractPropsAndMeasurements(t.data,r,n);var i=t[Rr];if(Ur(i))return e.warnToConsole("Invalid input for dependency data"),null;var a=i[Pr]&&i[Pr][Ft]?i[Pr][Ft]:"GET",o=new Un(e,i.id,i.target,i.name,i.duration,i.success,i.responseCode,a,i.type,i.correlationContext,r,n),s=new $n(Un.dataType,o);return Or.createEnvelope(e,Un.envelopeType,t,s)},Br.DependencyEnvelopeCreator=new Br,Br);function Br(){return null!==Vr&&Vr.apply(this,arguments)||this}var Hr,jr=(Hr=Or,__extends(Gr,Hr),Gr.prototype.Create=function(e,t){Hr.prototype.Init.call(this,e,t);var n={},r={};t[kr]!==$t.dataType&&(n.baseTypeSource=t[kr]),t[kr]===$t.dataType?(n=t[Rr][Pr]||{},r=t[Rr].measurements||{}):t[Rr]&&Or.extractPropsAndMeasurements(t[Rr],n,r),Or.extractPropsAndMeasurements(t.data,n,r);var i=t[Rr].name,a=new $t(e,i,n,r),o=new $n($t.dataType,a);return Or.createEnvelope(e,$t.envelopeType,t,o)},Gr.EventEnvelopeCreator=new Gr,Gr);function Gr(){return null!==Hr&&Hr.apply(this,arguments)||this}var Kr,Wr=(Kr=Or,__extends(Xr,Kr),Xr.prototype.Create=function(e,t){Kr.prototype.Init.call(this,e,t);var n=t[Rr].measurements||{},r=t[Rr][Pr]||{};Or.extractPropsAndMeasurements(t.data,r,n);var i=t[Rr],a=sn.CreateFromInterface(e,i,r,n),o=new $n(sn.dataType,a);return Or.createEnvelope(e,sn.envelopeType,t,o)},Xr.ExceptionEnvelopeCreator=new Xr,Xr);function Xr(){return null!==Kr&&Kr.apply(this,arguments)||this}var Yr,Jr=(Yr=Or,__extends(Zr,Yr),Zr.prototype.Create=function(e,t){Yr.prototype.Init.call(this,e,t);var n=t[Rr],r=n[Pr]||{},i=n.measurements||{};Or.extractPropsAndMeasurements(t.data,r,i);var a=new wn(e,n.name,n.average,n.sampleCount,n.min,n.max,r,i),o=new $n(wn.dataType,a);return Or.createEnvelope(e,wn.envelopeType,t,o)},Zr.MetricEnvelopeCreator=new Zr,Zr);function Zr(){return null!==Yr&&Yr.apply(this,arguments)||this}var Qr,$r=(Qr=Or,__extends(ei,Qr),ei.prototype.Create=function(e,t){Qr.prototype.Init.call(this,e,t);var n,r="duration",i=t[Rr];Ur(i)||Ur(i[Pr])||Ur(i[Pr][r])?Ur(t.data)||Ur(t.data[r])||(n=t.data[r],delete t.data[r]):(n=i[Pr][r],delete i[Pr][r]);var a,o=t[Rr];((t.ext||{}).trace||{}).traceID&&(a=t.ext.trace.traceID);var s,c=o.id||a,u=o.name,l=o.uri,d=o[Pr]||{},p=o.measurements||{};Ur(o.refUri)||(d.refUri=o.refUri),Ur(o.pageType)||(d.pageType=o.pageType),Ur(o.isLoggedIn)||(d.isLoggedIn=o.isLoggedIn.toString()),Ur(o[Pr])||(s=o[Pr],Lr(Mr(s),function(e){d[e]=s[e]})),Or.extractPropsAndMeasurements(t.data,d,p);var f=new An(e,u,l,n,d,p,c),g=new $n(An.dataType,f);return Or.createEnvelope(e,An.envelopeType,t,g)},ei.PageViewEnvelopeCreator=new ei,ei);function ei(){return null!==Qr&&Qr.apply(this,arguments)||this}var ti,ni=(ti=Or,__extends(ri,ti),ri.prototype.Create=function(e,t){ti.prototype.Init.call(this,e,t);var n=t[Rr],r=n.name,i=n.uri||n.url,a=n[Pr]||{},o=n.measurements||{};Or.extractPropsAndMeasurements(t.data,a,o);var s=new Xn(e,r,i,undefined,a,o,n),c=new $n(Xn.dataType,s);return Or.createEnvelope(e,Xn.envelopeType,t,c)},ri.PageViewPerformanceEnvelopeCreator=new ri,ri);function ri(){return null!==ti&&ti.apply(this,arguments)||this}var ii,ai=(ii=Or,__extends(oi,ii),oi.prototype.Create=function(e,t){ii.prototype.Init.call(this,e,t);var n=t[Rr].message,r=t[Rr].severityLevel,i=t[Rr][Pr]||{},a=t[Rr].measurements||{};Or.extractPropsAndMeasurements(t.data,i,a);var o=new Bn(e,n,r,i,a),s=new $n(Bn.dataType,o);return Or.createEnvelope(e,Bn.envelopeType,t,s)},oi.TraceEnvelopeCreator=new oi,oi);function oi(){return null!==ii&&ii.apply(this,arguments)||this}var si=function _a(m){Ce(_a,this,function(e){function f(e,t){var n="__aiCircularRefCheck",r={};if(!e)return m.throwInternal(Q.CRITICAL,re.CannotSerializeObject,"cannot serialize object because it is null or undefined",{name:t},!0),r;if(e[n])return m.throwInternal(Q.WARNING,re.CircularReferenceDetected,"Circular reference detected while serializing object",{name:t},!0),r;if(!e.aiDataContract){if("measurements"===t)r=h(e,"number",t);else if("properties"===t)r=h(e,"string",t);else if("tags"===t)r=h(e,"string",t);else if(wt.isArray(e))r=g(e,t);else{m.throwInternal(Q.WARNING,re.CannotSerializeObjectNonSerializable,"Attempting to serialize an object which does not implement ISerializable",{name:t},!0);try{k().stringify(e),r=e}catch(p){m.throwInternal(Q.CRITICAL,re.CannotSerializeObject,p&&J.isFunction(p.toString)?p.toString():"Error serializing object",null,!0)}}return r}for(var i in e[n]=!0,e.aiDataContract){var a,o=e.aiDataContract[i],s=J.isFunction(o)?o()&v.Required:o&v.Required,c=J.isFunction(o)?o()&v.Hidden:o&v.Hidden,u=o&v.Array,l=e[i]!==undefined,d=J.isObject(e[i])&&null!==e[i];!s||l||u?c||(a=d?(u?g:f)(e[i],i):e[i])!==undefined&&(r[i]=a):m.throwInternal(Q.CRITICAL,re.MissingRequiredFieldSpecification,"Missing required field specification. The field is required but not present on source",{field:i,name:t})}return delete e[n],r}function g(e,t){var n;if(e)if(wt.isArray(e)){n=[];for(var r=0;r<e.length;r++){var i=f(e[r],t+"["+r+"]");n.push(i)}}else m.throwInternal(Q.CRITICAL,re.ItemNotInArray,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:t},!0);return n}function h(e,t,n){var r;if(e)for(var i in r={},e){var a,o=e[i];"string"===t?o===undefined?r[i]="undefined":null===o?r[i]="null":o.toString?r[i]=o.toString():r[i]="invalid field: toString() is not defined.":"number"===t?o===undefined?r[i]="undefined":null===o?r[i]="null":(a=parseFloat(o),r[i]=isNaN(a)?"NaN":a):(r[i]="invalid field: "+n+" is of unknown type.",m.throwInternal(Q.CRITICAL,r[i],null,!0))}return r}e.serialize=function(e){var t=f(e,"root");try{return k().stringify(t)}catch(n){m.throwInternal(Q.CRITICAL,re.CannotSerializeObject,n&&J.isFunction(n.toString)?n.toString():"Error serializing object",null,!0)}}})};function ci(){var a=_(),o=N(),s=!1,c=!0;Ce(ci,this,function(e){try{var t;a&&te.Attach(a,"online",n)&&(te.Attach(a,"offline",r),s=!0),o&&(t=o.body||o,J.isUndefined(t.ononline)||(t.ononline=n,t.onoffline=r,s=!0))}catch(i){s=!1}function n(){c=!0}function r(){c=!1}e.isListening=s,e.isOnline=function(){var e=!0,t=D();return s?e=c:t&&!J.isNullOrUndefined(t.onLine)&&(e=t.onLine),e},e.isOffline=function(){return!e.isOnline()}})}var ui=ci.Offline=new ci,li=(di.prototype.getHashCodeScore=function(e){return this.getHashCode(e)/di.INT_MAX_VALUE*100},di.prototype.getHashCode=function(e){if(""===e)return 0;for(;e.length<di.MIN_INPUT_LENGTH;)e=e.concat(e);for(var t=5381,n=0;n<e.length;++n)t=(t<<5)+t+e.charCodeAt(n),t&=t;return Math.abs(t)},di.INT_MAX_VALUE=2147483647,di.MIN_INPUT_LENGTH=8,di);function di(){}var pi=(fi.prototype.getSamplingScore=function(e){return e.tags&&e.tags[this.keys.userId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.userId]):e.ext&&e.ext.user&&e.ext.user.id?this.hashCodeGeneragor.getHashCodeScore(e.ext.user.id):e.tags&&e.tags[this.keys.operationId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.operationId]):e.ext&&e.ext.telemetryTrace&&e.ext.telemetryTrace.traceID?this.hashCodeGeneragor.getHashCodeScore(e.ext.telemetryTrace.traceID):100*Math.random()},fi);function fi(){this.hashCodeGeneragor=new li,this.keys=new rr}var gi=(hi.prototype.isSampledIn=function(e){var t=this.sampleRate;return null===t||t===undefined||100<=t||e.baseType===wn.dataType||this.samplingScoreGenerator.getSamplingScore(e)<t},hi);function hi(e,t){this.INT_MAX_VALUE=2147483647,this._logger=J.isNullOrUndefined(t)?new be:t,(100<e||e<0)&&(this._logger.throwInternal(Q.WARNING,re.SampleRateOutOfRange,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),this.sampleRate=100),this.sampleRate=e,this.samplingScoreGenerator=new pi}function mi(e){try{return e.responseText}catch(t){}return null}var vi,yi=(vi=ze,__extends(xi,vi),xi.constructEnvelope=function(e,t,n){var r=t===e.iKey||J.isNullOrUndefined(t)?e:__assign({},e,{iKey:t});switch(r.baseType){case $t.dataType:return jr.EventEnvelopeCreator.Create(n,r);case Bn.dataType:return ai.TraceEnvelopeCreator.Create(n,r);case An.dataType:return $r.PageViewEnvelopeCreator.Create(n,r);case Xn.dataType:return ni.PageViewPerformanceEnvelopeCreator.Create(n,r);case sn.dataType:return Wr.ExceptionEnvelopeCreator.Create(n,r);case wn.dataType:return Jr.MetricEnvelopeCreator.Create(n,r);case Un.dataType:return zr.DependencyEnvelopeCreator.Create(n,r);default:return jr.EventEnvelopeCreator.Create(n,r)}},xi._getDefaultAppInsightsChannelConfig=function(){return{endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){return undefined},namePrefix:function(){return undefined},samplingPercentage:function(){return 100}}},xi._getEmptyAppInsightsChannelConfig=function(){return{endpointUrl:undefined,emitLineDelimitedJson:undefined,maxBatchInterval:undefined,maxBatchSizeInBytes:undefined,disableTelemetry:undefined,enableSessionStorageBuffer:undefined,isRetryDisabled:undefined,isBeaconApiDisabled:undefined,onunloadDisableBeacon:undefined,instrumentationKey:undefined,namePrefix:undefined,samplingPercentage:undefined}},xi);function xi(){var v,y,o,x,I=vi.call(this)||this;return I.priority=1001,I.identifier=lr,I._XMLHttpRequestSupported=!1,Ce(xi,I,function(l,d){function e(){throw Error("Method not implemented.")}function p(e,t){var n=l._senderConfig.endpointUrl(),r=l._buffer.batchPayloads(e),i=new Blob([r],{type:"text/plain;charset=UTF-8"});D().sendBeacon(n,i)?(l._buffer.markAsSent(e),l._onSuccess(e,e.length)):(f(e,!0),l.diagLog().throwInternal(Q.WARNING,re.TransmissionFailed,". Failed to send telemetry with Beacon API, retried with xhrSender."))}function f(t,e){var n=new XMLHttpRequest,r=l._senderConfig.endpointUrl();try{n[Lt]=!0}catch(a){}n.open("POST",r,e),n.setRequestHeader("Content-type","application/json"),wt.isInternalApplicationInsightsEndpoint(r)&&n.setRequestHeader(vt.sdkContextHeader,vt.sdkContextHeaderAppIdRequest),n.onreadystatechange=function(){return l._xhrReadyStateChange(n,t,t.length)},n.onerror=function(e){return l._onError(t,h(n),e)};var i=l._buffer.batchPayloads(t);n.send(i),l._buffer.markAsSent(t)}function i(e){try{if(e&&""!==e){var t=k().parse(e);if(t&&t.itemsReceived&&t.itemsReceived>=t.itemsAccepted&&t.itemsReceived-t.itemsAccepted===t.errors.length)return t}}catch(n){l.diagLog().throwInternal(Q.CRITICAL,re.InvalidBackendResponse,"Cannot parse the response. "+wt.getExceptionName(n),{response:e})}return null}function c(e,t){if(void 0===t&&(t=1),e&&0!==e.length){l._buffer.clearSent(e),v++;for(var n=0,r=e;n<r.length;n++){var i=r[n];l._buffer.enqueue(i)}a=t,c=v<=1?10:(o=(Math.pow(2,v)-1)/2,s=1+Math.floor(Math.random()*o*10),Math.max(Math.min(s*=a,3600),10)),u=J.dateNow()+1e3*c,y=u,g()}var a,o,s,c,u}function g(){var e,t;o||(e=y?Math.max(0,y-J.dateNow()):0,t=Math.max(l._senderConfig.maxBatchInterval(),e),o=setTimeout(function(){l.triggerSend(!0,null,1)},t))}function u(e){return 408===e||429===e||500===e||503===e}function h(e,t){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+mi(e)||e.response||"":t}function m(t,e){var n=_(),r=new XDomainRequest;r.onload=function(){return l._xdrOnLoad(r,t)},r.onerror=function(e){return l._onError(t,s(r),e)};var i=n&&n.location&&n.location.protocol||"";if(l._senderConfig.endpointUrl().lastIndexOf(i,0))return l.diagLog().throwInternal(Q.WARNING,re.TransmissionFailed,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void l._buffer.clear();var a=l._senderConfig.endpointUrl().replace(/^(https?:)/,"");r.open("POST",a);var o=l._buffer.batchPayloads(t);r.send(o),l._buffer.markAsSent(t)}function s(e,t){return e?"XDomainRequest,Response:"+mi(e)||"":t}l.pause=e,l.resume=e,l.flush=function(){try{l.triggerSend(!0,null,1)}catch(e){l.diagLog().throwInternal(Q.CRITICAL,re.FlushFailed,"flush failed, telemetry will not be collected: "+wt.getExceptionName(e),{exception:wt.dump(e)})}},l.onunloadFlush=function(){if(!1!==l._senderConfig.onunloadDisableBeacon()&&!1!==l._senderConfig.isBeaconApiDisabled()||!wt.IsBeaconApiSupported())l.flush();else try{l.triggerSend(!0,p,2)}catch(e){l.diagLog().throwInternal(Q.CRITICAL,re.FailedToSendQueuedTelemetry,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+wt.getExceptionName(e),{exception:wt.dump(e)})}},l.teardown=e,l.initialize=function(e,t,n,r){d.initialize(e,t,n,r);var i=l._getTelCtx(),a=l.identifier;x=new si(t.logger),v=0,y=null,l._sender=null;var o,s,c=xi._getDefaultAppInsightsChannelConfig();for(var u in l._senderConfig=xi._getEmptyAppInsightsChannelConfig(),c)!function(e){l._senderConfig[e]=function(){return i.getConfig(a,e,c[e]())}}(u);l._buffer=l._senderConfig.enableSessionStorageBuffer&&wt.canUseSessionStorage()?new Dr(l.diagLog(),l._senderConfig):new Nr(l._senderConfig),l._sample=new gi(l._senderConfig.samplingPercentage(),l.diagLog()),s=e,!J.isNullOrUndefined(s.disableInstrumentaionKeyValidation)&&s.disableInstrumentaionKeyValidation||/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/.test(s.instrumentationKey)||l.diagLog().throwInternal(Q.CRITICAL,re.InvalidInstrumentationKey,"Invalid Instrumentation key "+e.instrumentationKey),!l._senderConfig.isBeaconApiDisabled()&&wt.IsBeaconApiSupported()?l._sender=p:typeof XMLHttpRequest===undefined||(o=w("XMLHttpRequest"))&&("withCredentials"in new o?(l._sender=f,l._XMLHttpRequestSupported=!0):typeof XDomainRequest!==undefined&&(l._sender=m))},l.processTelemetry=function(e,n){n=l._getTelCtx(n);try{if(l._senderConfig.disableTelemetry())return;if(!e)return void n.diagLog().throwInternal(Q.CRITICAL,re.CannotSendEmptyTelemetry,"Cannot send empty telemetry");if(e.baseData&&!e.baseType)return void n.diagLog().throwInternal(Q.CRITICAL,re.InvalidEvent,"Cannot send telemetry without baseData and baseType");if(e.baseType||(e.baseType="EventData"),!l._sender)return void n.diagLog().throwInternal(Q.CRITICAL,re.SenderNotInitialized,"Sender was not initialized");if(!l._sample.isSampledIn(e))return void n.diagLog().throwInternal(Q.WARNING,re.TelemetrySampledAndNotSent,"Telemetry item was sampled out and not sent",{SampleRate:l._sample.sampleRate});e[Mt]=l._sample.sampleRate;var r=xi.constructEnvelope(e,l._senderConfig.instrumentationKey(),n.diagLog());if(!r)return void n.diagLog().throwInternal(Q.CRITICAL,re.CreateEnvelopeError,"Unable to create an AppInsights envelope");var i=!1;if(e.tags&&e.tags[Ut]&&(J.arrForEach(e.tags[Ut],function(e){try{e&&!1===e(r)&&(i=!0,n.diagLog().warnToConsole("Telemetry processor check returns false"))}catch(t){n.diagLog().throwInternal(Q.CRITICAL,re.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+wt.getExceptionName(t),{exception:wt.dump(t)},!0)}}),delete e.tags[Ut]),i)return;var t=x.serialize(r),a=l._buffer.getItems(),o=l._buffer.batchPayloads(a);o&&o.length+t.length>l._senderConfig.maxBatchSizeInBytes()&&l.triggerSend(!0,null,10),l._buffer.enqueue(t),g()}catch(s){n.diagLog().throwInternal(Q.WARNING,re.FailedAddingTelemetryToBuffer,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+wt.getExceptionName(s),{exception:wt.dump(s)})}l.processNext(e,n)},l._xhrReadyStateChange=function(e,t,n){var r;4===e.readyState&&(r=null,l._appId||(r=i(mi(e)||e.response))&&r.appId&&(l._appId=r.appId),(e.status<200||300<=e.status)&&0!==e.status?!l._senderConfig.isRetryDisabled()&&u(e.status)?(c(t),l.diagLog().throwInternal(Q.WARNING,re.TransmissionFailed,". Response code "+e.status+". Will retry to send "+t.length+" items.")):l._onError(t,h(e)):ui.isOffline()?l._senderConfig.isRetryDisabled()||(c(t,10),l.diagLog().throwInternal(Q.WARNING,re.TransmissionFailed,". Offline - Response Code: "+e.status+". Offline status: "+ui.isOffline()+". Will retry to send "+t.length+" items.")):206===e.status?(r=r||i(mi(e)||e.response))&&!l._senderConfig.isRetryDisabled()?l._onPartialSuccess(t,r):l._onError(t,h(e)):(v=0,l._onSuccess(t,n)))},l.triggerSend=function(e,t,n){void 0===e&&(e=!0);try{var r;l._senderConfig.disableTelemetry()?l._buffer.clear():0<l._buffer.count()&&(r=l._buffer.getItems(),function(e,t){var n,r=(n="getNotifyMgr",l.core[n]?l.core[n]():l.core._notificationManager);if(r&&r.eventsSendRequest)try{r.eventsSendRequest(e,t)}catch(i){l.diagLog().throwInternal(Q.CRITICAL,re.NotificationException,"send request notification failed: "+wt.getExceptionName(i),{exception:wt.dump(i)})}}(n||0,e),t?t.call(I,r,e):l._sender(r,e)),clearTimeout(o),y=o=null}catch(a){var i=wt.getIEVersion();(!i||9<i)&&l.diagLog().throwInternal(Q.CRITICAL,re.TransmissionFailed,"Telemetry transmission failed, some telemetry will be lost: "+wt.getExceptionName(a),{exception:wt.dump(a)})}},l._onError=function(e,t,n){l.diagLog().throwInternal(Q.WARNING,re.OnError,"Failed to send telemetry.",{message:t}),l._buffer.clearSent(e)},l._onPartialSuccess=function(e,t){for(var n=[],r=[],i=0,a=t.errors.reverse();i<a.length;i++){var o=a[i],s=e.splice(o.index,1)[0];u(o.statusCode)?r.push(s):n.push(s)}0<e.length&&l._onSuccess(e,t.itemsAccepted),0<n.length&&l._onError(n,h(null,["partial success",t.itemsAccepted,"of",t.itemsReceived].join(" "))),0<r.length&&(c(r),l.diagLog().throwInternal(Q.WARNING,re.TransmissionFailed,"Partial success. Delivered: "+e.length+", Failed: "+n.length+". Will retry to send "+r.length+" our of "+t.itemsReceived+" items"))},l._onSuccess=function(e,t){l._buffer.clearSent(e)},l._xdrOnLoad=function(e,t){var n,r=mi(e);!e||r+""!="200"&&""!==r?(n=i(r))&&n.itemsReceived&&n.itemsReceived>n.itemsAccepted&&!l._senderConfig.isRetryDisabled()?l._onPartialSuccess(t,n):l._onError(t,s(e)):(v=0,l._onSuccess(t,0))}}),I}var Ii=function(){},Si=(Ti.prototype.update=function(){this.automaticSession.id||this.initializeAutomaticSession();var e=Rt.Now(),t=0!==this.config.sessionExpirationMs()&&e-this.automaticSession.acquisitionDate>this.config.sessionExpirationMs(),n=0!==this.config.sessionExpirationMs()&&e-this.automaticSession.renewalDate>this.config.sessionRenewalMs();t||n?this.renew():(!this.cookieUpdatedTimestamp||e-this.cookieUpdatedTimestamp>Ti.cookieUpdateInterval)&&(this.automaticSession.renewalDate=e,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate))},Ti.prototype.backup=function(){this.setStorage(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate)},Ti.prototype.initializeAutomaticSession=function(){var e,t=wt.getCookie(this._logger,this._storageNamePrefix());t&&"function"==typeof t.split?this.initializeAutomaticSessionWithData(t):(e=wt.getStorage(this._logger,this._storageNamePrefix()))&&this.initializeAutomaticSessionWithData(e),this.automaticSession.id||this.renew()},Ti.prototype.initializeAutomaticSessionWithData=function(e){var t,n,r=e.split("|");0<r.length&&(this.automaticSession.id=r[0]);try{1<r.length&&(t=+r[1],this.automaticSession.acquisitionDate=+new Date(t),this.automaticSession.acquisitionDate=0<this.automaticSession.acquisitionDate?this.automaticSession.acquisitionDate:0),2<r.length&&(n=+r[2],this.automaticSession.renewalDate=+new Date(n),this.automaticSession.renewalDate=0<this.automaticSession.renewalDate?this.automaticSession.renewalDate:0)}catch(i){this._logger.throwInternal(Q.CRITICAL,re.ErrorParsingAISessionCookie,"Error parsing ai_session cookie, session will be reset: "+wt.getExceptionName(i),{exception:wt.dump(i)})}0===this.automaticSession.renewalDate&&this._logger.throwInternal(Q.WARNING,re.SessionRenewalDateIsZero,"AI session renewal date is 0, session will be reset.")},Ti.prototype.renew=function(){var e=Rt.Now();this.automaticSession.id=wt.newId(),this.automaticSession.acquisitionDate=e,this.automaticSession.renewalDate=e,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate),wt.canUseLocalStorage()||this._logger.throwInternal(Q.WARNING,re.BrowserDoesNotSupportLocalStorage,"Browser does not support local storage. Session durations will be inaccurate.")},Ti.prototype.setCookie=function(e,t,n){var r=t+this.config.sessionExpirationMs(),i=n+this.config.sessionRenewalMs(),a=new Date,o=[e,t,n];r<i?a.setTime(r):a.setTime(i);var s=this.config.cookieDomain?this.config.cookieDomain():null,c=0===this.config.sessionExpirationMs()?"0":a.toUTCString();wt.setCookie(this._logger,this._storageNamePrefix(),o.join("|")+";expires="+c,s),this.cookieUpdatedTimestamp=Rt.Now()},Ti.prototype.setStorage=function(e,t,n){wt.setStorage(this._logger,this._storageNamePrefix(),[e,t,n].join("|"))},Ti.acquisitionSpan=864e5,Ti.renewalSpan=18e5,Ti.cookieUpdateInterval=6e4,Ti.cookieNameConst="ai_session",Ti);function Ti(e,t){var n=this;J.isNullOrUndefined(t)?this._logger=new be:this._logger=t,"function"!=typeof(e=e||{}).sessionExpirationMs&&(e.sessionExpirationMs=function(){return Ti.acquisitionSpan}),"function"!=typeof e.sessionRenewalMs&&(e.sessionRenewalMs=function(){return Ti.renewalSpan}),this.config=e,this._storageNamePrefix=function(){return n.config.namePrefix&&n.config.namePrefix()?Ti.cookieNameConst+n.config.namePrefix():Ti.cookieNameConst},this.automaticSession=new Ii}var Ci=function(){},wi=function(){this.id="browser",this.deviceClass="Browser"},Ei=function(e){this.sdkVersion=(e.sdkExtension&&e.sdkExtension()?e.sdkExtension()+"_":"")+"javascript:2.5.8"},_i=(bi.prototype.setAuthenticatedUserContext=function(e,t,n){var r;void 0===n&&(n=!1),!this.validateUserInput(e)||t&&!this.validateUserInput(t)?this._logger.throwInternal(Q.WARNING,re.SetAuthContextFailedAccountName,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0):(this.authenticatedId=e,r=this.authenticatedId,t&&(this.accountId=t,r=[this.authenticatedId,this.accountId].join(bi.cookieSeparator)),n&&wt.setCookie(this._logger,bi.authUserCookieName,encodeURI(r),this.config.cookieDomain()))},bi.prototype.clearAuthenticatedUserContext=function(){this.authenticatedId=null,this.accountId=null,wt.deleteCookie(this._logger,bi.authUserCookieName)},bi.prototype.validateUserInput=function(e){return!("string"!=typeof e||!e||e.match(/,|;|=| |\|/))},bi.cookieSeparator="|",bi.userCookieName="ai_user",bi.authUserCookieName="ai_authUser",bi);function bi(e,t){this.isNewUser=!1,this._logger=t;var n,r,i,a,o,s,c=wt.getCookie(this._logger,bi.userCookieName);c&&(this.isNewUser=!1,0<(n=c.split(bi.cookieSeparator)).length&&(this.id=n[0])),this.config=e,this.id||(this.id=wt.newId(),r=new Date,i=J.toISOString(r),this.accountAcquisitionDate=i,this.isNewUser=!0,r.setTime(31536e6+r.getTime()),a=[this.id,i],o=this.config.cookieDomain?this.config.cookieDomain():undefined,wt.setCookie(this._logger,bi.userCookieName,a.join(bi.cookieSeparator)+";expires="+r.toUTCString(),o),s=e.namePrefix&&e.namePrefix()?e.namePrefix()+"ai_session":"ai_session",wt.removeStorage(this._logger,s)),this.accountId=e.accountId?e.accountId():undefined;var u,l=wt.getCookie(this._logger,bi.authUserCookieName);l&&((u=(l=decodeURI(l)).split(bi.cookieSeparator))[0]&&(this.authenticatedId=u[0]),1<u.length&&u[1]&&(this.accountId=u[1]))}var Ni=function(){},Di=function(e,t,n,r){this.traceID=e||wt.generateW3CId(),this.parentID=t,this.name=n;var i=V();!n&&i&&i.pathname&&(this.name=i.pathname),this.name=xt.sanitizeString(r,this.name)},Ai=(ki.prototype.applySessionContext=function(e,t){var n=this.session,r=this.sessionManager,i=n||r&&r.automaticSession;i&&J.isString(i.id)&&(e.ext.app.sesId=i.id),n&&(J.isString(n.id)?e.ext.app.sesId=n.id:e.ext.app.sesId=r.automaticSession.id)},ki.prototype.applyOperatingSystemContxt=function(e,t){var n=this.os;n&&n.name&&(e.ext.os=n)},ki.prototype.applyApplicationContext=function(e,t){var n=this.application;n&&(J.isString(n.ver)&&(e.tags[cr.applicationVersion]=n.ver),J.isString(n.build)&&(e.tags[cr.applicationBuild]=n.build))},ki.prototype.applyDeviceContext=function(e,t){var n=this.device;n&&(J.isString(n.id)&&(e.ext.device.localId=n.id),J.isString(n.ip)&&(e.ext.device.ip=n.ip),J.isString(n.model)&&(e.ext.device.model=n.model),J.isString(n.deviceClass)&&(e.ext.device.deviceClass=n.deviceClass))},ki.prototype.applyInternalContext=function(e,t){var n=this.internal;n&&(J.isString(n.agentVersion)&&(e.tags[cr.internalAgentVersion]=n.agentVersion),J.isString(n.sdkVersion)&&(e.tags[cr.internalSdkVersion]=n.sdkVersion),e.baseType!==Ee.dataType&&e.baseType!==An.dataType||(J.isString(n.snippetVer)&&(e.tags[cr.internalSnippet]=n.snippetVer),J.isString(n.sdkSrc)&&(e.tags[cr.internalSdkSrc]=n.sdkSrc)))},ki.prototype.applyLocationContext=function(e,t){var n=this.location;n&&J.isString(n.ip)&&(e.tags[cr.locationIp]=n.ip)},ki.prototype.applyOperationContext=function(e,t){var n,r=this.telemetryTrace;r&&(n=e.ext.trace||{traceID:undefined,parentID:undefined},J.isString(r.traceID)&&(n.traceID=r.traceID),J.isString(r.name)&&(n.name=r.name),J.isString(r.parentID)&&(n.parentID=r.parentID),e.ext.trace=n)},ki.prototype.applyWebContext=function(e,t){var n=this.web;n&&(e.ext.web=e.ext.web||{},e.ext.web=n)},ki.prototype.applyUserContext=function(e,t){var n=this.user;n&&(e.tags||(e.tags=[]),J.isString(n.accountId)&&(e.tags[cr.userAccountId]=n.accountId),J.isString(n.id)&&(e.ext.user.id=n.id),J.isString(n.authenticatedId)&&(e.ext.user.authId=n.authenticatedId))},ki.prototype.cleanUp=function(e,t){e.ext[or.DeviceExt]&&0===J.objKeys(e.ext[or.DeviceExt]).length&&delete e.ext[or.DeviceExt],e.ext[or.UserExt]&&0===J.objKeys(e.ext[or.UserExt]).length&&delete e.ext[or.UserExt],e.ext[or.WebExt]&&0===J.objKeys(e.ext[or.WebExt]).length&&delete e.ext[or.WebExt],e.ext[or.OSExt]&&0===J.objKeys(e.ext[or.OSExt]).length&&delete e.ext[or.OSExt],e.ext[or.AppExt]&&0===J.objKeys(e.ext[or.AppExt]).length&&delete e.ext[or.AppExt],e.ext[or.TraceExt]&&0===J.objKeys(e.ext[or.TraceExt]).length&&delete e.ext[or.TraceExt]},ki);function ki(e,t){var n=this;n.application=new Ci,n.internal=new Ei(t),E()&&(n.sessionManager=new Si(t,e),n.device=new wi,n.location=new Ni,n.user=new _i(t,e),n.telemetryTrace=new Di(undefined,undefined,undefined,e),n.session=new Ii),n.appId=function(){return null}}var Ri,Pi=(Ri=ze,__extends(Li,Ri),Li.getDefaultConfig=function(){return{instrumentationKey:function(){return undefined},accountId:function(){return null},sessionRenewalMs:function(){return 18e5},samplingPercentage:function(){return 100},sessionExpirationMs:function(){return 864e5},cookieDomain:function(){return null},sdkExtension:function(){return null},isBrowserLinkTrackingEnabled:function(){return!1},appId:function(){return null},namePrefix:function(){return undefined}}},Li.prototype.initialize=function(e,t,n,r){var i=this;Ri.prototype.initialize.call(this,e,t,n,r);var a=this._getTelCtx(),o=this.identifier,s=Li.getDefaultConfig();this._extensionConfig=this._extensionConfig||Li.getDefaultConfig();var c=this;for(var u in s)!function(e){c._extensionConfig[e]=function(){return a.getConfig(o,e,s[e]())}}(u);this.context=new Ai(t.logger,this._extensionConfig),this._breezeChannel=wt.getExtension(n,lr),this.context.appId=function(){return i._breezeChannel?i._breezeChannel._appId:null}},Li.prototype.processTelemetry=function(e,t){var n;J.isNullOrUndefined(e)||(t=this._getTelCtx(t),e.name===An.envelopeType&&t.diagLog().resetInternalMessageCount(),this.context.session&&"string"!=typeof this.context.session.id&&this.context.sessionManager.update(),this._processTelemetryInternal(e,t),this.context&&this.context.user&&this.context.user.isNewUser&&(this.context.user.isNewUser=!1,n=new Ee(re.SendBrowserInfoOnUserInit,(D()||{}).userAgent||""),t.diagLog().logInternalMessage(Q.CRITICAL,n)),this.processNext(e,t))},Li.prototype._processTelemetryInternal=function(e,t){e.tags||(e.tags=[]),e.ext||(e.ext={});var n=e.ext;n[or.DeviceExt]=n[or.DeviceExt]||{},n[or.WebExt]=n[or.WebExt]||{},n[or.UserExt]=n[or.UserExt]||{},n[or.OSExt]=n[or.OSExt]||{},n[or.AppExt]=n[or.AppExt]||{},n[or.TraceExt]=n[or.TraceExt]||{};var r=this.context;r.applySessionContext(e,t),r.applyApplicationContext(e,t),r.applyDeviceContext(e,t),r.applyOperationContext(e,t),r.applyUserContext(e,t),r.applyOperatingSystemContxt(e,t),r.applyWebContext(e,t),r.applyLocationContext(e,t),r.applyInternalContext(e,t),r.cleanUp(e,t)},Li);function Li(){var e=null!==Ri&&Ri.apply(this,arguments)||this;return e.priority=110,e.identifier=ur,e}var Mi="properties",Ui=J.objKeys,Fi=J.arrForEach;function Oi(e,t,n){var r=0,i=e[t],a=e[n];return i&&a&&(r=Rt.GetDuration(i,a)),r}function qi(e,t,n,r,i){var a=0,o=Oi(n,r,i);return o&&(a=Vi(e,t,wt.msToTimeSpan(o))),a}function Vi(e,t,n){var r="ajaxPerf",i=0;return e&&t&&n&&((e[r]=e[r]||{})[t]=n,i=1),i}var zi=function(){var e=this;e.openDone=!1,e.setRequestHeaderDone=!1,e.sendDone=!1,e.abortDone=!1,e.stateChangeAttached=!1},Bi=function ba(e,t,n){var r=this,i=n,b="responseText";r.perfMark=null,r.completed=!1,r.requestHeadersSize=null,r.requestHeaders=null,r.responseReceivingDuration=null,r.callbackDuration=null,r.ajaxTotalDuration=null,r.aborted=0,r.pageUrl=null,r.requestUrl=null,r.requestSize=0,r.method=null,r.status=null,r.requestSentTime=null,r.responseStartedTime=null,r.responseFinishedTime=null,r.callbackFinishedTime=null,r.endTime=null,r.xhrMonitoringState=new zi,r.clientFailure=0,r.traceID=e,r.spanID=t,Ce(ba,r,function(_){_.getAbsoluteUrl=function(){return _.requestUrl?_t.getAbsoluteUrl(_.requestUrl):null},_.getPathName=function(){return _.requestUrl?xt.sanitizeUrl(i,_t.getCompleteUrl(_.method,_.requestUrl)):null},_.CreateTrackItem=function(e,t,n){if(_.ajaxTotalDuration=Math.round(1e3*Rt.GetDuration(_.requestSentTime,_.responseFinishedTime))/1e3,_.ajaxTotalDuration<0)return null;var r,i,a,o,s,c,u,l,d=((o={id:"|"+_.traceID+"."+_.spanID,target:_.getAbsoluteUrl(),name:_.getPathName(),type:e,duration:_.ajaxTotalDuration,success:200<=+_.status&&+_.status<400,responseCode:+_.status,method:_.method})[Mi]={HttpMethod:_.method},o),p=d,f=(s=_).perfTiming,g=p[Mi]||{},h=0,m=J.isString,v="duration",y="startTime",x="connect"+"End",I="request"+"Start",S="response"+"End",T="transferSize",C="encodedBodySize",w="decodedBodySize",E="serverTiming";return f?(h|=qi(g,"End",f,"redirectStart","End"),h|=qi(g,"domainLookup",f,"domainLookupStart","domainLookupEnd"),h|=qi(g,"connect",f,"connectStart",x),h|=qi(g,"request",f,I,"requestEnd"),h|=qi(g,"response",f,"responseStart",S),h|=qi(g,"networkConnect",f,y,x),h|=qi(g,"sentRequest",f,I,S),h|=Vi(g,v,c=f[v]||Oi(f,y,S)||0),h|=Vi(g,"perfTotal",c),(u=f[E])&&(l={},Fi(u,function(n,e){var t,r,i,a=(t=n.name||""+e,(i=/([^\w\d_$])/g).test(r=t)&&(r=t.replace(i,"_")),r),o=l[a]||{};Fi(Ui(n),function(e){var t=n[e];("name"!==e&&m(t)||J.isNumber(t))&&(o[e]&&(t=o[e]+";"+t),!t&&m(t)||(o[e]=t))}),l[a]=o}),h|=Vi(g,E,l)),h|=Vi(g,T,f[T]),h|=Vi(g,C,f[C]),h|=Vi(g,w,f[w])):s.perfMark&&(h|=Vi(g,"missing",s.perfAttempts)),h&&(p[Mi]=g),t&&0<Ui(_.requestHeaders).length&&(d[Mi]=d[Mi]||{},d[Mi].requestHeaders=_.requestHeaders),!n||(r=n())&&((i=r.correlationContext)&&(d.correlationContext=i),r.headerMap&&0<Ui(r.headerMap).length&&(d[Mi]=d[Mi]||{},d[Mi].responseHeaders=r.headerMap),400<=_.status&&(a=r.type,d[Mi]=d[Mi]||{},""!==a&&"text"!==a||(d[Mi][b]=r[b]?r.statusText+" - "+r[b]:r.statusText),"json"===a&&(d[Mi][b]=r.response?r.statusText+" - "+JSON.stringify(r.response):r.statusText))),d}})},Hi=(ji.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},ji.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},ji.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},ji.DEFAULT_TRACE_FLAG="01",ji.DEFAULT_VERSION="00",ji);function ji(e,t){var n=this;n.traceFlag=ji.DEFAULT_TRACE_FLAG,n.version=ji.DEFAULT_VERSION,e&&ji.isValidTraceId(e)?n.traceId=e:n.traceId=wt.generateW3CId(),t&&ji.isValidSpanId(t)?n.spanId=t:n.spanId=wt.generateW3CId().substr(0,16)}var Gi="ai.ajxmn.",Ki="diagLog",Wi="ajaxData",Xi="throwInternal",Yi="fetch",Ji=J.isNullOrUndefined,Zi=J.arrForEach,Qi=J.objKeys,$i=0;function ea(e){var t="";try{Ji(e)||Ji(e[Wi])||Ji(e[Wi].requestUrl)||(t+="(url: '"+e[Wi].requestUrl+"')")}catch(n){}return t}function ta(e,t,n,r,i){e[Ki]()[Xi](Q.CRITICAL,t,n,r,i)}function na(e,t,n,r,i){e[Ki]()[Xi](Q.WARNING,t,n,r,i)}function ra(t,n,r){return function(e){ta(t,n,r,{ajaxDiagnosticsMessage:ea(e.inst),exception:wt.dump(e.err)})}}function ia(e,t){return e&&t?e.indexOf(t):-1}var aa,oa,sa=(aa=ze,__extends(ca,aa),ca.getDefaultConfig=function(){return{maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!0,disableCorrelationHeaders:!1,distributedTracingMode:U.AI,correlationHeaderExcludedDomains:["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],correlationHeaderDomains:undefined,appId:undefined,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1,enableAjaxErrorStatusText:!1,enableAjaxPerfTracking:!1,maxAjaxPerfLookupAttempts:3,ajaxPerfLookupDelay:25}},ca.getEmptyConfig=function(){var t=this.getDefaultConfig();return Zi(Qi(t),function(e){t[e]=undefined}),t},ca.prototype.processTelemetry=function(e,t){this.processNext(e,t)},ca.identifier="AjaxDependencyPlugin",ca);function ca(){var e=aa.call(this)||this;e.identifier=ca.identifier,e.priority=120;var C,w,E,_,b,N,D="trackDependencyDataInternal",t=V(),A=!1,k=!1,c=t&&t.host&&t.host.toLowerCase(),R=ca.getEmptyConfig(),P=!1,i=0,L=0,M=[],s={};return Ce(ca,e,function(g,h){function m(e,t,n){M.push(e?mt(e[O],t,n,!1):null)}function v(e,t,n){var r=!1,i=((J.isString(t)?t:(t||{}).url||"")||"").toLowerCase(),a=ia(i,"?"),o=ia(i,"#");return(-1===a||-1!==o&&o<a)&&(a=o),-1!==a&&(i=i.substring(0,a)),Ji(e)?Ji(t)||(r="object"==typeof t&&!0===t[Lt]||!!n&&!0===n[Lt]):r=!0===e[Lt]||!0===i[Lt],r?s[i]||(s[i]=1):s[i]&&(r=!0),r}function y(e,t){var n=!0,r=k;return Ji(e)||(n=!0===t||!Ji(e[Wi])),r&&n}function x(e,t){var n,r,i;t.requestUrl&&_&&b&&(n=z())&&J.isFunction(n.mark)&&(r=_+e+"#"+ ++$i,n.mark(r),(i=n.getEntriesByName(r))&&1===i.length&&(t.perfMark=i[0]))}function I(a,o,s,c){var u=o.perfMark,l=z(),d=R.maxAjaxPerfLookupAttempts,p=R.ajaxPerfLookupDelay,f=o.requestUrl,g=0;!function h(){try{if(l&&u){g++;for(var e=null,t=l.getEntries(),n=t.length-1;0<=n;n--){var r=t[n];if(r){if("resource"===r.entryType)r.initiatorType!==a||-1===ia(r.name,f)&&-1===ia(f,r.name)||(e=r);else if("mark"===r.entryType&&r.name===u.name){o.perfTiming=e;break}if(r.startTime<u.startTime-1e3)break}}}!u||o.perfTiming||d<=g||!1===o.async?(u&&J.isFunction(l.clearMarks)&&l.clearMarks(u.name),o.perfAttempts=g,s()):setTimeout(h,p)}catch(i){c(i)}}()}function S(e){var t="";try{Ji(e)||(t+="string"==typeof e?"(url: '"+e+"')":"(url: '"+e.url+"')")}catch(n){ta(g,re.FailedMonitorAjaxOpen,"Failed to grab failed fetch diagnostics message",{exception:wt.dump(n)})}return t}function T(e,t,i,n,r){function a(e,t,n){var r=n||{};r.fetchDiagnosticsMessage=S(i),t&&(r.exception=wt.dump(t)),na(g,e,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",r)}n&&(n.responseFinishedTime=Rt.Now(),n.status=t,I("fetch",n,function(){var e=n.CreateTrackItem("Fetch",P,r);e?g[D](e):a(re.FailedMonitorAjaxDur,null,{requestSentTime:n.requestSentTime,responseFinishedTime:n.responseFinishedTime})},function(e){a(re.FailedMonitorAjaxGetCorrelationHeader,e,null)}))}g.initialize=function(e,t,n,r){if(!g.isInitialized()){h.initialize(e,t,n,r);var i=g._getTelCtx(),a=ca.getDefaultConfig();Zi(Qi(a),function(e){R[e]=i.getConfig(ca.identifier,e,a[e])});var o,s=R.distributedTracingMode;if(P=R.enableRequestHeaderTracking,b=R.enableAjaxPerfTracking,L=R.maxAjaxCallsPerView,N=R.enableResponseHeaderTracking,E=s===U.AI||s===U.AI_AND_W3C,w=s===U.AI_AND_W3C||s===U.W3C,b&&(o=e.instrumentationKey||"unkwn",_=5<o.length?Gi+o.substring(o.length-5)+".":Gi+o+"."),!1===R.disableAjaxTracking&&(!function(e){var t,n=!1;typeof XMLHttpRequest===F||Ji(XMLHttpRequest)||(t=XMLHttpRequest[O],n=!(Ji(t)||Ji(t.open)||Ji(t.send)||Ji(t.abort)));var r=wt.getIEVersion();if(r&&r<9&&(n=!1),n)try{(new XMLHttpRequest)[Wi]={};var i=XMLHttpRequest[O].open;XMLHttpRequest[O].open=i}catch(a){n=!1,ta(e,re.FailedMonitorAjaxOpen,"Failed to enable XMLHttpRequest monitoring, extension is not supported",{exception:wt.dump(a)})}return n}(g)||k||(m(XMLHttpRequest,"open",{req:function(e,t,n,r){var i,a,o,s,c,u,l,d,p=e.inst,f=p[Wi];v(p,n)||!y(p,!0)||f&&f.xhrMonitoringState.openDone||(i=p,a=t,o=n,s=r,c=C&&C.telemetryTrace&&C.telemetryTrace.traceID||wt.generateW3CId(),u=wt.generateW3CId().substr(0,16),(l=new Bi(c,u,g[Ki]())).method=a,l.requestUrl=o,l.xhrMonitoringState.openDone=!0,l.requestHeaders={},l.async=s,i[Wi]=l,(d=i)[Wi].xhrMonitoringState.stateChangeAttached=te.Attach(d,"readystatechange",function(){try{d&&4===d.readyState&&y(d)&&((i=(r=d)[Wi]).responseFinishedTime=Rt.Now(),i.status=r.status,I("xmlhttprequest",i,function(){try{var e=i.CreateTrackItem("Ajax",P,function(){var e,t,i,n={statusText:r.statusText,headerMap:null,correlationContext:function(e){try{var t=e.getAllResponseHeaders();if(null!==t&&-1!==ia(t.toLowerCase(),vt.requestContextHeaderLowerCase)){var n=e.getResponseHeader(vt.requestContextHeader);return Nt.getCorrelationContext(n)}}catch(r){na(g,re.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{ajaxDiagnosticsMessage:ea(e),exception:wt.dump(r)})}}(r),type:r.responseType,responseText:function(e){try{var t=e.responseType;if(""===t||"text"===t)return e.responseText}catch(n){}return null}(r),response:r.response};return!N||(e=r.getAllResponseHeaders())&&(t=J.strTrim(e).split(/[\r\n]+/),i={},Zi(t,function(e){var t=e.split(": "),n=t.shift(),r=t.join(": ");i[n]=r}),n.headerMap=i),n});e?g[D](e):n(null,{requestSentTime:i.requestSentTime,responseFinishedTime:i.responseFinishedTime})}finally{try{r[Wi]=null}catch(t){}}},function(e){n(e,null)}))}catch(t){var e=wt.dump(t);e&&-1!==ia(e.toLowerCase(),"c00c023f")||ta(g,re.FailedMonitorAjaxRSC,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:ea(d),exception:e})}function n(e,t){var n=t||{};n.ajaxDiagnosticsMessage=ea(r),e&&(n.exception=wt.dump(e)),na(g,re.FailedMonitorAjaxDur,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",n)}var r,i}))},hkErr:ra(g,re.FailedMonitorAjaxOpen,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.")}),m(XMLHttpRequest,"send",{req:function(e,t){var n=e.inst,r=n[Wi];y(n)&&!r.xhrMonitoringState.sendDone&&(x("xhr",r),r.requestSentTime=Rt.Now(),g.includeCorrelationHeaders(r,undefined,undefined,n),r.xhrMonitoringState.sendDone=!0)},hkErr:ra(g,re.FailedMonitorAjaxSend,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.")}),m(XMLHttpRequest,"abort",{req:function(e){var t=e.inst,n=t[Wi];y(t)&&!n.xhrMonitoringState.abortDone&&(n.aborted=1,n.xhrMonitoringState.abortDone=!0)},hkErr:ra(g,re.FailedMonitorAjaxAbort,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.")}),P&&m(XMLHttpRequest,"setRequestHeader",{req:function(e,t,n){var r=e.inst;y(r)&&(r[Wi].requestHeaders[t]=n)},hkErr:ra(g,re.FailedMonitorAjaxSetRequestHeader,"Failed to monitor XMLHttpRequest.setRequestHeader, monitoring data for this ajax call may be incorrect.")}),k=!0)),(f=!(l=q())||Ji(l.Request)||Ji(l.Request[O])||Ji(l[Yi])?null:l[Yi])&&(d=q(),p=f.polyfill,!1===R.disableFetchTracking?(M.push(mt(d,Yi,{req:function(e,t,n){var r,i,a;!A||v(null,t,n)||p&&k||(r=e.ctx(),i=function(e,t){var n=C&&C.telemetryTrace&&C.telemetryTrace.traceID||wt.generateW3CId(),r=wt.generateW3CId().substr(0,16),i=new Bi(n,r,g[Ki]());i.requestSentTime=Rt.Now(),e instanceof Request?i.requestUrl=e?e.url:"":i.requestUrl=e;var a="GET";t&&t.method?a=t.method:e&&e instanceof Request&&(a=e.method),i.method=a;var o={};return P&&new Headers((t?t.headers:0)||e instanceof Request&&e.headers||{}).forEach(function(e,t){o[t]=e}),i.requestHeaders=o,x("fetch",i),i}(t,n),(a=g.includeCorrelationHeaders(i,t,n))!==n&&e.set(1,a),r.data=i)},rsp:function(e,t){var n=e.ctx().data;n&&(e.rslt=e.rslt.then(function(t){return T(0,(t||{}).status,t,n,function(){var n,e={statusText:t.statusText,headerMap:null,correlationContext:function(e){if(e&&e.headers)try{var t=e.headers.get(vt.requestContextHeader);return Nt.getCorrelationContext(t)}catch(n){na(g,re.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{fetchDiagnosticsMessage:S(e),exception:wt.dump(n)})}}(t)};return N&&(n={},t.headers.forEach(function(e,t){n[t]=e}),e.headerMap=n),e}),t})["catch"](function(e){throw T(0,0,t,n,null,e.message),e}))},hkErr:ra(g,re.FailedMonitorAjaxOpen,"Failed to monitor Window.fetch, monitoring data for this fetch call may be incorrect.")})),A=!0):p&&M.push(mt(d,Yi,{req:function(e,t,n){v(null,t,n)}})),p&&(d[Yi].polyfill=p)),0<n.length&&n){for(var c=void 0,u=0;!c&&u<n.length;)n[u]&&n[u].identifier===ur&&(c=n[u]),u++;c&&(C=c.context)}}var l,d,p,f},g.teardown=function(){Zi(M,function(e){e.rm()}),k=A=!(M=[]),g.setInitialized(!1)},g.trackDependencyData=function(e,t){g[D](e,t)},g.includeCorrelationHeaders=function(e,t,n,r){var i,a,o,s=g._currentWindowHost||c;return t?(Nt.canIncludeCorrelationHeader(R,e.getAbsoluteUrl(),s)&&((n=n||{}).headers=new Headers(n.headers||t instanceof Request&&t.headers||{}),E&&(i="|"+e.traceID+"."+e.spanID,n.headers.set(vt.requestIdHeader,i),P&&(e.requestHeaders[vt.requestIdHeader]=i)),(a=R.appId||C&&C.appId())&&(n.headers.set(vt.requestContextHeader,vt.requestContextAppIdFormat+a),P&&(e.requestHeaders[vt.requestContextHeader]=vt.requestContextAppIdFormat+a)),w&&(o=new Hi(e.traceID,e.spanID),n.headers.set(vt.traceParentHeader,o.toString()),P&&(e.requestHeaders[vt.traceParentHeader]=o.toString()))),n):r?(Nt.canIncludeCorrelationHeader(R,e.getAbsoluteUrl(),s)&&(E&&(i="|"+e.traceID+"."+e.spanID,r.setRequestHeader(vt.requestIdHeader,i),P&&(e.requestHeaders[vt.requestIdHeader]=i)),(a=R.appId||C&&C.appId())&&(r.setRequestHeader(vt.requestContextHeader,vt.requestContextAppIdFormat+a),P&&(e.requestHeaders[vt.requestContextHeader]=vt.requestContextAppIdFormat+a)),w&&(o=new Hi(e.traceID,e.spanID),r.setRequestHeader(vt.traceParentHeader,o.toString()),P&&(e.requestHeaders[vt.traceParentHeader]=o.toString()))),r):undefined},g[D]=function(e,t,n){var r;-1===L||i<L?(R.distributedTracingMode!==U.W3C&&R.distributedTracingMode!==U.AI_AND_W3C||"string"!=typeof e.id||"."===e.id[e.id.length-1]||(e.id+="."),J.isNullOrUndefined(e.startTime)&&(e.startTime=new Date),r=ir.create(e,Un.dataType,Un.envelopeType,g[Ki](),t,n),g.core.track(r)):i===L&&ta(g,re.MaxAjaxPerPVExceeded,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0),++i}}),e}var ua=pr,la=(da.prototype.trackEvent=function(e,t){this.appInsights.trackEvent(e,t)},da.prototype.trackPageView=function(e){var t=e||{};this.appInsights.trackPageView(t)},da.prototype.trackPageViewPerformance=function(e){var t=e||{};this.appInsights.trackPageViewPerformance(t)},da.prototype.trackException=function(e){!e.exception&&e.error&&(e.exception=e.error),this.appInsights.trackException(e)},da.prototype._onerror=function(e){this.appInsights._onerror(e)},da.prototype.trackTrace=function(e,t){this.appInsights.trackTrace(e,t)},da.prototype.trackMetric=function(e,t){this.appInsights.trackMetric(e,t)},da.prototype.startTrackPage=function(e){this.appInsights.startTrackPage(e)},da.prototype.stopTrackPage=function(e,t,n,r){this.appInsights.stopTrackPage(e,t,n,r)},da.prototype.startTrackEvent=function(e){this.appInsights.startTrackEvent(e)},da.prototype.stopTrackEvent=function(e,t,n){this.appInsights.stopTrackEvent(e,t,n)},da.prototype.addTelemetryInitializer=function(e){return this.appInsights.addTelemetryInitializer(e)},da.prototype.setAuthenticatedUserContext=function(e,t,n){void 0===n&&(n=!1),this.properties.context.user.setAuthenticatedUserContext(e,t,n)},da.prototype.clearAuthenticatedUserContext=function(){this.properties.context.user.clearAuthenticatedUserContext()},da.prototype.trackDependencyData=function(e){this.dependencies.trackDependencyData(e)},da.prototype.flush=function(t){var e=this;void 0===t&&(t=!0),Pe(this.core,function(){return"AISKU.flush"},function(){J.arrForEach(e.core.getTransmissionControls(),function(e){J.arrForEach(e,function(e){e.flush(t)})})},null,t)},da.prototype.onunloadFlush=function(t){void 0===t&&(t=!0),J.arrForEach(this.core.getTransmissionControls(),function(e){J.arrForEach(e,function(e){e.onunloadFlush?e.onunloadFlush():e.flush(t)})})},da.prototype.loadAppInsights=function(r){var n=this;void 0===r&&(r=!1);var i=this;if(r&&i.config.extensions&&0<i.config.extensions.length)throw Error("Extensions not allowed in legacy mode");return Pe(i.core,function(){return"AISKU.loadAppInsights"},function(){var e=[],t=new yi;e.push(t),e.push(i.properties),e.push(i.dependencies),e.push(i.appInsights),i.core.initialize(i.config,e),i.context=i.properties.context,oa&&i.context&&(i.context.internal.sdkSrc=oa),function(e){if(e){var t="";for(var n in J.isNullOrUndefined(i._snippetVersion)||(t+=i._snippetVersion),r&&(t+=".lg"),i.context&&i.context.internal&&(i.context.internal.snippetVer=t||"-"),i)J.isString(n)&&!J.isFunction(i[n])&&"_"!=n.substring(0,1)&&(e[n]=i[n])}}(i.snippet),i.emptyQueue(),i.pollInternalLogs(),i.addHousekeepingBeforeUnload(n)}),i},da.prototype.updateSnippetDefinitions=function(e){for(var t in this)J.isString(t)&&(e[t]=this[t])},da.prototype.emptyQueue=function(){var e=this;try{if(wt.isArray(e.snippet.queue)){for(var t=e.snippet.queue.length,n=0;n<t;n++)(0,e.snippet.queue[n])();e.snippet.queue=undefined,delete e.snippet.queue}}catch(i){var r={};i&&J.isFunction(i.toString)&&(r.exception=i.toString())}},da.prototype.pollInternalLogs=function(){this.core.pollInternalLogs()},da.prototype.addHousekeepingBeforeUnload=function(t){var e,n,r;(E()||b())&&(e=function(){t.onunloadFlush(!1);var e=t.appInsights.core._extensions[ur];e&&e.context&&e.context._sessionManager&&e.context._sessionManager.backup()},t.appInsights.config.disableFlushOnBeforeUnload||(n=J.addEventHandler("beforeunload",e),(n=J.addEventHandler("pagehide",e)||n)||(r=D())&&r.product&&"ReactNative"===r.product||t.appInsights.core.logger.throwInternal(Q.CRITICAL,re.FailedToAddHandlerForOnBeforeUnload,"Could not add handler for beforeunload and pagehide")),t.appInsights.config.disableFlushOnUnload||J.addEventHandler("pagehide",e))},da.prototype.getSKUDefaults=function(){this.config.diagnosticLogInterval=this.config.diagnosticLogInterval&&0<this.config.diagnosticLogInterval?this.config.diagnosticLogInterval:1e4},da);function da(e){var t=this;t._snippetVersion=""+(e.sv||e.version||""),e.queue=e.queue||[],e.version=e.version||2;var n,r,i=e.config||{};i.connectionString&&(r=(n=qt.parse(i.connectionString)).ingestionendpoint,i.endpointUrl=r?r+"/v2/track":i.endpointUrl,i.instrumentationKey=n.instrumentationkey||i.instrumentationKey),t.appInsights=new wr,t.properties=new Pi,t.dependencies=new sa,t.core=new st,t.snippet=e,t.config=i,t.getSKUDefaults()}!function(){var e=null,t=["://az416426.vo.msecnd.net/"];try{var n=(document||{}).currentScript;n&&(e=n.src)}catch(o){}if(e)try{var r=e.toLowerCase();if(r)for(var i="",a=0;a<t.length;a++)if(-1!==r.indexof(t[a])){i="cdn"+(a+1),~r.indexOf("/scripts/")||(~r.indexOf("/next/")?i+="-next":~r.indexOf("/beta/")&&(i+="-beta")),oa=i+"";break}}catch(o){}}();var pa=(fa.getAppInsights=function(e,t){var n=new la(e),r=2!==t;if(2===t)return n.updateSnippetDefinitions(e),n.loadAppInsights(r),n;var i=new fr(e,n);return i.updateSnippetDefinitions(e),n.loadAppInsights(r),i},fa);function fa(){}var ga,ha,ma,va="undefined";function ya(e,t){var n=typeof console!==va?console:null;n&&n.warn&&n.warn("Failed to initialize AppInsights JS SDK for instance "+(e||"<unknown>")+" - "+t)}try{typeof window!==va?(ma=(ga=window).appInsightsSDK||"appInsights",typeof JSON!==va?ga[ma]===undefined||(2<=(ha=ga[ma]||{version:2}).version&&ga[ma].initialize||ha.version===undefined)&&pa.getAppInsights(ha,ha.version):ya(ma,"Missing JSON - you must supply a JSON polyfill!")):ya(ma,"Missing window")}catch(Na){ya(ma,Na.message)}e.ApplicationInsights=la,e.Telemetry=ua,function(e,t,n){var r=Object.defineProperty;if(r)try{return r(e,t,n)}catch(Na){}typeof n.value!==undefined&&(e[t]=n.value)}(e,"__esModule",{value:!0})};"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{}));
//# sourceMappingURL=ai.2.5.8.min.js.map
