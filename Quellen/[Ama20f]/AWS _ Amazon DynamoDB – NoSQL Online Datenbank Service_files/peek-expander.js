define(["librastandardlib/dom-utils/smoothScrollToElem","libra/dom-utils/smoothScrollOptions"],function(smoothScrollToElem,smoothScrollOptions){"use strict";var defaults={expandTriggerSelector:".lb-expand-trigger",collapseTriggerSelector:".lb-collapse-trigger",contentSelector:".lb-content",contentInnerSelector:".lb-content-inner",smoothScroll:true,transitionDuration:400};function PeekExpander(elem){this.$elem=$(elem);this.options=$.extend({},defaults,this.$elem.data());this.$expandTrigger=this.$elem.find(this.options.expandTriggerSelector);this.$collapseTrigger=this.$elem.find(this.options.collapseTriggerSelector);this.$content=this.$elem.find(this.options.contentSelector);this.$contentInner=this.$elem.find(this.options.contentInnerSelector);this.bindHandlers()}PeekExpander.prototype={bindHandlers:function(){var that=this;this.$expandTrigger.on("click","a",function(e){e.preventDefault();that.expand()});this.$collapseTrigger.on("click","a",function(e){e.preventDefault();that.collapse()})},expand:function(){this.setContentHeight();var expandTriggerHeight=this.$expandTrigger.outerHeight();this.$elem.addClass("lb-active");this.$content.css({"max-height":this.contentHeight,"margin-top":-expandTriggerHeight});var that=this;setTimeout(function(){that.$content.css("transition-property","none");that.$content.css("max-height","none")},this.options.transitionDuration)},collapse:function(){this.setContentHeight();this.$content.css("max-height",this.contentHeight);var that=this;setTimeout(function(){that.$elem.removeClass("lb-active");that.$content.css({"transition-property":"max-height, margin-top","max-height":0,"margin-top":0})},50);this.smoothScrollToExpanderElem()},smoothScrollToExpanderElem:function(){if(this.options.smoothScroll){smoothScrollToElem(this.$elem.get(0),smoothScrollOptions)}},setContentHeight:function(){this.contentHeight=this.$contentInner.outerHeight()}};Libra.Comp.register({name:"peek-expander",initFct:function(elem){new PeekExpander(elem)},initTime:"immediate"});return PeekExpander});