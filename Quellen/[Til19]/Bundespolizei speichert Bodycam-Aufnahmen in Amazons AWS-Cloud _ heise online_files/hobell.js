/*! For license information please see hobell.js.LICENSE.txt */
!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/assets/heise/",n(n.s=646)}([,function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return l}));n(135),n(201),n(264);var i=n(579),r=n(49),o=i.methodFactory,s=i.getLogger("cleverpush"),c=Object(r.e)().toUpperCase();function a(e){return"code"===e?'\n    padding: 0 1px 1px 5px;\n    border: 1px solid #ddd;\n    border-radius: 3px;\n    font-family: Monaco,"DejaVu Sans Mono","Courier New",monospace;\n    color: #444;\n    ':"bold"===e?"\n    font-weight: 600;\n    color: rgb(51, 51, 51);\n    ":"alert"===e?"\n    font-weight: 600;\n    color: red;\n    ":""}function u(e){return JSON.stringify(e,(function(e,t){return"function"==typeof t?"[Function]":t}),4)}function l(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return s.debug("Called %c".concat(e,"(").concat(n.map(u).join(", "),")"),a("code"),".")}s.methodFactory=function(e,t,n){var i=o(e,t,n);return function(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];0===t&&"string"==typeof arguments[t]&&(n="[CleverPush][".concat(c,"] ").concat(n)),e.push(n)}i.apply(this,e)}},s.setLevel(s.getLevel(),!1)},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(119))},function(e,t,n){var i=n(2),r=n(56).f,o=n(20),s=n(25),c=n(78),a=n(138),u=n(118);e.exports=function(e,t){var n,l,_,f,d,p=e.target,h=e.global,g=e.stat;if(n=h?i:g?i[p]||c(p,{}):(i[p]||{}).prototype)for(l in t){if(f=t[l],_=e.noTargetGet?(d=r(n,l))&&d.value:n[l],!u(h?l:p+(g?".":"#")+l,e.forced)&&void 0!==_){if(typeof f==typeof _)continue;a(f,_)}(e.sham||_&&_.sham)&&o(f,"sham",!0),s(n,l,f,e)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},,,,,function(e,t,n){var i=n(2),r=n(92),o=n(11),s=n(79),c=n(94),a=n(140),u=r("wks"),l=i.Symbol,_=a?l:l&&l.withoutSetter||s;e.exports=function(e){return o(u,e)||(c&&o(l,e)?u[e]=l[e]:u[e]=_("Symbol."+e)),u[e]}},,function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var i=n(4);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},,function(e,t,n){var i=n(12);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},,function(e,t,n){var i=n(13),r=n(114),o=n(15),s=n(57),c=Object.defineProperty;t.f=i?c:function(e,t,n){if(o(e),t=s(t,!0),o(n),r)try{return c(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},,,function(e,t,n){var i=n(13),r=n(17),o=n(42);e.exports=i?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(112),n(83),n(253);var i=n(249),r=n.n(i),o={en:{"confirm.title":"{0} would like to send you push notifications.","confirm.info":"Notifications can be turned off anytime from browser settings.","confirm.allow":"Allow","confirm.allowChrome":"Allow","confirm.allowFirefox":"Allow Notifications","confirm.deny":"Deny","confirm.selectTopics":"To which topics do you want to receive notifications?","popup.info":"Click on {0} to confirm push notifications","popup.text":"Get updates and offers from {0} by subscribing to push notifications.","unsubscribe.title":"Unsubscribe from notifications","unsubscribe.confirm":"Are you sure?","unsubscribe.yes":"Yes","unsubscribe.no":"No","windowclose.confirm":"The process is not yet complete, are you sure you want to cancel it?","deny.alertHttps":"If you change your mind, click the lock to give your browser permission to send you notifications.","deny.alertHttp":"If you change your mind, click the info symbol to give your browser permission to send you notifications.","bell.subscribe":"Subscribe for notifications","bell.subscribed":"You're subscribed for notifications","bell.unsubscribeSuccess":"You won't receive notifications again","bell.hide":"Do not show again","panel.notifications":"Notifications","panel.editTopics":"Edit Topics","panel.settings":"Settings","panel.notificationsEmpty":"No notifications available.","panel.save":"Save","panel.successfullySaved":"Successfully saved!","unblock.title":"Please follow this steps to receive notifications",privacy:"Privacy"},de:{"confirm.title":"{0} würde dir gerne Push Nachrichten senden.","confirm.info":"Benachrichtigungen können jederzeit in den Browser Einstellungen deaktiviert werden.","confirm.allow":"Erlauben","confirm.allowChrome":"Zulassen","confirm.allowFirefox":"Benachrichtigungen erlauben","confirm.deny":"Verbieten","confirm.selectTopics":"Zu welchen Themen möchtest du Push Nachrichten erhalten?","popup.info":"Klicke auf {0}, um unsere Push-Benachrichtigungen zu bestätigen","popup.text":"Erhalte Updates und Angebote von {0}, indem du Push-Benachrichtigungen abonnierst.","unsubscribe.title":"Von Benachrichtigungen abmelden","unsubscribe.confirm":"Bist du dir sicher?","unsubscribe.yes":"Ja","unsubscribe.no":"Nein","windowclose.confirm":"Der Vorgang ist noch nicht abgeschlossen, bist du sicher, dass du ihn abbrechen möchtest?","deny.alertHttps":'Wenn du doch Benachrichtigungen empfangen möchtest, kannst du mit einem Klick auf das Schloss die Einstellung "Benachrichtigungen" auf "Erlauben" setzen.',"deny.alertHttp":'Wenn du doch Benachrichtigungen empfangen möchtest, kannst du mit einem Klick auf das Info-Symbol die Einstellung "Benachrichtigungen" auf "Erlauben" setzen.',"bell.subscribe":"Für Benachrichtigungen anmelden","bell.subscribed":"Du bist für Benachrichtigungen angemeldet","bell.unsubscribeSuccess":"Du wirst keine Benachrichtigungen mehr erhalten","bell.hide":"Nicht mehr anzeigen","panel.notifications":"Benachrichtigungen","panel.editTopics":"Themenbereiche bearbeiten","panel.settings":"Einstellungen","panel.notificationsEmpty":"Keine Benachrichtigungen vorhanden.","panel.save":"Speichern","panel.successfullySaved":"Erfolgreich gespeichert!","unblock.title":"Bitte folge diesen Schritten um Benachrichtigungen zu empfangen",privacy:"Datenschutz"},"de-formal":{"confirm.title":"{0} würde Ihnen gerne Push Nachrichten senden.","confirm.info":"Benachrichtigungen können jederzeit in den Browser Einstellungen deaktiviert werden.","confirm.allow":"Erlauben","confirm.allowChrome":"Zulassen","confirm.allowFirefox":"Benachrichtigungen erlauben","confirm.deny":"Verbieten","confirm.selectTopics":"Zu welchen Themen möchten Sie Push Nachrichten erhalten?","popup.info":"Klicken Sie auf {0}, um unsere Push-Benachrichtigungen zu bestätigen","popup.text":"Erhalten Sie Updates und Angebote von {0}, indem Sie Push-Benachrichtigungen abonnieren.","unsubscribe.title":"Von Benachrichtigungen abmelden","unsubscribe.confirm":"Sind Sie sich sicher?","unsubscribe.yes":"Ja","unsubscribe.no":"Nein","windowclose.confirm":"Der Vorgang ist noch nicht abgeschlossen, sind Sie sich sicher, dass Sie ihn abbrechen möchten?","deny.alertHttps":'Wenn Sie doch Benachrichtigungen empfangen möchten, können Sie mit einem Klick auf das Schloss die Einstellung "Benachrichtigungen" auf "Erlauben" setzen.',"deny.alertHttp":'Wenn Sie doch Benachrichtigungen empfangen möchten, können Sie mit einem Klick auf das Info-Symbol die Einstellung "Benachrichtigungen" auf "Erlauben" setzen.',"bell.subscribe":"Für Benachrichtigungen anmelden","bell.subscribed":"Sie sind für Benachrichtigungen angemeldet","bell.unsubscribeSuccess":"Sie werden keine Benachrichtigungen mehr erhalten","panel.notifications":"Benachrichtigungen","panel.editTopics":"Themenbereiche bearbeiten","panel.settings":"Einstellungen","panel.notificationsEmpty":"Keine Benachrichtigungen vorhanden.","panel.save":"Speichern","panel.successfullySaved":"Erfolgreich gespeichert!","unblock.title":"Bitte folgen Sie diesen Schritten um Benachrichtigungen zu empfangen",privacy:"Datenschutz"}};function s(e){var t=(window.CleverPush||{config:{}}).config.language||navigator.language||navigator.userLanguage||"en";t="de-formal"!==t?t.substr(0,2).toLowerCase():t,o.hasOwnProperty(t)||(t="en");var n,i=e;if("confirm.allowBrowser"===i){i="confirm.allow";var s=new r.a;"Chrome"===s.getBrowser().name?i="confirm.allowChrome":"Firefox"===s.getBrowser().name&&(i="confirm.allowFirefox")}else"deny.alert"===i&&(i="https:"===location.protocol?"deny.alertHttps":"deny.alertHttp");return o[t].hasOwnProperty(i)?n=o[t][i]:o.en.hasOwnProperty(i)&&(n=o.en[i]),n?"windows-1252"===document.characterSet||"iso-8859-1"===document.characterSet?decodeURIComponent(escape(n)):n:i}String.prototype.formatCleverPush=function(){var e=this;for(var t in arguments)arguments.hasOwnProperty(t)&&(e=e.replace("{".concat(t,"}"),arguments[t]));return e}},function(e,t,n){var i=n(48),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},,function(e,t,n){var i=n(2),r=n(20),o=n(11),s=n(78),c=n(100),a=n(43),u=a.get,l=a.enforce,_=String(String).split("String");(e.exports=function(e,t,n,c){var a=!!c&&!!c.unsafe,u=!!c&&!!c.enumerable,f=!!c&&!!c.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||r(n,"name",t),l(n).source=_.join("string"==typeof t?t:"")),e!==i?(a?!f&&e[t]&&(u=!0):delete e[t],u?e[t]=n:r(e,t,n)):u?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||c(this)}))},function(e,t,n){var i=n(34);e.exports=function(e){return Object(i(e))}},,,function(e,t,n){var i=n(72),r=n(34);e.exports=function(e){return i(r(e))}},,,,,function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},,,,,,,function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i,r,o,s=n(194),c=n(2),a=n(12),u=n(20),l=n(11),_=n(75),f=n(60),d=c.WeakMap;if(s){var p=new d,h=p.get,g=p.has,b=p.set;i=function(e,t){return b.call(p,e,t),t},r=function(e){return h.call(p,e)||{}},o=function(e){return g.call(p,e)}}else{var m=_("state");f[m]=!0,i=function(e,t){return u(e,m,t),t},r=function(e){return l(e,m)?e[m]:{}},o=function(e){return l(e,m)}}e.exports={set:i,get:r,has:o,enforce:function(e){return o(e)?r(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!a(t)||(n=r(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var i=n(139),r=n(2),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(i[e])||o(r[e]):i[e]&&i[e][t]||r[e]&&r[e][t]}},,,,function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"m",(function(){return a})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return _})),n.d(t,"b",(function(){return f})),n.d(t,"e",(function(){return d})),n.d(t,"i",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"g",(function(){return g})),n.d(t,"k",(function(){return b})),n.d(t,"l",(function(){return m})),n.d(t,"j",(function(){return v})),n.d(t,"f",(function(){return y})),n.d(t,"n",(function(){return E}));n(196),n(112),n(108),n(207),n(195),n(83),n(467);var i=n(249),r=n.n(i),o=n(61),s=new r.a,c=s.getBrowser(),a=s.getOS(),u=s.getOS(),l=c.version?c.version.split("."):["0"],_=c.version?parseInt(l[0],10):0,f=l.length>1?parseInt(l[1],10):0;function d(){return"undefined"!=typeof window?window===window.top?location.hostname.indexOf(".cleverpush.com")>-1&&0===location.pathname.indexOf("/subscribe")?"popup":"host":0===location.pathname.indexOf("/iframe")||0===location.pathname.indexOf("/referrals")?"iframe":"customSubdomain":"undefined"!=typeof WorkerLocation&&location instanceof WorkerLocation?"serviceWorker":null}function p(){return"host"===d()}function h(){return"undefined"!=typeof window}function g(){return/Android/.test(navigator.userAgent)}function b(){return"popup"===d()&&h()}function m(){return location.hostname.indexOf(".cleverpush.com")>-1&&0===location.pathname.indexOf("/unsubscribe")&&h()}function v(){return"iframe"===d()&&h()}function y(){var e=document.documentElement,t=document.body,n="scrollTop",i="scrollHeight";return(e[n]||t[n])/((e[i]||t[i])-e.clientHeight)*100}function E(){var e=!0,t=null;return new Promise((function(n,i){new Promise((function(e){var t=function(){return e(!0)},n=function(){return e(!1)};if(!window.webkitRequestFileSystem){if("MozAppearance"in document.documentElement.style){var i=indexedDB.open("test");return i.onerror=t,void(i.onsuccess=n)}if(/constructor/i.test(window.HTMLElement)||navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&navigator.userAgent.indexOf("CriOS")<0&&navigator.userAgent.indexOf("FxiOS")<0){if(void 0!==window.openDatabase)try{window.openDatabase(null,null,null,null),window.localStorage.setItem("test",1)}catch(e){return t()}return function(){try{localStorage.length?n():(localStorage.x=1,localStorage.removeItem("x"),n())}catch(e){navigator.cookieEnabled?t():n()}}()}return window.indexedDB||!window.PointerEvent&&!window.MSPointerEvent?n():t()}window.webkitRequestFileSystem(0,0,n,t)})).then((function(r){r?(e=!1,t=null,i(new o.a("Private browsing mode not supported.","private-mode"))):("safari"in window&&"pushNotification"in window.safari?t="safari":void 0!==window.Notification&&("serviceWorker"in navigator||"http:"===location.protocol)?t="w3c":(e=!1,t=null,i(new o.a("Browser is not supported.","unsupported-browser"))),e&&"safari"!==t&&"ios"!==t&&("http:"===location.protocol||"showNotification"in ServiceWorkerRegistration.prototype?"PushManager"in window||(e=!1,i(new o.a("Push messaging isn't supported.","unsupported-browser"))):(e=!1,i(new o.a("Notifications aren't supported.","unsupported-browser"))),"serviceWorker"in navigator||"http:"===location.protocol||(e=!1,i(new o.a("Service workers are not supported.","unsupported-browser")))),e&&(window.self===window.top&&"w3c"===t&&navigator.serviceWorker&&"function"==typeof navigator.serviceWorker.getRegistrations?navigator.serviceWorker.getRegistrations().then((function(){return n(t)})).catch((function(){return i(new o.a("Service workers are not supported","unsupported-browser"))})):n(t)))}))}))}},function(e,t,n){var i=n(13),r=n(4),o=n(11),s=Object.defineProperty,c={},a=function(e){throw e};e.exports=function(e,t){if(o(c,e))return c[e];t||(t={});var n=[][e],u=!!o(t,"ACCESSORS")&&t.ACCESSORS,l=o(t,0)?t[0]:a,_=o(t,1)?t[1]:void 0;return c[e]=!!n&&!r((function(){if(u&&!i)return!0;var e={length:-1};u?s(e,1,{enumerable:!0,get:a}):e[1]=1,n.call(e,l,_)}))}},function(e,t,n){var i=n(95),r=n(72),o=n(26),s=n(23),c=n(141),a=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,l=4==e,_=6==e,f=5==e||_;return function(d,p,h,g){for(var b,m,v=o(d),y=r(v),E=i(p,h,3),w=s(y.length),O=0,P=g||c,M=t?P(d,w):n?P(d,0):void 0;w>O;O++)if((f||O in y)&&(m=E(b=y[O],O,v),e))if(t)M[O]=m;else if(m)switch(e){case 3:return!0;case 5:return b;case 6:return O;case 2:a.call(M,b)}else if(l)return!1;return _?-1:u||l?l:M}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},function(e,t,n){"use strict";var i,r=n(497),o=n(13),s=n(2),c=n(12),a=n(11),u=n(142),l=n(20),_=n(25),f=n(17).f,d=n(113),p=n(143),h=n(9),g=n(79),b=s.Int8Array,m=b&&b.prototype,v=s.Uint8ClampedArray,y=v&&v.prototype,E=b&&d(b),w=m&&d(m),O=Object.prototype,P=O.isPrototypeOf,M=h("toStringTag"),T=g("TYPED_ARRAY_TAG"),k=r&&!!p&&"Opera"!==u(s.opera),D=!1,I={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},S=function(e){return c(e)&&a(I,u(e))};for(i in I)s[i]||(k=!1);if((!k||"function"!=typeof E||E===Function.prototype)&&(E=function(){throw TypeError("Incorrect invocation")},k))for(i in I)s[i]&&p(s[i],E);if((!k||!w||w===O)&&(w=E.prototype,k))for(i in I)s[i]&&p(s[i].prototype,w);if(k&&d(y)!==w&&p(y,w),o&&!a(w,M))for(i in D=!0,f(w,M,{get:function(){return c(this)?this[T]:void 0}}),I)s[i]&&l(s[i],T,i);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:k,TYPED_ARRAY_TAG:D&&T,aTypedArray:function(e){if(S(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(p){if(P.call(E,e))return e}else for(var t in I)if(a(I,i)){var n=s[t];if(n&&(e===n||P.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(o){if(n)for(var i in I){var r=s[i];r&&a(r.prototype,e)&&delete r.prototype[e]}w[e]&&!n||_(w,e,n?t:k&&m[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var i,r;if(o){if(p){if(n)for(i in I)(r=s[i])&&a(r,e)&&delete r[e];if(E[e]&&!n)return;try{return _(E,e,n?t:k&&b[e]||t)}catch(e){}}for(i in I)!(r=s[i])||r[e]&&!n||_(r,e,t)}},isView:function(e){var t=u(e);return"DataView"===t||a(I,t)},isTypedArray:S,TypedArray:E,TypedArrayPrototype:w}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(81);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};i(r,"INITIALIZED","initialized"),i(r,"INITIALIZATION_FAILED","initializationFailed"),i(r,"SUBSCRIBED","subscribed"),i(r,"UNSUBSCRIBED","unsubscribed"),i(r,"PERMISSION_GRANTED","permissionGranted"),i(r,"TOPICS_SET","topicsSet"),i(r,"BELL_READY","bellReady"),i(r,"PERMISSION_RE_GRANTED","permissionReGranted"),i(r,"PANEL_SHOWN","panelShown"),i(r,"PANEL_HIDDEN","panelHidden")},function(e,t,n){var i=n(13),r=n(99),o=n(42),s=n(29),c=n(57),a=n(11),u=n(114),l=Object.getOwnPropertyDescriptor;t.f=i?l:function(e,t){if(e=s(e),t=c(t,!0),u)try{return l(e,t)}catch(e){}if(a(e,t))return o(!r.f.call(e,t),e[t])}},function(e,t,n){var i=n(12);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=!1},function(e,t,n){var i=n(41);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t){e.exports={}},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n(148),n(149),n(150),n(196),n(91),n(102),n(153),n(112),n(568),n(254),n(255),n(256),n(108),n(257),n(137),n(98),n(144);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?o(e):t}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){var t="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return c(e,arguments,l(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),u(i,e)})(e)}function c(e,t,n){return(c=a()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&u(r,n.prototype),r}).apply(null,arguments)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(s,e);var t,n,i=(t=s,n=a(),function(){var e,i=l(t);if(n){var o=l(this).constructor;e=Reflect.construct(i,arguments,o)}else e=i.apply(this,arguments);return r(this,e)});function s(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(n=i.call(this,e)).name=n.constructor.name,n.reason=t,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(o(n),n.constructor):n.stack=new Error(e).stack,n}return s}(s(Error))},,,,,,,,,,,function(e,t,n){var i=n(4),r=n(41),o="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==r(e)?o.call(e,""):Object(e)}:Object},function(e,t){e.exports={}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var i=n(92),r=n(79),o=i("keys");e.exports=function(e){return o[e]||(o[e]=r(e))}},function(e,t,n){var i,r=n(15),o=n(208),s=n(96),c=n(60),a=n(204),u=n(111),l=n(75),_=l("IE_PROTO"),f=function(){},d=function(e){return"<script>"+e+"<\/script>"},p=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;p=i?function(e){e.write(d("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):((t=u("iframe")).style.display="none",a.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(d("document.F=Object")),e.close(),e.F);for(var n=s.length;n--;)delete p.prototype[s[n]];return p()};c[_]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f.prototype=r(e),n=new f,f.prototype=null,n[_]=e):n=p(),void 0===t?n:o(n,t)}},function(e,t,n){var i=n(17).f,r=n(11),o=n(9)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},function(e,t,n){var i=n(2),r=n(20);e.exports=function(e,t){try{r(i,e,t)}catch(n){i[e]=t}return t}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+i).toString(36)}},function(e,t,n){var i=n(133),r=n(96).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var i=n(3),r=n(13);i({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperty:n(17).f})},function(e,t,n){"use strict";var i=n(3),r=n(146);i({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},function(e,t,n){"use strict";var i=n(3),r=n(110);i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},,,,,,,function(e,t,n){var i=n(2),r=n(155),o=n(146),s=n(20);for(var c in r){var a=i[c],u=a&&a.prototype;if(u&&u.forEach!==o)try{s(u,"forEach",o)}catch(e){u.forEach=o}}},function(e,t,n){"use strict";var i=n(29),r=n(189),o=n(73),s=n(43),c=n(157),a=s.set,u=s.getterFor("Array Iterator");e.exports=c(Array,"Array",(function(e,t){a(this,{type:"Array Iterator",target:i(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){var i=n(58),r=n(115);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.4",mode:i?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var i=n(48),r=Math.max,o=Math.min;e.exports=function(e,t){var n=i(e);return n<0?r(n+t,0):o(n,t)}},function(e,t,n){var i=n(4);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},function(e,t,n){var i=n(74);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){"use strict";var i=n(4);e.exports=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t,n){"use strict";var i=n(152).charAt,r=n(43),o=n(157),s=r.set,c=r.getterFor("String Iterator");o(String,"String",(function(e){s(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=c(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=i(n,r),t.index+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!i.call({1:2},1);t.f=o?function(e){var t=r(this,e);return!!t&&t.enumerable}:i},function(e,t,n){var i=n(115),r=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return r.call(e)}),e.exports=i.inspectSource},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(25),r=Date.prototype,o=r.toString,s=r.getTime;new Date(NaN)+""!="Invalid Date"&&i(r,"toString",(function(){var e=s.call(this);return e==e?o.call(this):"Invalid Date"}))},,,,,function(e,t,n){var i=n(133),r=n(96);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){var i=n(136),r=n(25),o=n(261);i||r(Object.prototype,"toString",o,{unsafe:!0})},function(e,t,n){"use strict";var i=n(57),r=n(17),o=n(42);e.exports=function(e,t,n){var s=i(t);s in e?r.f(e,s,o(0,n)):e[s]=n}},function(e,t,n){"use strict";var i,r,o=n(147),s=n(203),c=RegExp.prototype.exec,a=String.prototype.replace,u=c,l=(i=/a/,r=/b*/g,c.call(i,"a"),c.call(r,"a"),0!==i.lastIndex||0!==r.lastIndex),_=s.UNSUPPORTED_Y||s.BROKEN_CARET,f=void 0!==/()??/.exec("")[1];(l||f||_)&&(u=function(e){var t,n,i,r,s=this,u=_&&s.sticky,d=o.call(s),p=s.source,h=0,g=e;return u&&(-1===(d=d.replace("y","")).indexOf("g")&&(d+="g"),g=String(e).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==e[s.lastIndex-1])&&(p="(?: "+p+")",g=" "+g,h++),n=new RegExp("^(?:"+p+")",d)),f&&(n=new RegExp("^"+p+"$(?!\\s)",d)),l&&(t=s.lastIndex),i=c.call(u?n:s,g),u?i?(i.input=i.input.slice(h),i[0]=i[0].slice(h),i.index=s.lastIndex,s.lastIndex+=i[0].length):s.lastIndex=0:l&&i&&(s.lastIndex=s.global?i.index+i[0].length:t),f&&i&&i.length>1&&a.call(i[0],n,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)})),i}),e.exports=u},function(e,t,n){var i=n(2),r=n(12),o=i.document,s=r(o)&&r(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},function(e,t,n){var i=n(13),r=n(17).f,o=Function.prototype,s=o.toString,c=/^\s*function ([^ (]*)/;!i||"name"in o||r(o,"name",{configurable:!0,get:function(){try{return s.call(this).match(c)[1]}catch(e){return""}}})},function(e,t,n){var i=n(11),r=n(26),o=n(75),s=n(205),c=o("IE_PROTO"),a=Object.prototype;e.exports=s?Object.getPrototypeOf:function(e){return e=r(e),i(e,c)?e[c]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var i=n(13),r=n(4),o=n(111);e.exports=!i&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var i=n(2),r=n(78),o=i["__core-js_shared__"]||r("__core-js_shared__",{});e.exports=o},function(e,t,n){var i=n(29),r=n(23),o=n(93),s=function(e){return function(t,n,s){var c,a=i(t),u=r(a.length),l=o(s,u);if(e&&n!=n){for(;u>l;)if((c=a[l++])!=c)return!0}else for(;u>l;l++)if((e||l in a)&&a[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},function(e,t,n){var i=n(4),r=n(9),o=n(120),s=r("species");e.exports=function(e){return o>=51||!i((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,n){var i=n(4),r=/#|\.prototype\./,o=function(e,t){var n=c[s(e)];return n==u||n!=a&&("function"==typeof t?i(t):!!t)},s=o.normalize=function(e){return String(e).replace(r,".").toLowerCase()},c=o.data={},a=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var i,r,o=n(2),s=n(145),c=o.process,a=c&&c.versions,u=a&&a.v8;u?r=(i=u.split("."))[0]+i[1]:s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(r=i[1]),e.exports=r&&+r},,,,,,,,,,,,,function(e,t,n){var i=n(11),r=n(29),o=n(116).indexOf,s=n(60);e.exports=function(e,t){var n,c=r(e),a=0,u=[];for(n in c)!i(s,n)&&i(c,n)&&u.push(n);for(;t.length>a;)i(c,n=t[a++])&&(~o(u,n)||u.push(n));return u}},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,n){"use strict";var i=n(3),r=n(4),o=n(59),s=n(12),c=n(26),a=n(23),u=n(109),l=n(141),_=n(117),f=n(9),d=n(120),p=f("isConcatSpreadable"),h=d>=51||!r((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),g=_("concat"),b=function(e){if(!s(e))return!1;var t=e[p];return void 0!==t?!!t:o(e)};i({target:"Array",proto:!0,forced:!h||!g},{concat:function(e){var t,n,i,r,o,s=c(this),_=l(s,0),f=0;for(t=-1,i=arguments.length;t<i;t++)if(o=-1===t?s:arguments[t],b(o)){if(f+(r=a(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<r;n++,f++)n in o&&u(_,f,o[n])}else{if(f>=9007199254740991)throw TypeError("Maximum allowed index exceeded");u(_,f++,o)}return _.length=f,_}})},function(e,t,n){var i={};i[n(9)("toStringTag")]="z",e.exports="[object z]"===String(i)},function(e,t,n){"use strict";var i=n(25),r=n(15),o=n(4),s=n(147),c=RegExp.prototype,a=c.toString,u=o((function(){return"/a/b"!=a.call({source:"a",flags:"b"})})),l="toString"!=a.name;(u||l)&&i(RegExp.prototype,"toString",(function(){var e=r(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in c)?s.call(e):n)}),{unsafe:!0})},function(e,t,n){var i=n(11),r=n(191),o=n(56),s=n(17);e.exports=function(e,t){for(var n=r(t),c=s.f,a=o.f,u=0;u<n.length;u++){var l=n[u];i(e,l)||c(e,l,a(t,l))}}},function(e,t,n){var i=n(2);e.exports=i},function(e,t,n){var i=n(94);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var i=n(12),r=n(59),o=n(9)("species");e.exports=function(e,t){var n;return r(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!r(n.prototype)?i(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var i=n(136),r=n(41),o=n(9)("toStringTag"),s="Arguments"==r(function(){return arguments}());e.exports=i?r:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:s?r(t):"Object"==(i=r(t))&&"function"==typeof t.callee?"Arguments":i}},function(e,t,n){var i=n(15),r=n(252);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,o){return i(n),r(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},function(e,t,n){var i=n(2),r=n(155),o=n(91),s=n(20),c=n(9),a=c("iterator"),u=c("toStringTag"),l=o.values;for(var _ in r){var f=i[_],d=f&&f.prototype;if(d){if(d[a]!==l)try{s(d,a,l)}catch(e){d[a]=l}if(d[u]||s(d,u,_),r[_])for(var p in o)if(d[p]!==o[p])try{s(d,p,o[p])}catch(e){d[p]=o[p]}}}},function(e,t,n){var i=n(44);e.exports=i("navigator","userAgent")||""},function(e,t,n){"use strict";var i=n(51).forEach,r=n(97),o=n(50),s=r("forEach"),c=o("forEach");e.exports=s&&c?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,t,n){"use strict";var i=n(15);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var i=n(3),r=n(2),o=n(44),s=n(58),c=n(13),a=n(94),u=n(140),l=n(4),_=n(11),f=n(59),d=n(12),p=n(15),h=n(26),g=n(29),b=n(57),m=n(42),v=n(76),y=n(107),E=n(80),w=n(260),O=n(101),P=n(56),M=n(17),T=n(99),k=n(20),D=n(25),I=n(92),S=n(75),A=n(60),C=n(79),B=n(9),R=n(198),L=n(188),x=n(77),U=n(43),j=n(51).forEach,W=S("hidden"),K=B("toPrimitive"),N=U.set,q=U.getterFor("Symbol"),F=Object.prototype,z=r.Symbol,H=o("JSON","stringify"),V=P.f,G=M.f,J=w.f,Y=T.f,Z=I("symbols"),$=I("op-symbols"),Q=I("string-to-symbol-registry"),X=I("symbol-to-string-registry"),ee=I("wks"),te=r.QObject,ne=!te||!te.prototype||!te.prototype.findChild,ie=c&&l((function(){return 7!=v(G({},"a",{get:function(){return G(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=V(F,t);i&&delete F[t],G(e,t,n),i&&e!==F&&G(F,t,i)}:G,re=function(e,t){var n=Z[e]=v(z.prototype);return N(n,{type:"Symbol",tag:e,description:t}),c||(n.description=t),n},oe=u?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof z},se=function(e,t,n){e===F&&se($,t,n),p(e);var i=b(t,!0);return p(n),_(Z,i)?(n.enumerable?(_(e,W)&&e[W][i]&&(e[W][i]=!1),n=v(n,{enumerable:m(0,!1)})):(_(e,W)||G(e,W,m(1,{})),e[W][i]=!0),ie(e,i,n)):G(e,i,n)},ce=function(e,t){p(e);var n=g(t),i=y(n).concat(_e(n));return j(i,(function(t){c&&!ae.call(n,t)||se(e,t,n[t])})),e},ae=function(e){var t=b(e,!0),n=Y.call(this,t);return!(this===F&&_(Z,t)&&!_($,t))&&(!(n||!_(this,t)||!_(Z,t)||_(this,W)&&this[W][t])||n)},ue=function(e,t){var n=g(e),i=b(t,!0);if(n!==F||!_(Z,i)||_($,i)){var r=V(n,i);return!r||!_(Z,i)||_(n,W)&&n[W][i]||(r.enumerable=!0),r}},le=function(e){var t=J(g(e)),n=[];return j(t,(function(e){_(Z,e)||_(A,e)||n.push(e)})),n},_e=function(e){var t=e===F,n=J(t?$:g(e)),i=[];return j(n,(function(e){!_(Z,e)||t&&!_(F,e)||i.push(Z[e])})),i};(a||(D((z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=C(e),n=function(e){this===F&&n.call($,e),_(this,W)&&_(this[W],t)&&(this[W][t]=!1),ie(this,t,m(1,e))};return c&&ne&&ie(F,t,{configurable:!0,set:n}),re(t,e)}).prototype,"toString",(function(){return q(this).tag})),D(z,"withoutSetter",(function(e){return re(C(e),e)})),T.f=ae,M.f=se,P.f=ue,E.f=w.f=le,O.f=_e,R.f=function(e){return re(B(e),e)},c&&(G(z.prototype,"description",{configurable:!0,get:function(){return q(this).description}}),s||D(F,"propertyIsEnumerable",ae,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!a,sham:!a},{Symbol:z}),j(y(ee),(function(e){L(e)})),i({target:"Symbol",stat:!0,forced:!a},{for:function(e){var t=String(e);if(_(Q,t))return Q[t];var n=z(t);return Q[t]=n,X[n]=t,n},keyFor:function(e){if(!oe(e))throw TypeError(e+" is not a symbol");if(_(X,e))return X[e]},useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),i({target:"Object",stat:!0,forced:!a,sham:!c},{create:function(e,t){return void 0===t?v(e):ce(v(e),t)},defineProperty:se,defineProperties:ce,getOwnPropertyDescriptor:ue}),i({target:"Object",stat:!0,forced:!a},{getOwnPropertyNames:le,getOwnPropertySymbols:_e}),i({target:"Object",stat:!0,forced:l((function(){O.f(1)}))},{getOwnPropertySymbols:function(e){return O.f(h(e))}}),H)&&i({target:"JSON",stat:!0,forced:!a||l((function(){var e=z();return"[null]"!=H([e])||"{}"!=H({a:e})||"{}"!=H(Object(e))}))},{stringify:function(e,t,n){for(var i,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(i=t,(d(t)||void 0!==e)&&!oe(e))return f(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!oe(t))return t}),r[1]=t,H.apply(null,r)}});z.prototype[K]||k(z.prototype,K,z.prototype.valueOf),x(z,"Symbol"),A[W]=!0},function(e,t,n){"use strict";var i=n(3),r=n(13),o=n(2),s=n(11),c=n(12),a=n(17).f,u=n(138),l=o.Symbol;if(r&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var _={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof f?new l(e):void 0===e?l():l(e);return""===e&&(_[t]=!0),t};u(f,l);var d=f.prototype=l.prototype;d.constructor=f;var p=d.toString,h="Symbol(test)"==String(l("test")),g=/^Symbol\((.*)\)[^)]+$/;a(d,"description",{configurable:!0,get:function(){var e=c(this)?this.valueOf():this,t=p.call(e);if(s(_,e))return"";var n=h?t.slice(7,-1):t.replace(g,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:f})}},function(e,t,n){n(188)("iterator")},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return c}));n(102),n(108),n(195),n(211);function i(){return new Promise((function(e){if("complete"===document.readyState)e();else{var t=function t(){e(),document.removeEventListener("DOMContentLoaded",t,!0),window.removeEventListener("load",t,!0)};document.addEventListener("DOMContentLoaded",t,!0),window.addEventListener("load",t,!0)}}))}function r(){return new Promise((function(e){"loading"!==document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",(function(){"loading"!==document.readyState&&e()}))}))}function o(e){var t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.appendChild(n.firstChild);return t}function s(e,t,n){e.style.opacity=0;var i=+new Date;!function r(){var o=+e.style.opacity+(new Date-i)/t;o>1&&(o=1),e.style.opacity=o,i=+new Date,+e.style.opacity<1?window.requestAnimationFrame&&requestAnimationFrame(r)||setTimeout(r,16):"function"==typeof n&&n()}()}function c(e,t,n){e.style.opacity=1;var i=+new Date;!function r(){var o=+e.style.opacity-(new Date-i)/t;o<0&&(o=0),e.style.opacity=o,i=+new Date,+e.style.opacity>0?window.requestAnimationFrame&&requestAnimationFrame(r)||setTimeout(r,16):"function"==typeof n&&n()}()}},function(e,t,n){var i=n(48),r=n(34),o=function(e){return function(t,n){var o,s,c=String(r(t)),a=i(n),u=c.length;return a<0||a>=u?e?"":void 0:(o=c.charCodeAt(a))<55296||o>56319||a+1===u||(s=c.charCodeAt(a+1))<56320||s>57343?e?c.charAt(a):o:e?c.slice(a,a+2):s-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},function(e,t,n){n(3)({target:"Function",proto:!0},{bind:n(247)})},function(e,t,n){"use strict";var i=n(3),r=n(12),o=n(59),s=n(93),c=n(23),a=n(29),u=n(109),l=n(9),_=n(117),f=n(50),d=_("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),h=l("species"),g=[].slice,b=Math.max;i({target:"Array",proto:!0,forced:!d||!p},{slice:function(e,t){var n,i,l,_=a(this),f=c(_.length),d=s(e,f),p=s(void 0===t?f:t,f);if(o(_)&&("function"!=typeof(n=_.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[h])&&(n=void 0):n=void 0,n===Array||void 0===n))return g.call(_,d,p);for(i=new(void 0===n?Array:n)(b(p-d,0)),l=0;d<p;d++,l++)d in _&&u(i,l,_[d]);return i.length=l,i}})},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){var i=n(142),r=n(73),o=n(9)("iterator");e.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||r[i(e)]}},function(e,t,n){"use strict";var i=n(3),r=n(245),o=n(113),s=n(143),c=n(77),a=n(20),u=n(25),l=n(9),_=n(58),f=n(73),d=n(190),p=d.IteratorPrototype,h=d.BUGGY_SAFARI_ITERATORS,g=l("iterator"),b=function(){return this};e.exports=function(e,t,n,l,d,m,v){r(n,t,l);var y,E,w,O=function(e){if(e===d&&D)return D;if(!h&&e in T)return T[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},P=t+" Iterator",M=!1,T=e.prototype,k=T[g]||T["@@iterator"]||d&&T[d],D=!h&&k||O(d),I="Array"==t&&T.entries||k;if(I&&(y=o(I.call(new e)),p!==Object.prototype&&y.next&&(_||o(y)===p||(s?s(y,p):"function"!=typeof y[g]&&a(y,g,b)),c(y,P,!0,!0),_&&(f[P]=b))),"values"==d&&k&&"values"!==k.name&&(M=!0,D=function(){return k.call(this)}),_&&!v||T[g]===D||a(T,g,D),f[t]=D,d)if(E={values:O("values"),keys:m?D:O("keys"),entries:O("entries")},v)for(w in E)!h&&!M&&w in T||u(T,w,E[w]);else i({target:t,proto:!0,forced:h||M},E);return E}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(83);var i=n(25),r=n(4),o=n(9),s=n(110),c=n(20),a=o("species"),u=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l="$0"==="a".replace(/./,"$0"),_=o("replace"),f=!!/./[_]&&""===/./[_]("a","$0"),d=!r((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,_){var p=o(e),h=!r((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),g=h&&!r((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[a]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!h||!g||"replace"===e&&(!u||!l||f)||"split"===e&&!d){var b=/./[p],m=n(p,""[e],(function(e,t,n,i,r){return t.exec===s?h&&!r?{done:!0,value:b.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),v=m[0],y=m[1];i(String.prototype,e,v),i(RegExp.prototype,p,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}_&&c(RegExp.prototype[p],"sham",!0)}},function(e,t,n){var i=n(41),r=n(110);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},function(e,t,n){var i=n(139),r=n(11),o=n(198),s=n(17).f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});r(t,e)||s(t,e,{value:o.f(e)})}},function(e,t,n){var i=n(9),r=n(76),o=n(17),s=i("unscopables"),c=Array.prototype;null==c[s]&&o.f(c,s,{configurable:!0,value:r(null)}),e.exports=function(e){c[s][e]=!0}},function(e,t,n){"use strict";var i,r,o,s=n(113),c=n(20),a=n(11),u=n(9),l=n(58),_=u("iterator"),f=!1;[].keys&&("next"in(o=[].keys())?(r=s(s(o)))!==Object.prototype&&(i=r):f=!0),null==i&&(i={}),l||a(i,_)||c(i,_,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:f}},function(e,t,n){var i=n(44),r=n(80),o=n(101),s=n(15);e.exports=i("Reflect","ownKeys")||function(e){var t=r.f(s(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t,n){var i=n(34),r="["+n(134)+"]",o=RegExp("^"+r+r+"*"),s=RegExp(r+r+"*$"),c=function(e){return function(t){var n=String(i(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(s,"")),n}};e.exports={start:c(1),end:c(2),trim:c(3)}},function(e,t,n){var i=n(9)("iterator"),r=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){r=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o={};o[i]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},function(e,t,n){var i=n(2),r=n(100),o=i.WeakMap;e.exports="function"==typeof o&&/native code/.test(r(o))},function(e,t,n){"use strict";var i,r,o,s,c=n(3),a=n(58),u=n(2),l=n(44),_=n(475),f=n(25),d=n(263),p=n(77),h=n(248),g=n(12),b=n(74),m=n(206),v=n(41),y=n(100),E=n(458),w=n(193),O=n(202),P=n(459).set,M=n(476),T=n(477),k=n(478),D=n(461),I=n(479),S=n(43),A=n(118),C=n(9),B=n(120),R=C("species"),L="Promise",x=S.get,U=S.set,j=S.getterFor(L),W=_,K=u.TypeError,N=u.document,q=u.process,F=l("fetch"),z=D.f,H=z,V="process"==v(q),G=!!(N&&N.createEvent&&u.dispatchEvent),J=A(L,(function(){if(!(y(W)!==String(W))){if(66===B)return!0;if(!V&&"function"!=typeof PromiseRejectionEvent)return!0}if(a&&!W.prototype.finally)return!0;if(B>=51&&/native code/.test(W))return!1;var e=W.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[R]=t,!(e.then((function(){}))instanceof t)})),Y=J||!w((function(e){W.all(e).catch((function(){}))})),Z=function(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t},$=function(e,t,n){if(!t.notified){t.notified=!0;var i=t.reactions;M((function(){for(var r=t.value,o=1==t.state,s=0;i.length>s;){var c,a,u,l=i[s++],_=o?l.ok:l.fail,f=l.resolve,d=l.reject,p=l.domain;try{_?(o||(2===t.rejection&&te(e,t),t.rejection=1),!0===_?c=r:(p&&p.enter(),c=_(r),p&&(p.exit(),u=!0)),c===l.promise?d(K("Promise-chain cycle")):(a=Z(c))?a.call(c,f,d):f(c)):d(r)}catch(e){p&&!u&&p.exit(),d(e)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&X(e,t)}))}},Q=function(e,t,n){var i,r;G?((i=N.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),u.dispatchEvent(i)):i={promise:t,reason:n},(r=u["on"+e])?r(i):"unhandledrejection"===e&&k("Unhandled promise rejection",n)},X=function(e,t){P.call(u,(function(){var n,i=t.value;if(ee(t)&&(n=I((function(){V?q.emit("unhandledRejection",i,e):Q("unhandledrejection",e,i)})),t.rejection=V||ee(t)?2:1,n.error))throw n.value}))},ee=function(e){return 1!==e.rejection&&!e.parent},te=function(e,t){P.call(u,(function(){V?q.emit("rejectionHandled",e):Q("rejectionhandled",e,t.value)}))},ne=function(e,t,n,i){return function(r){e(t,n,r,i)}},ie=function(e,t,n,i){t.done||(t.done=!0,i&&(t=i),t.value=n,t.state=2,$(e,t,!0))},re=function(e,t,n,i){if(!t.done){t.done=!0,i&&(t=i);try{if(e===n)throw K("Promise can't be resolved itself");var r=Z(n);r?M((function(){var i={done:!1};try{r.call(n,ne(re,e,i,t),ne(ie,e,i,t))}catch(n){ie(e,i,n,t)}})):(t.value=n,t.state=1,$(e,t,!1))}catch(n){ie(e,{done:!1},n,t)}}};J&&(W=function(e){m(this,W,L),b(e),i.call(this);var t=x(this);try{e(ne(re,this,t),ne(ie,this,t))}catch(e){ie(this,t,e)}},(i=function(e){U(this,{type:L,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=d(W.prototype,{then:function(e,t){var n=j(this),i=z(O(this,W));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=V?q.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&$(this,n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new i,t=x(e);this.promise=e,this.resolve=ne(re,e,t),this.reject=ne(ie,e,t)},D.f=z=function(e){return e===W||e===o?new r(e):H(e)},a||"function"!=typeof _||(s=_.prototype.then,f(_.prototype,"then",(function(e,t){var n=this;return new W((function(e,t){s.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof F&&c({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return T(W,F.apply(u,arguments))}}))),c({global:!0,wrap:!0,forced:J},{Promise:W}),p(W,L,!1,!0),h(L),o=l(L),c({target:L,stat:!0,forced:J},{reject:function(e){var t=z(this);return t.reject.call(void 0,e),t.promise}}),c({target:L,stat:!0,forced:a||J},{resolve:function(e){return T(a&&this===o?W:this,e)}}),c({target:L,stat:!0,forced:Y},{all:function(e){var t=this,n=z(t),i=n.resolve,r=n.reject,o=I((function(){var n=b(t.resolve),o=[],s=0,c=1;E(e,(function(e){var a=s++,u=!1;o.push(void 0),c++,n.call(t,e).then((function(e){u||(u=!0,o[a]=e,--c||i(o))}),r)})),--c||i(o)}));return o.error&&r(o.value),n.promise},race:function(e){var t=this,n=z(t),i=n.reject,r=I((function(){var r=b(t.resolve);E(e,(function(e){r.call(t,e).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}})},function(e,t,n){"use strict";var i=n(3),r=n(116).indexOf,o=n(97),s=n(50),c=[].indexOf,a=!!c&&1/[1].indexOf(1,-0)<0,u=o("indexOf"),l=s("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:a||!u||!l},{indexOf:function(e){return a?c.apply(this,arguments)||0:r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var i=n(152).charAt;e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},function(e,t,n){var i=n(9);t.f=i},function(e,t,n){var i=n(9),r=n(73),o=i("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||s[o]===e)}},function(e,t,n){var i=n(3),r=n(246);i({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},function(e,t,n){"use strict";var i=n(3),r=n(72),o=n(29),s=n(97),c=[].join,a=r!=Object,u=s("join",",");i({target:"Array",proto:!0,forced:a||!u},{join:function(e){return c.call(o(this),void 0===e?",":e)}})},function(e,t,n){var i=n(15),r=n(74),o=n(9)("species");e.exports=function(e,t){var n,s=i(e).constructor;return void 0===s||null==(n=i(s)[o])?t:r(n)}},function(e,t,n){"use strict";var i=n(4);function r(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=i((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=i((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){var i=n(44);e.exports=i("document","documentElement")},function(e,t,n){var i=n(4);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){var i=n(3),r=n(454);i({global:!0,forced:parseInt!=r},{parseInt:r})},function(e,t,n){var i=n(13),r=n(17),o=n(15),s=n(107);e.exports=i?Object.defineProperties:function(e,t){o(e);for(var n,i=s(t),c=i.length,a=0;c>a;)r.f(e,n=i[a++],t[n]);return e}},function(e,t,n){var i=n(3),r=n(251);i({target:"Array",stat:!0,forced:!n(193)((function(e){Array.from(e)}))},{from:r})},function(e,t,n){var i=n(15);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&i(o.call(e)),t}}},function(e,t,n){var i=n(3),r=n(2),o=n(145),s=[].slice,c=function(e){return function(t,n){var i=arguments.length>2,r=i?s.call(arguments,2):void 0;return e(i?function(){("function"==typeof t?t:Function(t)).apply(this,r)}:t,n)}};i({global:!0,bind:!0,forced:/MSIE .\./.test(o)},{setTimeout:c(r.setTimeout),setInterval:c(r.setInterval)})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(190).IteratorPrototype,r=n(76),o=n(42),s=n(77),c=n(73),a=function(){return this};e.exports=function(e,t,n){var u=t+" Iterator";return e.prototype=r(i,{next:o(1,n)}),s(e,u,!1,!0),c[u]=a,e}},function(e,t,n){"use strict";var i=n(13),r=n(4),o=n(107),s=n(101),c=n(99),a=n(26),u=n(72),l=Object.assign,_=Object.defineProperty;e.exports=!l||r((function(){if(i&&1!==l({b:1},l(_({},"a",{enumerable:!0,get:function(){_(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||"abcdefghijklmnopqrst"!=o(l({},t)).join("")}))?function(e,t){for(var n=a(e),r=arguments.length,l=1,_=s.f,f=c.f;r>l;)for(var d,p=u(arguments[l++]),h=_?o(p).concat(_(p)):o(p),g=h.length,b=0;g>b;)d=h[b++],i&&!f.call(p,d)||(n[d]=p[d]);return n}:l},function(e,t,n){"use strict";var i=n(74),r=n(12),o=[].slice,s={},c=function(e,t,n){if(!(t in s)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";s[t]=Function("C,a","return new C("+i.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=i(this),n=o.call(arguments,1),s=function(){var i=n.concat(o.call(arguments));return this instanceof s?c(t,i.length,i):t.apply(e,i)};return r(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t,n){"use strict";var i=n(44),r=n(17),o=n(9),s=n(13),c=o("species");e.exports=function(e){var t=i(e),n=r.f;s&&t&&!t[c]&&n(t,c,{configurable:!0,get:function(){return this}})}},function(e,t,n){var i;!function(r,o){"use strict";var s="model",c="name",a="type",u="vendor",l="version",_="mobile",f="tablet",d="smarttv",p={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},h={rgx:function(e,t){for(var n,i,r,o,s,c,a=0;a<t.length&&!s;){var u=t[a],l=t[a+1];for(n=i=0;n<u.length&&!s;)if(s=u[n++].exec(e))for(r=0;r<l.length;r++)c=s[++i],"object"==typeof(o=l[r])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,c):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=c?c.replace(o[1],o[2]):void 0:this[o[0]]=c?o[1].call(this,c,o[2]):void 0:4==o.length&&(this[o[0]]=c?o[3].call(this,c.replace(o[1],o[2])):void 0):this[o]=c||void 0;a+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(p.has(t[n][i],e))return"?"===n?void 0:n}else if(p.has(t[n],e))return"?"===n?void 0:n;return e}},g={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},b={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[c,l],[/(opios)[\/\s]+([\w\.]+)/i],[[c,"Opera Mini"],l],[/\s(opr)\/([\w\.]+)/i],[[c,"Opera"],l],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[c,l],[/(konqueror)\/([\w\.]+)/i],[[c,"Konqueror"],l],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[c,"IE"],l],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[c,"Edge"],l],[/(yabrowser)\/([\w\.]+)/i],[[c,"Yandex"],l],[/(Avast)\/([\w\.]+)/i],[[c,"Avast Secure Browser"],l],[/(AVG)\/([\w\.]+)/i],[[c,"AVG Secure Browser"],l],[/(puffin)\/([\w\.]+)/i],[[c,"Puffin"],l],[/(focus)\/([\w\.]+)/i],[[c,"Firefox Focus"],l],[/(opt)\/([\w\.]+)/i],[[c,"Opera Touch"],l],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[c,"UCBrowser"],l],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],l],[/(windowswechat qbcore)\/([\w\.]+)/i],[[c,"WeChat(Win) Desktop"],l],[/(micromessenger)\/([\w\.]+)/i],[[c,"WeChat"],l],[/(brave)\/([\w\.]+)/i],[[c,"Brave"],l],[/(qqbrowserlite)\/([\w\.]+)/i],[c,l],[/(QQ)\/([\d\.]+)/i],[c,l],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[c,l],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[c,l],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[c,l],[/(MetaSr)[\/\s]?([\w\.]+)/i],[c],[/(LBBROWSER)/i],[c],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[l,[c,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[l,[c,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[c,l],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[l,[c,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[c,/(.+)/,"$1 WebView"],l],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[c,/(.+(?:g|us))(.+)/,"$1 $2"],l],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[l,[c,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[c,"Sailfish Browser"],l],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[c,l],[/(dolfin)\/([\w\.]+)/i],[[c,"Dolphin"],l],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[c,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[c,"Chrome"],l],[/(coast)\/([\w\.]+)/i],[[c,"Opera Coast"],l],[/fxios\/([\w\.-]+)/i],[l,[c,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[l,[c,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[l,c],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[c,"GSA"],l],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[c,[l,h.str,g.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[c,l],[/(navigator|netscape)\/([\w\.-]+)/i],[[c,"Netscape"],l],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[c,l]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",p.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",p.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",p.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[s,u,[a,f]],[/applecoremedia\/[\w\.]+ \((ipad)/],[s,[u,"Apple"],[a,f]],[/(apple\s{0,1}tv)/i],[[s,"Apple TV"],[u,"Apple"],[a,d]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[u,s,[a,f]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[s,[u,"Amazon"],[a,f]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[s,h.str,g.device.amazon.model],[u,"Amazon"],[a,_]],[/android.+aft([bms])\sbuild/i],[s,[u,"Amazon"],[a,d]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[s,u,[a,_]],[/\((ip[honed|\s\w*]+);/i],[s,[u,"Apple"],[a,_]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[u,s,[a,_]],[/\(bb10;\s(\w+)/i],[s,[u,"BlackBerry"],[a,_]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[s,[u,"Asus"],[a,f]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[u,"Sony"],[s,"Xperia Tablet"],[a,f]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[s,[u,"Sony"],[a,_]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[u,s,[a,"console"]],[/android.+;\s(shield)\sbuild/i],[s,[u,"Nvidia"],[a,"console"]],[/(playstation\s[34portablevi]+)/i],[s,[u,"Sony"],[a,"console"]],[/(sprint\s(\w+))/i],[[u,h.str,g.device.sprint.vendor],[s,h.str,g.device.sprint.model],[a,_]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[u,[s,/_/g," "],[a,_]],[/(nexus\s9)/i],[s,[u,"HTC"],[a,f]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[s,[u,"Huawei"],[a,_]],[/android.+(bah2?-a?[lw]\d{2})/i],[s,[u,"Huawei"],[a,f]],[/(microsoft);\s(lumia[\s\w]+)/i],[u,s,[a,_]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[s,[u,"Microsoft"],[a,"console"]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[u,"Microsoft"],[a,_]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[s,[u,"Motorola"],[a,_]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[s,[u,"Motorola"],[a,f]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[u,p.trim],[s,p.trim],[a,d]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[u,"Samsung"],[a,d]],[/\(dtv[\);].+(aquos)/i],[s,[u,"Sharp"],[a,d]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[u,"Samsung"],s,[a,f]],[/smart-tv.+(samsung)/i],[u,[a,d],s],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[u,"Samsung"],s,[a,_]],[/sie-(\w*)/i],[s,[u,"Siemens"],[a,_]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[u,"Nokia"],s,[a,_]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[s,[u,"Acer"],[a,f]],[/android.+([vl]k\-?\d{3})\s+build/i],[s,[u,"LG"],[a,f]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[u,"LG"],s,[a,f]],[/(lg) netcast\.tv/i],[u,s,[a,d]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[s,[u,"LG"],[a,_]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[u,s,[a,f]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[s,[u,"Lenovo"],[a,f]],[/(lenovo)[_\s-]?([\w-]+)/i],[u,s,[a,_]],[/linux;.+((jolla));/i],[u,s,[a,_]],[/((pebble))app\/[\d\.]+\s/i],[u,s,[a,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[u,s,[a,_]],[/crkey/i],[[s,"Chromecast"],[u,"Google"],[a,d]],[/android.+;\s(glass)\s\d/i],[s,[u,"Google"],[a,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[s,[u,"Google"],[a,f]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[s,[u,"Google"],[a,_]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[s,/_/g," "],[u,"Xiaomi"],[a,_]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[s,/_/g," "],[u,"Xiaomi"],[a,f]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[s,[u,"Meizu"],[a,_]],[/(mz)-([\w-]{2,})/i],[[u,"Meizu"],s,[a,_]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[s,[u,"OnePlus"],[a,_]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[s,[u,"RCA"],[a,f]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[s,[u,"Dell"],[a,f]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[s,[u,"Verizon"],[a,f]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[u,"Barnes & Noble"],s,[a,f]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[s,[u,"NuVision"],[a,f]],[/android.+;\s(k88)\sbuild/i],[s,[u,"ZTE"],[a,f]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[s,[u,"Swiss"],[a,_]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[s,[u,"Swiss"],[a,f]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[s,[u,"Zeki"],[a,f]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[u,"Dragon Touch"],s,[a,f]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[s,[u,"Insignia"],[a,f]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[s,[u,"NextBook"],[a,f]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[u,"Voice"],s,[a,_]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[u,"LvTel"],s,[a,_]],[/android.+;\s(PH-1)\s/i],[s,[u,"Essential"],[a,_]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[s,[u,"Envizen"],[a,f]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[u,s,[a,f]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[s,[u,"MachSpeed"],[a,f]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[u,s,[a,f]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[s,[u,"Rotor"],[a,f]],[/android.+(KS(.+))\s+build/i],[s,[u,"Amazon"],[a,f]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[u,s,[a,f]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[a,p.lowerize],u,s],[/[\s\/\(](smart-?tv)[;\)]/i],[[a,d]],[/(android[\w\.\s\-]{0,9});.+build/i],[s,[u,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[l,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[l,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[c,l],[/rv\:([\w\.]{1,9}).+(gecko)/i],[l,c]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[c,l],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[c,[l,h.str,g.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[c,"Windows"],[l,h.str,g.os.windows.version]],[/\((bb)(10);/i],[[c,"BlackBerry"],l],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[c,l],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[c,"Symbian"],l],[/\((series40);/i],[c],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[c,"Firefox OS"],l],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[c,l],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[c,"Chromium OS"],l],[/(sunos)\s?([\w\.\d]*)/i],[[c,"Solaris"],l],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[c,l],[/(haiku)\s(\w+)/i],[c,l],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[l,/_/g,"."],[c,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[c,"Mac OS"],[l,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[c,l]]},m=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof m))return new m(e,t).getResult();var n=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=t?p.extend(b,t):b;return this.getBrowser=function(){var e={name:void 0,version:void 0};return h.rgx.call(e,n,i.browser),e.major=p.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return h.rgx.call(e,n,i.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return h.rgx.call(e,n,i.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return h.rgx.call(e,n,i.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return h.rgx.call(e,n,i.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};m.VERSION="0.7.21",m.BROWSER={NAME:c,MAJOR:"major",VERSION:l},m.CPU={ARCHITECTURE:"architecture"},m.DEVICE={MODEL:s,VENDOR:u,TYPE:a,CONSOLE:"console",MOBILE:_,SMARTTV:d,TABLET:f,WEARABLE:"wearable",EMBEDDED:"embedded"},m.ENGINE={NAME:c,VERSION:l},m.OS={NAME:c,VERSION:l},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=m),t.UAParser=m):void 0===(i=function(){return m}.call(t,n,t,e))||(e.exports=i);var v=r&&(r.jQuery||r.Zepto);if(v&&!v.ua){var y=new m;v.ua=y.getResult(),v.ua.get=function(){return y.getUA()},v.ua.set=function(e){y.setUA(e);var t=y.getResult();for(var n in t)v.ua[n]=t[n]}}}("object"==typeof window?window:this)},,function(e,t,n){"use strict";var i=n(95),r=n(26),o=n(210),s=n(199),c=n(23),a=n(109),u=n(156);e.exports=function(e){var t,n,l,_,f,d,p=r(e),h="function"==typeof this?this:Array,g=arguments.length,b=g>1?arguments[1]:void 0,m=void 0!==b,v=u(p),y=0;if(m&&(b=i(b,g>2?arguments[2]:void 0,2)),null==v||h==Array&&s(v))for(n=new h(t=c(p.length));t>y;y++)d=m?b(p[y],y):p[y],a(n,y,d);else for(f=(_=v.call(p)).next,n=new h;!(l=f.call(_)).done;y++)d=m?o(_,b,[l.value,y],!0):l.value,a(n,y,d);return n.length=y,n}},function(e,t,n){var i=n(12);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){"use strict";var i=n(186),r=n(15),o=n(26),s=n(23),c=n(48),a=n(34),u=n(197),l=n(187),_=Math.max,f=Math.min,d=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,h=/\$([$&'`]|\d\d?)/g;i("replace",2,(function(e,t,n,i){var g=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=i.REPLACE_KEEPS_$0,m=g?"$":"$0";return[function(n,i){var r=a(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,r,i):t.call(String(r),n,i)},function(e,i){if(!g&&b||"string"==typeof i&&-1===i.indexOf(m)){var o=n(t,e,this,i);if(o.done)return o.value}var a=r(e),d=String(this),p="function"==typeof i;p||(i=String(i));var h=a.global;if(h){var y=a.unicode;a.lastIndex=0}for(var E=[];;){var w=l(a,d);if(null===w)break;if(E.push(w),!h)break;""===String(w[0])&&(a.lastIndex=u(d,s(a.lastIndex),y))}for(var O,P="",M=0,T=0;T<E.length;T++){w=E[T];for(var k=String(w[0]),D=_(f(c(w.index),d.length),0),I=[],S=1;S<w.length;S++)I.push(void 0===(O=w[S])?O:String(O));var A=w.groups;if(p){var C=[k].concat(I,D,d);void 0!==A&&C.push(A);var B=String(i.apply(void 0,C))}else B=v(k,d,D,I,A,i);D>=M&&(P+=d.slice(M,D)+B,M=D+k.length)}return P+d.slice(M)}];function v(e,n,i,r,s,c){var a=i+e.length,u=r.length,l=h;return void 0!==s&&(s=o(s),l=p),t.call(c,l,(function(t,o){var c;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,i);case"'":return n.slice(a);case"<":c=s[o.slice(1,-1)];break;default:var l=+o;if(0===l)return t;if(l>u){var _=d(l/10);return 0===_?t:_<=u?void 0===r[_-1]?o.charAt(1):r[_-1]+o.charAt(1):t}c=r[l-1]}return void 0===c?"":c}))}}))},function(e,t,n){n(3)({target:"Object",stat:!0,sham:!n(13)},{create:n(76)})},function(e,t,n){var i=n(3),r=n(4),o=n(26),s=n(113),c=n(205);i({target:"Object",stat:!0,forced:r((function(){s(1)})),sham:!c},{getPrototypeOf:function(e){return s(o(e))}})},function(e,t,n){n(3)({target:"Object",stat:!0},{setPrototypeOf:n(143)})},function(e,t,n){var i=n(3),r=n(44),o=n(74),s=n(15),c=n(12),a=n(76),u=n(247),l=n(4),_=r("Reflect","construct"),f=l((function(){function e(){}return!(_((function(){}),[],e)instanceof e)})),d=!l((function(){_((function(){}))})),p=f||d;i({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(e,t){o(e),s(t);var n=arguments.length<3?e:o(arguments[2]);if(d&&!f)return _(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(u.apply(e,i))}var r=n.prototype,l=a(c(r)?r:Object.prototype),p=Function.apply.call(e,l,t);return c(p)?p:l}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(148),n(149),n(150),n(91),n(102),n(254),n(255),n(256),n(108),n(257),n(137),n(98),n(144);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(n(61).a)},,function(e,t,n){var i=n(29),r=n(80).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return r(e)}catch(e){return s.slice()}}(e):r(i(e))}},function(e,t,n){"use strict";var i=n(136),r=n(142);e.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},function(e,t,n){"use strict";var i=n(3),r=n(192).trim;i({target:"String",proto:!0,forced:n(456)("trim")},{trim:function(){return r(this)}})},function(e,t,n){var i=n(25);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},function(e,t,n){"use strict";var i=n(3),r=n(51).map,o=n(117),s=n(50),c=o("map"),a=s("map");i({target:"Array",proto:!0,forced:!c||!a},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},,function(e,t,n){"use strict";var i=n(3),r=n(51).filter,o=n(117),s=n(50),c=o("filter"),a=s("filter");i({target:"Array",proto:!0,forced:!c||!a},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var i=n(3),r=n(26),o=n(107);i({target:"Object",stat:!0,forced:n(4)((function(){o(1)}))},{keys:function(e){return o(r(e))}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n(266),n(82),n(196),n(201),n(575),n(264),n(468),n(102),n(112),n(81),n(108),n(195),n(465),n(83),n(137),n(467),n(90);var i=n(1),r=n(534),o=(n(91),n(154),n(494),n(564),n(504),n(207),n(98),n(469),n(144),n(484),n(49));function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t;try{if("localStorage"in window&&(localStorage.getItem("push-subscription-status")&&!localStorage.getItem("cleverpush-subscription-status")&&localStorage.setItem("cleverpush-subscription-status",localStorage.getItem("push-subscription-status")),localStorage.getItem("push-subscription-id")&&!localStorage.getItem("cleverpush-subscription-id")&&localStorage.setItem("cleverpush-subscription-id",localStorage.getItem("push-subscription-id")),"allowed"!==localStorage.getItem("cleverpush-subscription-status"))){var n=Date.now();if(void 0===this.config.alertHoursDeny&&(this.config.alertHoursDeny=8760),localStorage.getItem("cleverpush-deny-time")&&void 0!==this.config.alertHoursDeny){var i=parseInt(localStorage.getItem("cleverpush-deny-time"),10),r=parseInt(this.config.alertHoursDeny,10);isNaN(i)||isNaN(r)||i+60*r*60*1e3<n&&(localStorage.removeItem("push-subscription-status"),localStorage.removeItem("cleverpush-deny-time"),"denied"===localStorage.getItem("cleverpush-subscription-status")?localStorage.setItem("cleverpush-subscription-status","was-denied"):localStorage.removeItem("cleverpush-subscription-status"))}if(localStorage.getItem("cleverpush-close-time")&&void 0!==this.config.alertHoursClose){var o=parseInt(localStorage.getItem("cleverpush-close-time"),10),s=parseInt(this.config.alertHoursClose,10);isNaN(o)||isNaN(s)||o+60*s*60*1e3<n&&(localStorage.removeItem("push-subscription-status"),localStorage.removeItem("cleverpush-subscription-status"),localStorage.removeItem("cleverpush-close-time"))}}}catch(e){}}var t,n,r;return t=e,(n=[{key:"dbOpenError",value:function(e){var t=this;e.message&&e.message.toString().indexOf("VersionError")>-1?(i.b.info("deleting db"),window.indexedDB.deleteDatabase("cleverpush").onsuccess=function(){var e=t.db.open();e.onsuccess=function(){return t.dbOpenSuccess(e)},e.onerror=function(e){i.b.warn(e)}}):e.name&&"NoSuchDatabaseError"===e.name||i.b.warn(e)}},{key:"dbOpenSuccess",value:function(e){var t=this;this.db=e.result,this.db.onerror=function(e){i.b.warn("IndexedDB error occured",e)},this.db.onversionchange=function(e){if(null===e.newVersion)e.target.close();else{t.db.close();var n=window.indexedDB.open("cleverpush",40);n.onsuccess=function(){return t.dbOpenSuccess(n)},n.onerror=t.dbOpenError}}}},{key:"initDb",value:function(){var e=this;if(!this.db&&window.indexedDB)try{var t=window.indexedDB.open("cleverpush",40);t.onsuccess=function(){return e.dbOpenSuccess(t)},t.onerror=this.dbOpenError,t.onupgradeneeded=function(e){var t=e.target.result,n=t.createObjectStore("notifications",{keyPath:"id"});n.createIndex("id","id",{unique:!0}),n.createIndex("url","url",{unique:!1}),n.createIndex("clicked","clicked",{unique:!1}),n.createIndex("title","title",{unique:!1}),n.createIndex("text","text",{unique:!1}),n.createIndex("icon","icon",{unique:!1}),n.createIndex("subscriptionId","subscriptionId",{unique:!1}),n.createIndex("channelId","channelId",{unique:!1}),n.createIndex("autoHide","autoHide",{unique:!1}),n.createIndex("markedAsDelivered","markedAsDelivered",{unique:!1}),n.createIndex("markedAsClicked","markedAsClicked",{unique:!1}),n.createIndex("clickedAction","clickedAction",{unique:!1}),n.createIndex("deliveredAt","deliveredAt",{unique:!1});var i=t.createObjectStore("subscription",{keyPath:"id"});i.createIndex("id","id",{unique:!0}),i.createIndex("channelId","channelId",{unique:!1})}}catch(e){i.b.info("initDb err",e)}}},{key:"getNotifications",value:function(){var e=this;return new Promise((function(t){var n=[];if(e.db){var i=e.db.transaction(["notifications"]).objectStore("notifications"),r=IDBKeyRange.lowerBound(0),o=i.openCursor(r);o.onsuccess=function(e){var i=e.target.result;0!=!!i?(n.push(i.value),i.continue()):t(n)},o.onerror=function(){return t(n)}}else t(n)}))}},{key:"getNotification",value:function(e){var t=this;return new Promise((function(n){if(t.db){var i=t.db.transaction(["notifications"]).objectStore("notifications").get(e);i.onsuccess=function(e){var t=e.target.result;n(t)},i.onerror=function(){return n(null)}}else n(null)}))}},{key:"addNotification",value:function(e){var t=this;return new Promise((function(n,i){if(t.db){var r=t.db.transaction(["notifications"],"readwrite").objectStore("notifications").put(e);r.onsuccess=n,r.onerror=i}else n(null)}))}},{key:"deleteNotification",value:function(e){var t=this;return new Promise((function(n,i){if(t.db){var r=t.db.transaction(["notifications"],"readwrite").objectStore("notifications").delete(e);r.onsuccess=n,r.onerror=i}else n(null)}))}},{key:"canSubscribe",value:function(){try{return new Promise((function(e){try{var t=localStorage.getItem("cleverpush-subscription-status"),n=sessionStorage.getItem("cleverpush-subscription-status");e("denied"!==t&&"unsubscribed"!==t&&"pending"!==t&&"denied"!==n)}catch(t){e(!0)}}))}catch(e){return Promise.resolve(!0)}}},{key:"isSubscribed",value:function(e,t,n){var i=this;try{if(void 0!==t&&t){var r=localStorage.getItem("cleverpush-subscription-status");return!(!r||"denied"===r||"unsubscribed"===r||"pending"===r||!this.getSubscriptionId())}return new Promise((function(t){try{var r=localStorage.getItem("cleverpush-subscription-status");t(r&&"denied"!==r&&"unsubscribed"!==r&&"pending"!==r?!!e||!!i.getSubscriptionId():!(void 0===n||!n||!i.getSubscriptionId()))}catch(e){t(!1)}}))}catch(e){return Promise.resolve(!0)}}},{key:"getSubscriptionId",value:function(){var e;try{e=localStorage.getItem("cleverpush-subscription-id")}catch(e){}if(!e&&Object(o.l)()){var t=new URLSearchParams(location.search.slice(1));t&&(e=t.get("subscriptionId"))}return e}},{key:"getLastSession",value:function(){var e;try{e=localStorage.getItem("cleverpush-last-session")}catch(e){}var t={};if(e)try{t=JSON.parse(e)}catch(e){}return t}},{key:"setLastSession",value:function(e){try{localStorage.setItem("cleverpush-last-session",JSON.stringify(e))}catch(e){}}},{key:"setSubscribed",value:function(e,t){var n=this;if(e){var r=localStorage.getItem("cleverpush-subscription-id");if(r&&r!==e&&localStorage.setItem("cleverpush-subscription-id-old",r),localStorage.setItem("cleverpush-subscription-id",e),void 0!==t&&t||localStorage.setItem("cleverpush-subscription-status","allowed"),this.db)try{this.db.transaction(["subscription"],"readwrite").objectStore("subscription").clear().onsuccess=function(){n.db.transaction(["subscription"],"readwrite").objectStore("subscription").put({id:e,channelId:n.config.channelId})}}catch(e){i.b.info("setSubscribed db error",e)}}}},{key:"getFacebookUserRef",value:function(){try{return localStorage.getItem("cleverpush-facebook-user-ref")}catch(e){}}},{key:"setFacebookUserRef",value:function(e){e&&localStorage.setItem("cleverpush-facebook-user-ref",e)}},{key:"setAllowed",value:function(){localStorage.setItem("cleverpush-subscription-status","allowed")}},{key:"setPending",value:function(){localStorage.setItem("cleverpush-subscription-status","pending")}},{key:"setDenied",value:function(){localStorage.setItem("cleverpush-subscription-status","denied"),localStorage.setItem("cleverpush-deny-time",Date.now())}},{key:"setUnsubscribed",value:function(e){var t=localStorage.getItem("cleverpush-subscription-id");if(t&&localStorage.setItem("cleverpush-subscription-id-old",t),localStorage.removeItem("push-subscription-id"),localStorage.removeItem("cleverpush-subscription-id"),localStorage.removeItem("cleverpush-last-sync"),localStorage.removeItem("cleverpush-facebook-user-ref"),e||(localStorage.setItem("cleverpush-subscription-status","unsubscribed"),localStorage.setItem("cleverpush-deny-time",Date.now())),this.db)try{this.db.transaction(["subscription"],"readwrite").objectStore("subscription").clear()}catch(e){i.b.info("setUnsubscribed db error",e)}}},{key:"checkIfShouldSync",value:function(){var e=this;return new Promise((function(t){try{var n=localStorage.getItem("cleverpush-last-sync");if(e.getSubscriptionId())if(n){var i=parseInt(n,10);isNaN(i)?t(!0):t(i+1728e5<=Date.now())}else t(!0);else t(!0)}catch(e){t(!0)}}))}},{key:"setSynced",value:function(){localStorage.setItem("cleverpush-last-sync",Date.now())}},{key:"checkIfShouldUpdateWorker",value:function(){var e="undefined"!=typeof VERSION?VERSION:"";return new Promise((function(t){try{var n=localStorage.getItem("cleverpush-last-worker-update"),i=localStorage.getItem("cleverpush-last-worker-version");if(n)if(e)t(i!==e);else{var r=parseInt(n,10);isNaN(r)?t(!0):t(r+864e5<=Date.now())}else t(!0)}catch(e){t(!0)}}))}},{key:"setWorkerUpdated",value:function(){localStorage.setItem("cleverpush-last-worker-update",Date.now()),localStorage.setItem("cleverpush-last-worker-version","undefined"!=typeof VERSION?VERSION:"")}},{key:"getVisits",value:function(){var e;try{e=localStorage.getItem("cleverpush-visits")}catch(e){}var t=0;return e&&(t=parseInt(e,10),isNaN(t)&&(t=0)),t}},{key:"incrementVisits",value:function(){var e=this.getVisits();e+=1,localStorage.setItem("cleverpush-visits",e)}},{key:"setTopics",value:function(e){return i.b.debug("storageManager.setTopics",e),new Promise((function(t){localStorage.setItem("cleverpush-topics",JSON.stringify(e)),t(!0)}))}},{key:"getTopics",value:function(){var e=localStorage.getItem("cleverpush-topics");if(!e)return Promise.resolve([]);try{var t=JSON.parse(e);return Promise.resolve(t||[])}catch(e){return Promise.resolve([])}}},{key:"getTagDates",value:function(){var e={};if(localStorage.getItem("cleverpush-tag-dates"))try{e=JSON.parse(localStorage.getItem("cleverpush-tag-dates"))}catch(e){}return e}},{key:"getTagDate",value:function(e){var t=(this.getTagDates()||{})[e];return t?new Date(t):null}},{key:"setTags",value:function(e){var t=this;return new Promise((function(n){localStorage.setItem("cleverpush-tags",JSON.stringify(e));var i=t.getTagDates()||{};e.forEach((function(e){i[e]=(new Date).toISOString()})),localStorage.setItem("cleverpush-tag-dates",JSON.stringify(i)),n(!0)}))}},{key:"addTag",value:function(e){var t=this;return this.getTags().then((function(n){return n.indexOf(e)<0&&n.push(e),t.setTags(n)}))}},{key:"removeTag",value:function(e){var t=this;return this.getTags().then((function(n){var i=n.indexOf(e);return i>-1?(n.splice(i,1),t.setTags(n)):Promise.resolve()}))}},{key:"getTags",value:function(){var e=localStorage.getItem("cleverpush-tags");if(!e)return Promise.resolve([]);try{var t=JSON.parse(e);return Promise.resolve(t||[])}catch(e){return Promise.resolve([])}}},{key:"hasTag",value:function(e){return this.getTags().then((function(t){return Promise.resolve(t.indexOf(e)>-1)}))}},{key:"setClosed",value:function(){localStorage.setItem("cleverpush-close-time",Date.now()),void 0!==this.config.alertHoursClose?localStorage.setItem("cleverpush-subscription-status","denied"):localStorage.removeItem("cleverpush-subscription-status")}},{key:"setTempBlocked",value:function(){sessionStorage.setItem("cleverpush-subscription-status","denied")}}])&&s(t.prototype,n),r&&s(t,r),e}(),a=n(55),u=n(61);function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _=function(){function e(t,n,i){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.api=n,this.triggerEvent=i,this.storageManager=new c(t),this.subscribed=!1,this.initialTags=[];try{this.getTopics().then((function(e){return r.topics=e}))}catch(e){}}var t,n,s;return t=e,(n=[{key:"isSubscribed",value:function(){var e=this;return new Promise((function(t){return"PREVIEW"===e.config.env?t(!1):"granted"===window.Notification.permission&&navigator.serviceWorker&&navigator.serviceWorker.controller?e.getActiveWorkerRegistration().then((function(n){return n.pushManager.getSubscription().then((function(n){if(n)return e.storageManager.isSubscribed().then((function(n){i.b.debug("manager subscribed = "+n+" (2)"),e.subscribed=n,t(n)}));i.b.debug("manager subscribed = false (1)"),e.subscribed=!1,t(!1)}))})).catch((function(n){n&&i.b.error(n),i.b.debug("manager subscribed = false (3)"),e.subscribed=!1,t(!1)})):(i.b.debug("manager subscribed = false (4)"),e.subscribed=!1,void t(!1))}))}},{key:"canSubscribe",value:function(){var e=this;return new Promise((function(t,n){e.storageManager.canSubscribe().then((function(i){i?e.isSubscribed().then((function(e){e?n(new u.a("User is already subscribed","subscribed")):"denied"===Notification.permission?n(new u.a("User denied notifications","denied")):t(!0)})):n(new u.a("User has manually unsubscribed or denied notifications","unsubscribed"))})).catch((function(e){n(e)}))}))}},{key:"subscribe",value:function(){}},{key:"subscribeForce",value:function(){this.subscribe()}},{key:"unsubscribe",value:function(e,t){var n=this,i=function(){return n.storageManager.setUnsubscribed(e),n.triggerEvent(a.a.UNSUBSCRIBED),navigator.serviceWorker&&navigator.serviceWorker.controller?n.getActiveWorkerRegistration().then((function(e){return e.pushManager})).then((function(e){return e.getSubscription()})).then((function(e){if(e)return e.unsubscribe().then((function(){return Promise.resolve()}))})):Promise.resolve()},r=this.storageManager.getSubscriptionId();return!r||void 0!==t&&t===r?i():this.api.unsubscribe(r).then((function(){return i()}))}},{key:"getWorkerPath",value:function(){return Object(o.k)()?"/cleverpush-worker.js":this.config.serviceWorkerFile||"/worker.js"}},{key:"getWorkerScope",value:function(){var e=this.getWorkerPath();return e.indexOf("?")>-1&&(e=e.split("?")[0]),e.substr(0,e.lastIndexOf("/")+1)||"/"}},{key:"getActiveWorkerRegistration",value:function(){var e=this;return new Promise((function(t,n){if(navigator.serviceWorker)if(navigator.serviceWorker.getRegistration){var r=e.getWorkerScope(),o=e.config.serviceWorkerFile;navigator.serviceWorker.getRegistration(r).then((function(e){e&&e.active&&(!o||!e.active.scriptURL||e.active.scriptURL.indexOf(o)>-1)?t(e):"function"==typeof navigator.serviceWorker.getRegistrations?navigator.serviceWorker.getRegistrations().then((function(e){var i=!1;(e||[]).forEach((function(e){i||e.active&&(!o||!e.active.scriptURL||e.active.scriptURL.indexOf(o)>-1)&&(i=!0,t(e))})),i||n()})).catch(n):navigator.serviceWorker.controller?(i.b.debug("worker: getActiveWorkerRegistration: waiting for worker to be ready"),navigator.serviceWorker.ready.then(t).catch(n)):n()})).catch(n)}else navigator.serviceWorker.controller?(i.b.debug("worker: getActiveWorkerRegistration: waiting for worker to be ready"),navigator.serviceWorker.ready.then(t).catch(n)):n();else i.b.debug("worker: getActiveWorkerRegistration: !navigator.serviceWorker"),n()}))}},{key:"registerWorker",value:function(){var e=this;return new Promise((function(t,n){i.b.debug("registering worker");var r=function(){var r=e.getWorkerPath(),o=e.getWorkerScope();navigator.serviceWorker.register(r,{scope:o,updateViaCache:"none"}).then((function(r){i.b.debug("worker registered",r),r.active?(i.b.debug("worker is active"),t(r)):r.installing?(i.b.debug("worker is installing"),r.installing.addEventListener("statechange",(function(e){i.b.debug("worker: onstatechange",e.target.state),"activated"===e.target.state&&t(r)}))):r.waiting?(i.b.debug("worker is waiting"),r.installing.addEventListener("statechange",(function(e){i.b.debug("worker: onstatechange",e.target.state),"activated"===e.target.state&&t(r)}))):(i.b.debug("worker: getActiveWorkerRegistration"),e.getActiveWorkerRegistration().then(t).catch(n))})).catch((function(e){i.b.error("error registering worker",e),n(e)}))};e.getActiveWorkerRegistration().then((function(e){e&&e.active?(i.b.debug("worker was already registered",e),t(e)):r()})).catch(r)}))}},{key:"unregisterOtherPushSubscriptions",value:function(e){var t=this;Object(i.c)("unregisterOtherPushSubscriptions",e),this.config.importedSubscriptionsProvider&&"function"==typeof navigator.serviceWorker.getRegistrations&&navigator.serviceWorker.getRegistrations().then((function(n){(n||[]).forEach((function(n){n.active&&n.active.scriptURL!==e.scriptURL&&n.active.scriptURL&&n.active.scriptURL.indexOf(t.config.serviceWorkerFile)<0&&n.active.scriptURL.indexOf("cleverpush")<0&&n.pushManager.getSubscription().then((function(e){i.b.debug("unsubscribing:",e),e&&(e.unsubscribe(),t.migratedSubscription=!0)}))}))}))}},{key:"tryWorkerUpdate",value:function(e){var t=this;Object(i.c)("tryWorkerUpdate",e),this.storageManager.checkIfShouldUpdateWorker().then((function(n){e&&n&&(i.b.debug("updating worker now"),e.update(),t.storageManager.setWorkerUpdated())})),this.unregisterOtherPushSubscriptionsCalled||(this.unregisterOtherPushSubscriptionsCalled=!0,this.unregisterOtherPushSubscriptions(e))}},{key:"sync",value:function(e,t){var n=this,r=void 0!==t?t:this.topics;return new Promise((function(t){var o=e;n.getSubscriptionId().then((function(e){var s=function(){var s={};e&&(s.subscriptionId=e),n.existingPermission&&(s.existingPermission=!0),n.migratedSubscription&&(s.migratedSubscription=!0),n.api.syncSubscription(o,r,n.initialTags,s).then((function(e){var i=e.id;n.initialTags=[],n.storageManager.setSubscribed(i),n.iframeMessenger&&n.iframeMessenger.setSubscribed(i),n.storageManager.setSynced(),(e.topics||[]).length&&!(r||[]).length&&(n.storageManager.setTopics(e.topics),n.triggerEvent(a.a.TOPICS_SET)),n.config.channelTags&&n.config.channelTags.length&&n.config.channelTags.forEach((function(e){e.autoAssignOptInPath&&new RegExp(e.autoAssignOptInPath).test(location.pathname)&&CleverPush.tagSubscription(e._id)})),t()})).catch((function(e){void 0!==e?404===e?(n.storageManager.setUnsubscribed(!0),n.iframeMessenger&&n.iframeMessenger.setUnsubscribed(!0),n.subscribe()):i.b.error(e):i.b.error("Unknown Error occured while syncing"),t()}))};void 0!==o&&o?s():(o=e)?s():t()}))}))}},{key:"getSubscriptionId",value:function(){var e=this.storageManager.getSubscriptionId();return e?i.b.debug("subscriptionId",e):i.b.debug("subscriptionId not found"),Promise.resolve(e)}},{key:"hasNotificationPermission",value:function(){return"PREVIEW"===this.config.env?Promise.resolve(!1):Promise.resolve("granted"===window.Notification.permission)}},{key:"getNotificationPermission",value:function(e){try{if("Firefox"===o.a.name&&"denied"===sessionStorage.getItem("cleverpush-subscription-status")&&void 0===e)return"denied"}catch(e){}return window.Notification.permission}},{key:"setConfirm",value:function(e){this.confirm=e}},{key:"setTopics",value:function(e){return i.b.debug("setTopics",e),this.topics=e,this.storageManager.setTopics(e)}},{key:"getTopics",value:function(){return this.storageManager.getTopics()}},{key:"getStoredNotifications",value:function(){var e=this,t="/channel/"+this.api.channelId+"/received-notifications";return this.getTopics().then((function(n){return n&&n.length&&(t+="?"+n.map((function(e){return"topics[]="+e})).join("&")),e.api.request("GET",t).then((function(e){return new Promise((function(t){e&&e.notifications?t(e.notifications.filter((function(e){return e.createdAt})).sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}))):t([])}))}))}))}},{key:"deleteStoredNotification",value:function(e){var t=this;return new Promise((function(n,i){t.storageManager.db?t.storageManager.deleteNotification(e).then((function(){n()})).catch((function(e){i(e)})):n()}))}},{key:"getPushManagerSubscribeOptions",value:function(){var e={userVisibleOnly:!0};if(this.config.vapidPublicKey&&this.config.vapidPublicKey.length){var t=Object(r.b)(this.config.vapidPublicKey);t&&(e.applicationServerKey=t)}return e}}])&&l(t.prototype,n),s&&l(t,s),e}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var i=n(2),r=n(192).trim,o=n(134),s=i.parseInt,c=/^[+-]?0[Xx]/,a=8!==s(o+"08")||22!==s(o+"0x16");e.exports=a?function(e,t){var n=r(String(e));return s(n,t>>>0||(c.test(n)?16:10))}:s},function(e,t,n){n(3)({target:"Array",stat:!0},{isArray:n(59)})},function(e,t,n){var i=n(4),r=n(134);e.exports=function(e){return i((function(){return!!r[e]()||"​᠎"!="​᠎"[e]()||r[e].name!==e}))}},function(e,t,n){var i=n(12),r=n(41),o=n(9)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==r(e))}},function(e,t,n){var i=n(15),r=n(199),o=n(23),s=n(95),c=n(156),a=n(210),u=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,n,l,_){var f,d,p,h,g,b,m,v=s(t,n,l?2:1);if(_)f=e;else{if("function"!=typeof(d=c(e)))throw TypeError("Target is not iterable");if(r(d)){for(p=0,h=o(e.length);h>p;p++)if((g=l?v(i(m=e[p])[0],m[1]):v(e[p]))&&g instanceof u)return g;return new u(!1)}f=d.call(e)}for(b=f.next;!(m=b.call(f)).done;)if("object"==typeof(g=a(f,v,m.value,l))&&g&&g instanceof u)return g;return new u(!1)}).stop=function(e){return new u(!0,e)}},function(e,t,n){var i,r,o,s=n(2),c=n(4),a=n(41),u=n(95),l=n(204),_=n(111),f=n(460),d=s.location,p=s.setImmediate,h=s.clearImmediate,g=s.process,b=s.MessageChannel,m=s.Dispatch,v=0,y={},E=function(e){if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},w=function(e){return function(){E(e)}},O=function(e){E(e.data)},P=function(e){s.postMessage(e+"",d.protocol+"//"+d.host)};p&&h||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++v]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(v),v},h=function(e){delete y[e]},"process"==a(g)?i=function(e){g.nextTick(w(e))}:m&&m.now?i=function(e){m.now(w(e))}:b&&!f?(o=(r=new b).port2,r.port1.onmessage=O,i=u(o.postMessage,o,1)):!s.addEventListener||"function"!=typeof postMessage||s.importScripts||c(P)?i="onreadystatechange"in _("script")?function(e){l.appendChild(_("script")).onreadystatechange=function(){l.removeChild(this),E(e)}}:function(e){setTimeout(w(e),0)}:(i=P,s.addEventListener("message",O,!1))),e.exports={set:p,clear:h}},function(e,t,n){var i=n(145);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)},function(e,t,n){"use strict";var i=n(74),r=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)};e.exports.f=function(e){return new r(e)}},function(e,t,n){"use strict";var i=n(3),r=n(2),o=n(13),s=n(571),c=n(52),a=n(485),u=n(206),l=n(42),_=n(20),f=n(23),d=n(498),p=n(499),h=n(57),g=n(11),b=n(142),m=n(12),v=n(76),y=n(143),E=n(80).f,w=n(573),O=n(51).forEach,P=n(248),M=n(17),T=n(56),k=n(43),D=n(466),I=k.get,S=k.set,A=M.f,C=T.f,B=Math.round,R=r.RangeError,L=a.ArrayBuffer,x=a.DataView,U=c.NATIVE_ARRAY_BUFFER_VIEWS,j=c.TYPED_ARRAY_TAG,W=c.TypedArray,K=c.TypedArrayPrototype,N=c.aTypedArrayConstructor,q=c.isTypedArray,F=function(e,t){for(var n=0,i=t.length,r=new(N(e))(i);i>n;)r[n]=t[n++];return r},z=function(e,t){A(e,t,{get:function(){return I(this)[t]}})},H=function(e){var t;return e instanceof L||"ArrayBuffer"==(t=b(e))||"SharedArrayBuffer"==t},V=function(e,t){return q(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},G=function(e,t){return V(e,t=h(t,!0))?l(2,e[t]):C(e,t)},J=function(e,t,n){return!(V(e,t=h(t,!0))&&m(n)&&g(n,"value"))||g(n,"get")||g(n,"set")||n.configurable||g(n,"writable")&&!n.writable||g(n,"enumerable")&&!n.enumerable?A(e,t,n):(e[t]=n.value,e)};o?(U||(T.f=G,M.f=J,z(K,"buffer"),z(K,"byteOffset"),z(K,"byteLength"),z(K,"length")),i({target:"Object",stat:!0,forced:!U},{getOwnPropertyDescriptor:G,defineProperty:J}),e.exports=function(e,t,n){var o=e.match(/\d+$/)[0]/8,c=e+(n?"Clamped":"")+"Array",a="get"+e,l="set"+e,h=r[c],g=h,b=g&&g.prototype,M={},T=function(e,t){A(e,t,{get:function(){return function(e,t){var n=I(e);return n.view[a](t*o+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var r=I(e);n&&(i=(i=B(i))<0?0:i>255?255:255&i),r.view[l](t*o+r.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};U?s&&(g=t((function(e,t,n,i){return u(e,g,c),D(m(t)?H(t)?void 0!==i?new h(t,p(n,o),i):void 0!==n?new h(t,p(n,o)):new h(t):q(t)?F(g,t):w.call(g,t):new h(d(t)),e,g)})),y&&y(g,W),O(E(h),(function(e){e in g||_(g,e,h[e])})),g.prototype=b):(g=t((function(e,t,n,i){u(e,g,c);var r,s,a,l=0,_=0;if(m(t)){if(!H(t))return q(t)?F(g,t):w.call(g,t);r=t,_=p(n,o);var h=t.byteLength;if(void 0===i){if(h%o)throw R("Wrong length");if((s=h-_)<0)throw R("Wrong length")}else if((s=f(i)*o)+_>h)throw R("Wrong length");a=s/o}else a=d(t),r=new L(s=a*o);for(S(e,{buffer:r,byteOffset:_,byteLength:s,length:a,view:new x(r)});l<a;)T(e,l++)})),y&&y(g,W),b=g.prototype=v(K)),b.constructor!==g&&_(b,"constructor",g),j&&_(b,j,c),M[c]=g,i({global:!0,forced:g!=h,sham:!U},M),"BYTES_PER_ELEMENT"in g||_(g,"BYTES_PER_ELEMENT",o),"BYTES_PER_ELEMENT"in b||_(b,"BYTES_PER_ELEMENT",o),P(c)}):e.exports=function(){}},,,function(e,t,n){var i=n(13),r=n(2),o=n(118),s=n(466),c=n(17).f,a=n(80).f,u=n(457),l=n(147),_=n(203),f=n(25),d=n(4),p=n(43).set,h=n(248),g=n(9)("match"),b=r.RegExp,m=b.prototype,v=/a/g,y=/a/g,E=new b(v)!==v,w=_.UNSUPPORTED_Y;if(i&&o("RegExp",!E||w||d((function(){return y[g]=!1,b(v)!=v||b(y)==y||"/a/i"!=b(v,"i")})))){for(var O=function(e,t){var n,i=this instanceof O,r=u(e),o=void 0===t;if(!i&&r&&e.constructor===O&&o)return e;E?r&&!o&&(e=e.source):e instanceof O&&(o&&(t=l.call(e)),e=e.source),w&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var c=s(E?new b(e,t):b(e,t),i?this:m,O);return w&&n&&p(c,{sticky:n}),c},P=function(e){e in O||c(O,e,{configurable:!0,get:function(){return b[e]},set:function(t){b[e]=t}})},M=a(b),T=0;M.length>T;)P(M[T++]);m.constructor=O,O.prototype=m,f(r,"RegExp",O)}h("RegExp")},function(e,t,n){var i=n(12),r=n(143);e.exports=function(e,t,n){var o,s;return r&&"function"==typeof(o=t.constructor)&&o!==n&&i(s=o.prototype)&&s!==n.prototype&&r(e,s),e}},function(e,t,n){"use strict";var i=n(186),r=n(457),o=n(15),s=n(34),c=n(202),a=n(197),u=n(23),l=n(187),_=n(110),f=n(4),d=[].push,p=Math.min,h=!f((function(){return!RegExp(4294967295,"y")}));i("split",2,(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=String(s(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===e)return[i];if(!r(e))return t.call(i,e,o);for(var c,a,u,l=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,h=new RegExp(e.source,f+"g");(c=_.call(h,i))&&!((a=h.lastIndex)>p&&(l.push(i.slice(p,c.index)),c.length>1&&c.index<i.length&&d.apply(l,c.slice(1)),u=c[0].length,p=a,l.length>=o));)h.lastIndex===c.index&&h.lastIndex++;return p===i.length?!u&&h.test("")||l.push(""):l.push(i.slice(p)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=s(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,r,n):i.call(String(r),t,n)},function(e,r){var s=n(i,e,this,r,i!==t);if(s.done)return s.value;var _=o(e),f=String(this),d=c(_,RegExp),g=_.unicode,b=(_.ignoreCase?"i":"")+(_.multiline?"m":"")+(_.unicode?"u":"")+(h?"y":"g"),m=new d(h?_:"^(?:"+_.source+")",b),v=void 0===r?4294967295:r>>>0;if(0===v)return[];if(0===f.length)return null===l(m,f)?[f]:[];for(var y=0,E=0,w=[];E<f.length;){m.lastIndex=h?E:0;var O,P=l(m,h?f:f.slice(E));if(null===P||(O=p(u(m.lastIndex+(h?0:E)),f.length))===y)E=a(f,E,g);else{if(w.push(f.slice(y,E)),w.length===v)return w;for(var M=1;M<=P.length-1;M++)if(w.push(P[M]),w.length===v)return w;E=y=O}}return w.push(f.slice(y)),w}]}),!h)},function(e,t,n){"use strict";var i=n(3),r=n(74),o=n(26),s=n(4),c=n(97),a=[],u=a.sort,l=s((function(){a.sort(void 0)})),_=s((function(){a.sort(null)})),f=c("sort");i({target:"Array",proto:!0,forced:l||!_||!f},{sort:function(e){return void 0===e?u.call(o(this)):u.call(o(this),r(e))}})},function(e,t,n){"use strict";var i=n(186),r=n(15),o=n(34),s=n(491),c=n(187);i("search",1,(function(e,t,n){return[function(t){var n=o(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](String(n))},function(e){var i=n(t,e,this);if(i.done)return i.value;var o=r(e),a=String(this),u=o.lastIndex;s(u,0)||(o.lastIndex=0);var l=c(o,a);return s(o.lastIndex,u)||(o.lastIndex=u),null===l?-1:l.index}]}))},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ERR_IFRAME_ALREADY_ATTACHED_TO_DOM=t.ERR_NOT_IN_IFRAME=t.ERR_CONNECTION_TIMEOUT=t.ERR_CONNECTION_DESTROYED=void 0;var i="message";t.ERR_CONNECTION_DESTROYED="ConnectionDestroyed";t.ERR_CONNECTION_TIMEOUT="ConnectionTimeout";t.ERR_NOT_IN_IFRAME="NotInIframe";t.ERR_IFRAME_ALREADY_ATTACHED_TO_DOM="IframeAlreadyAttachedToDom";var r,o={"http:":"80","https:":"443"},s=/^(https?:|file:)?\/\/([^/:]+)?(:(\d+))?/,c={ERR_CONNECTION_DESTROYED:"ConnectionDestroyed",ERR_CONNECTION_TIMEOUT:"ConnectionTimeout",ERR_NOT_IN_IFRAME:"NotInIframe",ERR_IFRAME_ALREADY_ATTACHED_TO_DOM:"IframeAlreadyAttachedToDom",Promise:function(){try{return window?window.Promise:null}catch(e){return null}}(),debug:!1},a=(r=0,function(){return++r}),u=function(){if(c.debug){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=console).log.apply(e,["[Penpal]"].concat(n))}},l=function(e){var t=[];return e((function(){t.forEach((function(e){e()}))})),{then:function(e){t.push(e)}}},_=function(e){return{name:e.name,message:e.message,stack:e.stack}},f=function(e){var t=new Error;return Object.keys(e).forEach((function(n){return t[n]=e[n]})),t},d=function(e,t,n,r,o){var s=t.localName,l=t.local,_=t.remote,d=t.remoteOrigin,p=!1;u("".concat(s,": Connecting call sender"));o.then((function(){p=!0})),n.reduce((function(e,t){return e[t]=function(e){return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];if(u("".concat(s,": Sending ").concat(e,"() call")),_.closed&&r(),p){var h=new Error("Unable to send ".concat(e,"() call due ")+"to destroyed connection");throw h.code="ConnectionDestroyed",h}return new c.Promise((function(t,r){var o=a();l.addEventListener(i,(function n(c){if(c.source===_&&c.origin===d&&"reply"===c.data.penpal&&c.data.id===o){u("".concat(s,": Received ").concat(e,"() reply")),l.removeEventListener(i,n);var a=c.data.returnValue;c.data.returnValueIsError&&(a=f(a)),("fulfilled"===c.data.resolution?t:r)(a)}})),_.postMessage({penpal:"call",id:o,methodName:e,args:n},d)}))}}(t),e}),e)},p=function(e,t,n){var r=e.localName,o=e.local,s=e.remote,a=e.remoteOrigin,l=!1;u("".concat(r,": Connecting call receiver"));var f=function(e){if(e.source===s&&e.origin===a&&"call"===e.data.penpal){var n=e.data,i=n.methodName,o=n.args,f=n.id;if(u("".concat(r,": Received ").concat(i,"() call")),i in t){var d=function(e){return function(t){if(u("".concat(r,": Sending ").concat(i,"() reply")),l)u("".concat(r,": Unable to send ").concat(i,"() reply due to destroyed connection"));else{var n={penpal:"reply",id:f,resolution:e,returnValue:t};"rejected"===e&&t instanceof Error&&(n.returnValue=_(t),n.returnValueIsError=!0);try{s.postMessage(n,a)}catch(e){throw"DataCloneError"===e.name&&s.postMessage({penpal:"reply",id:f,resolution:"rejected",returnValue:_(e),returnValueIsError:!0},a),e}}}};new c.Promise((function(e){return e(t[i].apply(t,o))})).then(d("fulfilled"),d("rejected"))}}};o.addEventListener(i,f),n.then((function(){l=!0,o.removeEventListener(i,f)}))};c.connectToChild=function(e){var t,n=e.url,r=e.appendTo,a=e.iframe,_=e.methods,f=void 0===_?{}:_,h=e.timeout;if(a&&a.parentNode){var g=new Error("connectToChild() must not be called with an iframe already attached to DOM");throw g.code="IframeAlreadyAttachedToDom",g}var b=new l((function(e){t=e})),m=window;(a=a||document.createElement("iframe")).src=n;var v=function(e){var t,n,i,r=document.location,c=s.exec(e);if(c?(t=c[1]?c[1]:r.protocol,n=c[2],i=c[4]):(t=r.protocol,n=r.hostname,i=r.port),"file:"===t)return"null";var a=i&&i!==o[t]?":".concat(i):"";return"".concat(t,"//").concat(n).concat(a)}(n);return{promise:new c.Promise((function(e,n){var o;void 0!==h&&(o=setTimeout((function(){var e=new Error("Connection to child timed out after ".concat(h,"ms"));e.code="ConnectionTimeout",n(e),t()}),h));var s,c,_={},g=function(n){var i=a.contentWindow;if(n.source===i&&n.origin===v&&"handshake"===n.data.penpal){u("Parent: Received handshake, sending reply");var r="null"===n.origin?"*":n.origin;n.source.postMessage({penpal:"handshake-reply",methodNames:Object.keys(f)},r);var h={localName:"Parent",local:m,remote:i,remoteOrigin:r};c&&c();var g=new l((function(e){b.then(e),c=e}));p(h,f,g),s&&s.forEach((function(e){delete _[e]})),s=n.data.methodNames,d(_,h,s,t,b),clearTimeout(o),e(_)}};m.addEventListener(i,g),u("Parent: Loading iframe"),(r||document.body).appendChild(a);var y=setInterval((function(){document.contains(a)||(clearInterval(y),t())}),6e4);b.then((function(){a.parentNode&&a.parentNode.removeChild(a),m.removeEventListener(i,g),clearInterval(y);var e=new Error("Connection destroyed");e.code="ConnectionDestroyed",n(e)}))})),iframe:a,destroy:t}},c.connectToParent=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.parentOrigin,r=void 0===n?"*":n,o=t.methods,s=void 0===o?{}:o,a=t.timeout;if(window===window.top){var _=new Error("connectToParent() must be called within an iframe");throw _.code="NotInIframe",_}var f=new l((function(t){e=t})),h=window,g=h.parent,b=new c.Promise((function(t,n){var o;void 0!==a&&(o=setTimeout((function(){var t=new Error("Connection to parent timed out after ".concat(a,"ms"));t.code="ConnectionTimeout",n(t),e()}),a));var c=function n(c){if(("*"===r||r===c.origin)&&c.source===g&&"handshake-reply"===c.data.penpal){u("Child: Received handshake reply"),h.removeEventListener(i,n);var a={localName:"Child",local:h,remote:g,remoteOrigin:c.origin},l={};p(a,s,f),d(l,a,c.data.methodNames,e,f),clearTimeout(o),t(l)}};h.addEventListener(i,c),f.then((function(){h.removeEventListener(i,c);var e=new Error("Connection destroyed");e.code="ConnectionDestroyed",n(e)})),u("Child: Sending handshake"),g.postMessage({penpal:"handshake",methodNames:Object.keys(s)},r)}));return{promise:b,destroy:e}};var h=c;t.default=h},function(e,t,n){"use strict";var i=n(3),r=n(51).find,o=n(189),s=n(50),c=!0,a=s("find");"find"in[]&&Array(1).find((function(){c=!1})),i({target:"Array",proto:!0,forced:c||!a},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o("find")},,,function(e,t,n){var i=n(2);e.exports=i.Promise},function(e,t,n){var i,r,o,s,c,a,u,l,_=n(2),f=n(56).f,d=n(41),p=n(459).set,h=n(460),g=_.MutationObserver||_.WebKitMutationObserver,b=_.process,m=_.Promise,v="process"==d(b),y=f(_,"queueMicrotask"),E=y&&y.value;E||(i=function(){var e,t;for(v&&(e=b.domain)&&e.exit();r;){t=r.fn,r=r.next;try{t()}catch(e){throw r?s():o=void 0,e}}o=void 0,e&&e.enter()},v?s=function(){b.nextTick(i)}:g&&!h?(c=!0,a=document.createTextNode(""),new g(i).observe(a,{characterData:!0}),s=function(){a.data=c=!c}):m&&m.resolve?(u=m.resolve(void 0),l=u.then,s=function(){l.call(u,i)}):s=function(){p.call(_,i)}),e.exports=E||function(e){var t={fn:e,next:void 0};o&&(o.next=t),r||(r=t,s()),o=t}},function(e,t,n){var i=n(15),r=n(12),o=n(461);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var i=n(2);e.exports=function(e,t){var n=i.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,n){var i=n(74),r=n(26),o=n(72),s=n(23),c=function(e){return function(t,n,c,a){i(n);var u=r(t),l=o(u),_=s(u.length),f=e?_-1:0,d=e?-1:1;if(c<2)for(;;){if(f in l){a=l[f],f+=d;break}if(f+=d,e?f<0:_<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?f>=0:_>f;f+=d)f in l&&(a=n(a,l[f],f,u));return a}};e.exports={left:c(!1),right:c(!0)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));n(148),n(149),n(150),n(82),n(91),n(154),n(102),n(254),n(81),n(255),n(256),n(108),n(195),n(257),n(83),n(137),n(98),n(253),n(469),n(144),n(484);var i=n(268),r=n(55),o=n(258),s=n(1),c=n(61);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(_,e);var t,n,i,a=l(_);function _(e,t,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(i=a.call(this,e,t,n)).triggerEvent(r.a.INITIALIZED),i}return t=_,i=[{key:"initFacebook",value:function(e){if(_.facebookInitialized)e();else{window.fbAsyncInit=function(){s.b.debug("window.fbAsyncInit"),FB.init({appId:CleverPush.config.facebookAppId,version:"v2.9"}),_.facebookInitialized=!0,e()};var t="en_US",n=(navigator.language||navigator.userLanguage||"").replace("-","_").substr(0,5);n&&n!==t&&["en_US","ca_ES","cs_CZ","cx_PH","cy_GB","da_DK","de_DE","eu_ES","en_UD","es_LA","es_ES","gn_PY","fi_FI","fr_FR","gl_ES","hu_HU","it_IT","ja_JP","ko_KR","nb_NO","nn_NO","nl_NL","fy_NL","pl_PL","pt_BR","pt_PT","ro_RO","ru_RU","sk_SK","sl_SI","sv_SE","th_TH","tr_TR","ku_TR","zh_CN","zh_HK","zh_TW","af_ZA","sq_AL","hy_AM","az_AZ","be_BY","bn_IN","bs_BA","bg_BG","hr_HR","nl_BE","en_GB","et_EE","fo_FO","fr_CA","ka_GE","el_GR","gu_IN","hi_IN","is_IS","id_ID","ga_IE","jv_ID","kn_IN","kk_KZ","lv_LV","lt_LT","mk_MK","mg_MG","ms_MY","mt_MT","mr_IN","mn_MN","ne_NP","pa_IN","sr_RS","so_SO","sw_KE","tl_PH","ta_IN","te_IN","ml_IN","uk_UA","uz_UZ","vi_VN","km_KH","tg_TJ","ar_AR","he_IL","ur_PK","fa_IR","ps_AF","my_MM","qz_MM","or_IN","si_LK","rw_RW","cb_IQ","ha_NG","ja_KS","br_FR","tz_MA","co_FR","as_IN","ff_NG","sc_IT","sz_PL"].forEach((function(e){e!==n&&e.substr(0,2)!==n.substr(0,2)||(t=e)})),i=document,r="script",o="facebook-jssdk",a=i.getElementsByTagName(r)[0],i.getElementById(o)||((c=i.createElement(r)).id=o,c.src="//connect.facebook.net/"+t+"/sdk.js",a.parentNode.insertBefore(c,a))}var i,r,o,c,a}}],(n=[{key:"isSubscribed",value:function(){var e=this;return new Promise((function(t){t(!!e.storageManager.getFacebookUserRef())}))}},{key:"canSubscribe",value:function(){var e=this;return new Promise((function(t,n){"true"!==new URLSearchParams(location.search.slice(1)).get("cleverPushFacebookClick")?"denied"!==localStorage.getItem("cleverpush-subscription-status")?e.isSubscribed().then((function(e){e?n(new c.a("User is already subscribed","subscribed")):t(!0)})).catch(n):n(new c.a("User has manually unsubscribed or denied notifications","unsubscribed")):n(new c.a("User is already subscribed","subscribed"))}))}},{key:"subscribeForce",value:function(){return this.subscribe()}},{key:"setFacebookUserRef",value:function(e){var t=this;this.storageManager.setFacebookUserRef(e),this.sync({facebookUserRef:e}).then((function(){t.isSubscribing=!1,t.triggerEvent(r.a.SUBSCRIBED,t.storageManager.getSubscriptionId()),t.resolveSubscribe&&t.resolveSubscribe("granted")}))}},{key:"subscribe",value:function(){var e=this;return new Promise((function(t,n){e.isSubscribed().then((function(i){i?(e.confirm&&e.confirm.hideBackdrop(),e.resolveSubscribe=t):e.isSubscribing?n(new o.a("A subscription process is already in progress.")):e.config.facebookAppId&&e.config.facebookPageId?t():(s.b.warn("Facebook App ID or Page ID missing"),n())}))}))}},{key:"unsubscribe",value:function(e){var t=this,n=this.storageManager.getSubscriptionId();return n?this.api.unsubscribe(n).then((function(){t.storageManager.setUnsubscribed(e),t.triggerEvent(r.a.UNSUBSCRIBED)})):Promise.resolve()}},{key:"hasNotificationPermission",value:function(){return Promise.resolve(!!this.storageManager.getFacebookUserRef())}},{key:"getNotificationPermission",value:function(){return Promise.resolve(this.storageManager.getFacebookUserRef()?"granted":"default")}}])&&u(t.prototype,n),i&&u(t,i),_}(i.a)},function(e,t,n){var i=n(457);e.exports=function(e){if(i(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,t,n){var i=n(9)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,"/./"[e](t)}catch(e){}}return!1}},function(e,t,n){"use strict";n(98);var i,r=n(3),o=n(13),s=n(495),c=n(2),a=n(208),u=n(25),l=n(206),_=n(11),f=n(246),d=n(251),p=n(152).codeAt,h=n(565),g=n(77),b=n(566),m=n(43),v=c.URL,y=b.URLSearchParams,E=b.getState,w=m.set,O=m.getterFor("URL"),P=Math.floor,M=Math.pow,T=/[A-Za-z]/,k=/[\d+\-.A-Za-z]/,D=/\d/,I=/^(0x|0X)/,S=/^[0-7]+$/,A=/^\d+$/,C=/^[\dA-Fa-f]+$/,B=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,R=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,L=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,x=/[\u0009\u000A\u000D]/g,U=function(e,t){var n,i,r;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(n=W(t.slice(1,-1))))return"Invalid host";e.host=n}else if(G(e)){if(t=h(t),B.test(t))return"Invalid host";if(null===(n=j(t)))return"Invalid host";e.host=n}else{if(R.test(t))return"Invalid host";for(n="",i=d(t),r=0;r<i.length;r++)n+=H(i[r],N);e.host=n}},j=function(e){var t,n,i,r,o,s,c,a=e.split(".");if(a.length&&""==a[a.length-1]&&a.pop(),(t=a.length)>4)return e;for(n=[],i=0;i<t;i++){if(""==(r=a[i]))return e;if(o=10,r.length>1&&"0"==r.charAt(0)&&(o=I.test(r)?16:8,r=r.slice(8==o?1:2)),""===r)s=0;else{if(!(10==o?A:8==o?S:C).test(r))return e;s=parseInt(r,o)}n.push(s)}for(i=0;i<t;i++)if(s=n[i],i==t-1){if(s>=M(256,5-t))return null}else if(s>255)return null;for(c=n.pop(),i=0;i<n.length;i++)c+=n[i]*M(256,3-i);return c},W=function(e){var t,n,i,r,o,s,c,a=[0,0,0,0,0,0,0,0],u=0,l=null,_=0,f=function(){return e.charAt(_)};if(":"==f()){if(":"!=e.charAt(1))return;_+=2,l=++u}for(;f();){if(8==u)return;if(":"!=f()){for(t=n=0;n<4&&C.test(f());)t=16*t+parseInt(f(),16),_++,n++;if("."==f()){if(0==n)return;if(_-=n,u>6)return;for(i=0;f();){if(r=null,i>0){if(!("."==f()&&i<4))return;_++}if(!D.test(f()))return;for(;D.test(f());){if(o=parseInt(f(),10),null===r)r=o;else{if(0==r)return;r=10*r+o}if(r>255)return;_++}a[u]=256*a[u]+r,2!=++i&&4!=i||u++}if(4!=i)return;break}if(":"==f()){if(_++,!f())return}else if(f())return;a[u++]=t}else{if(null!==l)return;_++,l=++u}}if(null!==l)for(s=u-l,u=7;0!=u&&s>0;)c=a[u],a[u--]=a[l+s-1],a[l+--s]=c;else if(8!=u)return;return a},K=function(e){var t,n,i,r;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=P(e/256);return t.join(".")}if("object"==typeof e){for(t="",i=function(e){for(var t=null,n=1,i=null,r=0,o=0;o<8;o++)0!==e[o]?(r>n&&(t=i,n=r),i=null,r=0):(null===i&&(i=o),++r);return r>n&&(t=i,n=r),t}(e),n=0;n<8;n++)r&&0===e[n]||(r&&(r=!1),i===n?(t+=n?":":"::",r=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},N={},q=f({},N,{" ":1,'"':1,"<":1,">":1,"`":1}),F=f({},q,{"#":1,"?":1,"{":1,"}":1}),z=f({},F,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),H=function(e,t){var n=p(e,0);return n>32&&n<127&&!_(t,e)?e:encodeURIComponent(e)},V={ftp:21,file:null,http:80,https:443,ws:80,wss:443},G=function(e){return _(V,e.scheme)},J=function(e){return""!=e.username||""!=e.password},Y=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Z=function(e,t){var n;return 2==e.length&&T.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},$=function(e){var t;return e.length>1&&Z(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},Q=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&Z(t[0],!0)||t.pop()},X=function(e){return"."===e||"%2e"===e.toLowerCase()},ee={},te={},ne={},ie={},re={},oe={},se={},ce={},ae={},ue={},le={},_e={},fe={},de={},pe={},he={},ge={},be={},me={},ve={},ye={},Ee=function(e,t,n,r){var o,s,c,a,u,l=n||ee,f=0,p="",h=!1,g=!1,b=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(L,"")),t=t.replace(x,""),o=d(t);f<=o.length;){switch(s=o[f],l){case ee:if(!s||!T.test(s)){if(n)return"Invalid scheme";l=ne;continue}p+=s.toLowerCase(),l=te;break;case te:if(s&&(k.test(s)||"+"==s||"-"==s||"."==s))p+=s.toLowerCase();else{if(":"!=s){if(n)return"Invalid scheme";p="",l=ne,f=0;continue}if(n&&(G(e)!=_(V,p)||"file"==p&&(J(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=p,n)return void(G(e)&&V[e.scheme]==e.port&&(e.port=null));p="","file"==e.scheme?l=de:G(e)&&r&&r.scheme==e.scheme?l=ie:G(e)?l=ce:"/"==o[f+1]?(l=re,f++):(e.cannotBeABaseURL=!0,e.path.push(""),l=me)}break;case ne:if(!r||r.cannotBeABaseURL&&"#"!=s)return"Invalid scheme";if(r.cannotBeABaseURL&&"#"==s){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,l=ye;break}l="file"==r.scheme?de:oe;continue;case ie:if("/"!=s||"/"!=o[f+1]){l=oe;continue}l=ae,f++;break;case re:if("/"==s){l=ue;break}l=be;continue;case oe:if(e.scheme=r.scheme,s==i)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==s||"\\"==s&&G(e))l=se;else if("?"==s)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",l=ve;else{if("#"!=s){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),l=be;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",l=ye}break;case se:if(!G(e)||"/"!=s&&"\\"!=s){if("/"!=s){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,l=be;continue}l=ue}else l=ae;break;case ce:if(l=ae,"/"!=s||"/"!=p.charAt(f+1))continue;f++;break;case ae:if("/"!=s&&"\\"!=s){l=ue;continue}break;case ue:if("@"==s){h&&(p="%40"+p),h=!0,c=d(p);for(var m=0;m<c.length;m++){var v=c[m];if(":"!=v||b){var y=H(v,z);b?e.password+=y:e.username+=y}else b=!0}p=""}else if(s==i||"/"==s||"?"==s||"#"==s||"\\"==s&&G(e)){if(h&&""==p)return"Invalid authority";f-=d(p).length+1,p="",l=le}else p+=s;break;case le:case _e:if(n&&"file"==e.scheme){l=he;continue}if(":"!=s||g){if(s==i||"/"==s||"?"==s||"#"==s||"\\"==s&&G(e)){if(G(e)&&""==p)return"Invalid host";if(n&&""==p&&(J(e)||null!==e.port))return;if(a=U(e,p))return a;if(p="",l=ge,n)return;continue}"["==s?g=!0:"]"==s&&(g=!1),p+=s}else{if(""==p)return"Invalid host";if(a=U(e,p))return a;if(p="",l=fe,n==_e)return}break;case fe:if(!D.test(s)){if(s==i||"/"==s||"?"==s||"#"==s||"\\"==s&&G(e)||n){if(""!=p){var E=parseInt(p,10);if(E>65535)return"Invalid port";e.port=G(e)&&E===V[e.scheme]?null:E,p=""}if(n)return;l=ge;continue}return"Invalid port"}p+=s;break;case de:if(e.scheme="file","/"==s||"\\"==s)l=pe;else{if(!r||"file"!=r.scheme){l=be;continue}if(s==i)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==s)e.host=r.host,e.path=r.path.slice(),e.query="",l=ve;else{if("#"!=s){$(o.slice(f).join(""))||(e.host=r.host,e.path=r.path.slice(),Q(e)),l=be;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",l=ye}}break;case pe:if("/"==s||"\\"==s){l=he;break}r&&"file"==r.scheme&&!$(o.slice(f).join(""))&&(Z(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),l=be;continue;case he:if(s==i||"/"==s||"\\"==s||"?"==s||"#"==s){if(!n&&Z(p))l=be;else if(""==p){if(e.host="",n)return;l=ge}else{if(a=U(e,p))return a;if("localhost"==e.host&&(e.host=""),n)return;p="",l=ge}continue}p+=s;break;case ge:if(G(e)){if(l=be,"/"!=s&&"\\"!=s)continue}else if(n||"?"!=s)if(n||"#"!=s){if(s!=i&&(l=be,"/"!=s))continue}else e.fragment="",l=ye;else e.query="",l=ve;break;case be:if(s==i||"/"==s||"\\"==s&&G(e)||!n&&("?"==s||"#"==s)){if(".."===(u=(u=p).toLowerCase())||"%2e."===u||".%2e"===u||"%2e%2e"===u?(Q(e),"/"==s||"\\"==s&&G(e)||e.path.push("")):X(p)?"/"==s||"\\"==s&&G(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Z(p)&&(e.host&&(e.host=""),p=p.charAt(0)+":"),e.path.push(p)),p="","file"==e.scheme&&(s==i||"?"==s||"#"==s))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==s?(e.query="",l=ve):"#"==s&&(e.fragment="",l=ye)}else p+=H(s,F);break;case me:"?"==s?(e.query="",l=ve):"#"==s?(e.fragment="",l=ye):s!=i&&(e.path[0]+=H(s,N));break;case ve:n||"#"!=s?s!=i&&("'"==s&&G(e)?e.query+="%27":e.query+="#"==s?"%23":H(s,N)):(e.fragment="",l=ye);break;case ye:s!=i&&(e.fragment+=H(s,q))}f++}},we=function(e){var t,n,i=l(this,we,"URL"),r=arguments.length>1?arguments[1]:void 0,s=String(e),c=w(i,{type:"URL"});if(void 0!==r)if(r instanceof we)t=O(r);else if(n=Ee(t={},String(r)))throw TypeError(n);if(n=Ee(c,s,null,t))throw TypeError(n);var a=c.searchParams=new y,u=E(a);u.updateSearchParams(c.query),u.updateURL=function(){c.query=String(a)||null},o||(i.href=Pe.call(i),i.origin=Me.call(i),i.protocol=Te.call(i),i.username=ke.call(i),i.password=De.call(i),i.host=Ie.call(i),i.hostname=Se.call(i),i.port=Ae.call(i),i.pathname=Ce.call(i),i.search=Be.call(i),i.searchParams=Re.call(i),i.hash=Le.call(i))},Oe=we.prototype,Pe=function(){var e=O(this),t=e.scheme,n=e.username,i=e.password,r=e.host,o=e.port,s=e.path,c=e.query,a=e.fragment,u=t+":";return null!==r?(u+="//",J(e)&&(u+=n+(i?":"+i:"")+"@"),u+=K(r),null!==o&&(u+=":"+o)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==c&&(u+="?"+c),null!==a&&(u+="#"+a),u},Me=function(){var e=O(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&G(e)?t+"://"+K(e.host)+(null!==n?":"+n:""):"null"},Te=function(){return O(this).scheme+":"},ke=function(){return O(this).username},De=function(){return O(this).password},Ie=function(){var e=O(this),t=e.host,n=e.port;return null===t?"":null===n?K(t):K(t)+":"+n},Se=function(){var e=O(this).host;return null===e?"":K(e)},Ae=function(){var e=O(this).port;return null===e?"":String(e)},Ce=function(){var e=O(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Be=function(){var e=O(this).query;return e?"?"+e:""},Re=function(){return O(this).searchParams},Le=function(){var e=O(this).fragment;return e?"#"+e:""},xe=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(o&&a(Oe,{href:xe(Pe,(function(e){var t=O(this),n=String(e),i=Ee(t,n);if(i)throw TypeError(i);E(t.searchParams).updateSearchParams(t.query)})),origin:xe(Me),protocol:xe(Te,(function(e){var t=O(this);Ee(t,String(e)+":",ee)})),username:xe(ke,(function(e){var t=O(this),n=d(String(e));if(!Y(t)){t.username="";for(var i=0;i<n.length;i++)t.username+=H(n[i],z)}})),password:xe(De,(function(e){var t=O(this),n=d(String(e));if(!Y(t)){t.password="";for(var i=0;i<n.length;i++)t.password+=H(n[i],z)}})),host:xe(Ie,(function(e){var t=O(this);t.cannotBeABaseURL||Ee(t,String(e),le)})),hostname:xe(Se,(function(e){var t=O(this);t.cannotBeABaseURL||Ee(t,String(e),_e)})),port:xe(Ae,(function(e){var t=O(this);Y(t)||(""==(e=String(e))?t.port=null:Ee(t,e,fe))})),pathname:xe(Ce,(function(e){var t=O(this);t.cannotBeABaseURL||(t.path=[],Ee(t,e+"",ge))})),search:xe(Be,(function(e){var t=O(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Ee(t,e,ve)),E(t.searchParams).updateSearchParams(t.query)})),searchParams:xe(Re),hash:xe(Le,(function(e){var t=O(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Ee(t,e,ye)):t.fragment=null}))}),u(Oe,"toJSON",(function(){return Pe.call(this)}),{enumerable:!0}),u(Oe,"toString",(function(){return Pe.call(this)}),{enumerable:!0}),v){var Ue=v.createObjectURL,je=v.revokeObjectURL;Ue&&u(we,"createObjectURL",(function(e){return Ue.apply(v,arguments)})),je&&u(we,"revokeObjectURL",(function(e){return je.apply(v,arguments)}))}g(we,"URL"),r({global:!0,forced:!s,sham:!o},{URL:we})},function(e,t,n){"use strict";var i=n(2),r=n(13),o=n(497),s=n(20),c=n(263),a=n(4),u=n(206),l=n(48),_=n(23),f=n(498),d=n(570),p=n(113),h=n(143),g=n(80).f,b=n(17).f,m=n(486),v=n(77),y=n(43),E=y.get,w=y.set,O=i.ArrayBuffer,P=O,M=i.DataView,T=M&&M.prototype,k=Object.prototype,D=i.RangeError,I=d.pack,S=d.unpack,A=function(e){return[255&e]},C=function(e){return[255&e,e>>8&255]},B=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},R=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},L=function(e){return I(e,23,4)},x=function(e){return I(e,52,8)},U=function(e,t){b(e.prototype,t,{get:function(){return E(this)[t]}})},j=function(e,t,n,i){var r=f(n),o=E(e);if(r+t>o.byteLength)throw D("Wrong index");var s=E(o.buffer).bytes,c=r+o.byteOffset,a=s.slice(c,c+t);return i?a:a.reverse()},W=function(e,t,n,i,r,o){var s=f(n),c=E(e);if(s+t>c.byteLength)throw D("Wrong index");for(var a=E(c.buffer).bytes,u=s+c.byteOffset,l=i(+r),_=0;_<t;_++)a[u+_]=l[o?_:t-_-1]};if(o){if(!a((function(){O(1)}))||!a((function(){new O(-1)}))||a((function(){return new O,new O(1.5),new O(NaN),"ArrayBuffer"!=O.name}))){for(var K,N=(P=function(e){return u(this,P),new O(f(e))}).prototype=O.prototype,q=g(O),F=0;q.length>F;)(K=q[F++])in P||s(P,K,O[K]);N.constructor=P}h&&p(T)!==k&&h(T,k);var z=new M(new P(2)),H=T.setInt8;z.setInt8(0,2147483648),z.setInt8(1,2147483649),!z.getInt8(0)&&z.getInt8(1)||c(T,{setInt8:function(e,t){H.call(this,e,t<<24>>24)},setUint8:function(e,t){H.call(this,e,t<<24>>24)}},{unsafe:!0})}else P=function(e){u(this,P,"ArrayBuffer");var t=f(e);w(this,{bytes:m.call(new Array(t),0),byteLength:t}),r||(this.byteLength=t)},M=function(e,t,n){u(this,M,"DataView"),u(e,P,"DataView");var i=E(e).byteLength,o=l(t);if(o<0||o>i)throw D("Wrong offset");if(o+(n=void 0===n?i-o:_(n))>i)throw D("Wrong length");w(this,{buffer:e,byteLength:n,byteOffset:o}),r||(this.buffer=e,this.byteLength=n,this.byteOffset=o)},r&&(U(P,"byteLength"),U(M,"buffer"),U(M,"byteLength"),U(M,"byteOffset")),c(M.prototype,{getInt8:function(e){return j(this,1,e)[0]<<24>>24},getUint8:function(e){return j(this,1,e)[0]},getInt16:function(e){var t=j(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=j(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return R(j(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return R(j(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return S(j(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return S(j(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){W(this,1,e,A,t)},setUint8:function(e,t){W(this,1,e,A,t)},setInt16:function(e,t){W(this,2,e,C,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){W(this,2,e,C,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){W(this,4,e,B,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){W(this,4,e,B,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){W(this,4,e,L,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){W(this,8,e,x,t,arguments.length>2?arguments[2]:void 0)}});v(P,"ArrayBuffer"),v(M,"DataView"),e.exports={ArrayBuffer:P,DataView:M}},function(e,t,n){"use strict";var i=n(26),r=n(93),o=n(23);e.exports=function(e){for(var t=i(this),n=o(t.length),s=arguments.length,c=r(s>1?arguments[1]:void 0,n),a=s>2?arguments[2]:void 0,u=void 0===a?n:r(a,n);u>c;)t[c++]=e;return t}},,,,,function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var i=n(3),r=n(116).includes,o=n(189);i({target:"Array",proto:!0,forced:!n(50)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(e,t,n){"use strict";var i=n(3),r=n(482),o=n(34);i({target:"String",proto:!0,forced:!n(483)("includes")},{includes:function(e){return!!~String(o(this)).indexOf(r(e),arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var i=n(3),r=n(93),o=n(48),s=n(23),c=n(26),a=n(141),u=n(109),l=n(117),_=n(50),f=l("splice"),d=_("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min;i({target:"Array",proto:!0,forced:!f||!d},{splice:function(e,t){var n,i,l,_,f,d,g=c(this),b=s(g.length),m=r(e,b),v=arguments.length;if(0===v?n=i=0:1===v?(n=0,i=b-m):(n=v-2,i=h(p(o(t),0),b-m)),b+n-i>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(l=a(g,i),_=0;_<i;_++)(f=m+_)in g&&u(l,_,g[f]);if(l.length=i,n<i){for(_=m;_<b-i;_++)d=_+n,(f=_+i)in g?g[d]=g[f]:delete g[d];for(_=b;_>b-i+n;_--)delete g[_-1]}else if(n>i)for(_=b-i;_>m;_--)d=_+n-1,(f=_+i-1)in g?g[d]=g[f]:delete g[d];for(_=0;_<n;_++)g[_+m]=arguments[_+2];return g.length=b-i+n,l}})},function(e,t,n){var i=n(4),r=n(9),o=n(58),s=r("iterator");e.exports=!i((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,i){t.delete("b"),n+=i+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},function(e,t,n){var i=n(60),r=n(12),o=n(11),s=n(17).f,c=n(79),a=n(569),u=c("meta"),l=0,_=Object.isExtensible||function(){return!0},f=function(e){s(e,u,{value:{objectID:"O"+ ++l,weakData:{}}})},d=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,u)){if(!_(e))return"F";if(!t)return"E";f(e)}return e[u].objectID},getWeakData:function(e,t){if(!o(e,u)){if(!_(e))return!0;if(!t)return!1;f(e)}return e[u].weakData},onFreeze:function(e){return a&&d.REQUIRED&&_(e)&&!o(e,u)&&f(e),e}};i[u]=!0},function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(e,t,n){var i=n(48),r=n(23);e.exports=function(e){if(void 0===e)return 0;var t=i(e),n=r(t);if(t!==n)throw RangeError("Wrong length or index");return n}},function(e,t,n){var i=n(572);e.exports=function(e,t){var n=i(e);if(n%t)throw RangeError("Wrong offset");return n}},function(e,t,n){"use strict";var i=n(29),r=n(48),o=n(23),s=n(97),c=n(50),a=Math.min,u=[].lastIndexOf,l=!!u&&1/[1].lastIndexOf(1,-0)<0,_=s("lastIndexOf"),f=c("indexOf",{ACCESSORS:!0,1:0}),d=l||!_||!f;e.exports=d?function(e){if(l)return u.apply(this,arguments)||0;var t=i(this),n=o(t.length),s=n-1;for(arguments.length>1&&(s=a(s,r(arguments[1]))),s<0&&(s=n+s);s>=0;s--)if(s in t&&t[s]===e)return s||0;return-1}:u},,function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(91),n(108),n(195),n(98),n(144),n(211);var i=n(61);function r(e){return new Promise((function(t){return e.json().then((function(n){return t({status:e.status,ok:e.ok,json:n})})).catch((function(){return t({status:e.status,ok:e.ok,json:null})}))}))}function o(e,t){return new Promise((function(n,o){(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;return Promise.race([fetch(e,t),new Promise((function(e,t){return setTimeout((function(){return t(new Error("request timeout"))}),n)}))])})(e,t,t.timeout||1e4).then(r).then((function(e){return e.ok?n(e.json):o(new i.a(e.json?e.json.error:"HTTP Error",e.status))})).catch((function(e){return o(e)}))}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(465),n(83),n(137);function i(e){return!e.defaultUnchecked||e.matchPathChecked&&e.matchPathChecked&&location.pathname&&new RegExp(e.matchPathChecked).test(location.pathname)}},function(e,t,n){var i=n(3),r=n(647);i({target:"Date",proto:!0,forced:Date.prototype.toISOString!==r},{toISOString:r})},function(e,t,n){"use strict";var i=n(48),r=n(34);e.exports="".repeat||function(e){var t=String(r(this)),n="",o=i(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t,n){"use strict";var i=n(3),r=n(2),o=n(118),s=n(25),c=n(496),a=n(458),u=n(206),l=n(12),_=n(4),f=n(193),d=n(77),p=n(466);e.exports=function(e,t,n){var h=-1!==e.indexOf("Map"),g=-1!==e.indexOf("Weak"),b=h?"set":"add",m=r[e],v=m&&m.prototype,y=m,E={},w=function(e){var t=v[e];s(v,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(o(e,"function"!=typeof m||!(g||v.forEach&&!_((function(){(new m).entries().next()})))))y=n.getConstructor(t,e,h,b),c.REQUIRED=!0;else if(o(e,!0)){var O=new y,P=O[b](g?{}:-0,1)!=O,M=_((function(){O.has(1)})),T=f((function(e){new m(e)})),k=!g&&_((function(){for(var e=new m,t=5;t--;)e[b](t,t);return!e.has(-0)}));T||((y=t((function(t,n){u(t,y,e);var i=p(new m,t,y);return null!=n&&a(n,i[b],i,h),i}))).prototype=v,v.constructor=y),(M||k)&&(w("delete"),w("has"),h&&w("get")),(k||P)&&w(b),g&&v.clear&&delete v.clear}return E[e]=y,i({global:!0,forced:y!=m},E),d(y,e),g||n.setStrong(y,e,h),y}},function(e,t,n){"use strict";var i=n(17).f,r=n(76),o=n(263),s=n(95),c=n(206),a=n(458),u=n(157),l=n(248),_=n(13),f=n(496).fastKey,d=n(43),p=d.set,h=d.getterFor;e.exports={getConstructor:function(e,t,n,u){var l=e((function(e,i){c(e,l,t),p(e,{type:t,index:r(null),first:void 0,last:void 0,size:0}),_||(e.size=0),null!=i&&a(i,e[u],e,n)})),d=h(t),g=function(e,t,n){var i,r,o=d(e),s=b(e,t);return s?s.value=n:(o.last=s={index:r=f(t,!0),key:t,value:n,previous:i=o.last,next:void 0,removed:!1},o.first||(o.first=s),i&&(i.next=s),_?o.size++:e.size++,"F"!==r&&(o.index[r]=s)),e},b=function(e,t){var n,i=d(e),r=f(t);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==t)return n};return o(l.prototype,{clear:function(){for(var e=d(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,_?e.size=0:this.size=0},delete:function(e){var t=d(this),n=b(this,e);if(n){var i=n.next,r=n.previous;delete t.index[n.index],n.removed=!0,r&&(r.next=i),i&&(i.previous=r),t.first==n&&(t.first=i),t.last==n&&(t.last=r),_?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=d(this),i=s(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(i(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!b(this,e)}}),o(l.prototype,n?{get:function(e){var t=b(this,e);return t&&t.value},set:function(e,t){return g(this,0===e?0:e,t)}}:{add:function(e){return g(this,e=0===e?0:e,e)}}),_&&i(l.prototype,"size",{get:function(){return d(this).size}}),l},setStrong:function(e,t,n){var i=t+" Iterator",r=h(t),o=h(i);u(e,t,(function(e,t){p(this,{type:i,target:e,state:r(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(t)}}},function(e,t,n){"use strict";var i=n(3),r=n(4),o=n(485),s=n(15),c=n(93),a=n(23),u=n(202),l=o.ArrayBuffer,_=o.DataView,f=l.prototype.slice;i({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:r((function(){return!new l(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==f&&void 0===t)return f.call(s(this),e);for(var n=s(this).byteLength,i=c(e,n),r=c(void 0===t?n:t,n),o=new(u(this,l))(a(r-i)),d=new _(this),p=new _(o),h=0;i<r;)p.setUint8(h++,d.getUint8(i++));return o}})},function(e,t,n){n(462)("Uint8",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},function(e,t,n){"use strict";var i=n(52),r=n(574),o=i.aTypedArray;(0,i.exportTypedArrayMethod)("copyWithin",(function(e,t){return r.call(o(this),e,t,arguments.length>2?arguments[2]:void 0)}))},function(e,t,n){"use strict";var i=n(52),r=n(51).every,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("every",(function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var i=n(52),r=n(486),o=i.aTypedArray;(0,i.exportTypedArrayMethod)("fill",(function(e){return r.apply(o(this),arguments)}))},function(e,t,n){"use strict";var i=n(52),r=n(51).filter,o=n(202),s=i.aTypedArray,c=i.aTypedArrayConstructor;(0,i.exportTypedArrayMethod)("filter",(function(e){for(var t=r(s(this),e,arguments.length>1?arguments[1]:void 0),n=o(this,this.constructor),i=0,a=t.length,u=new(c(n))(a);a>i;)u[i]=t[i++];return u}))},function(e,t,n){"use strict";var i=n(52),r=n(51).find,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("find",(function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var i=n(52),r=n(51).findIndex,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("findIndex",(function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var i=n(52),r=n(51).forEach,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("forEach",(function(e){r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var i=n(52),r=n(116).includes,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("includes",(function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var i=n(52),r=n(116).indexOf,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("indexOf",(function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var i=n(2),r=n(52),o=n(91),s=n(9)("iterator"),c=i.Uint8Array,a=o.values,u=o.keys,l=o.entries,_=r.aTypedArray,f=r.exportTypedArrayMethod,d=c&&c.prototype[s],p=!!d&&("values"==d.name||null==d.name),h=function(){return a.call(_(this))};f("entries",(function(){return l.call(_(this))})),f("keys",(function(){return u.call(_(this))})),f("values",h,!p),f(s,h,!p)},function(e,t,n){"use strict";var i=n(52),r=i.aTypedArray,o=i.exportTypedArrayMethod,s=[].join;o("join",(function(e){return s.apply(r(this),arguments)}))},function(e,t,n){"use strict";var i=n(52),r=n(500),o=i.aTypedArray;(0,i.exportTypedArrayMethod)("lastIndexOf",(function(e){return r.apply(o(this),arguments)}))},function(e,t,n){"use strict";var i=n(52),r=n(51).map,o=n(202),s=i.aTypedArray,c=i.aTypedArrayConstructor;(0,i.exportTypedArrayMethod)("map",(function(e){return r(s(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(c(o(e,e.constructor)))(t)}))}))},function(e,t,n){"use strict";var i=n(52),r=n(480).left,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("reduce",(function(e){return r(o(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var i=n(52),r=n(480).right,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("reduceRight",(function(e){return r(o(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var i=n(52),r=i.aTypedArray,o=i.exportTypedArrayMethod,s=Math.floor;o("reverse",(function(){for(var e,t=r(this).length,n=s(t/2),i=0;i<n;)e=this[i],this[i++]=this[--t],this[t]=e;return this}))},function(e,t,n){"use strict";var i=n(52),r=n(23),o=n(499),s=n(26),c=n(4),a=i.aTypedArray;(0,i.exportTypedArrayMethod)("set",(function(e){a(this);var t=o(arguments.length>1?arguments[1]:void 0,1),n=this.length,i=s(e),c=r(i.length),u=0;if(c+t>n)throw RangeError("Wrong length");for(;u<c;)this[t+u]=i[u++]}),c((function(){new Int8Array(1).set({})})))},function(e,t,n){"use strict";var i=n(52),r=n(202),o=n(4),s=i.aTypedArray,c=i.aTypedArrayConstructor,a=i.exportTypedArrayMethod,u=[].slice;a("slice",(function(e,t){for(var n=u.call(s(this),e,t),i=r(this,this.constructor),o=0,a=n.length,l=new(c(i))(a);a>o;)l[o]=n[o++];return l}),o((function(){new Int8Array(1).slice()})))},function(e,t,n){"use strict";var i=n(52),r=n(51).some,o=i.aTypedArray;(0,i.exportTypedArrayMethod)("some",(function(e){return r(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var i=n(52),r=i.aTypedArray,o=i.exportTypedArrayMethod,s=[].sort;o("sort",(function(e){return s.call(r(this),e)}))},function(e,t,n){"use strict";var i=n(52),r=n(23),o=n(93),s=n(202),c=i.aTypedArray;(0,i.exportTypedArrayMethod)("subarray",(function(e,t){var n=c(this),i=n.length,a=o(e,i);return new(s(n,n.constructor))(n.buffer,n.byteOffset+a*n.BYTES_PER_ELEMENT,r((void 0===t?i:o(t,i))-a))}))},function(e,t,n){"use strict";var i=n(2),r=n(52),o=n(4),s=i.Int8Array,c=r.aTypedArray,a=r.exportTypedArrayMethod,u=[].toLocaleString,l=[].slice,_=!!s&&o((function(){u.call(new s(1))}));a("toLocaleString",(function(){return u.apply(_?l.call(c(this)):c(this),arguments)}),o((function(){return[1,2].toLocaleString()!=new s([1,2]).toLocaleString()}))||!o((function(){s.prototype.toLocaleString.call([1,2])})))},function(e,t,n){"use strict";var i=n(52).exportTypedArrayMethod,r=n(4),o=n(2).Uint8Array,s=o&&o.prototype||{},c=[].toString,a=[].join;r((function(){c.call({})}))&&(c=function(){return a.call(this)});var u=s.toString!=c;i("toString",c,u)},function(e,t,n){var i=n(3),r=n(4),o=n(29),s=n(56).f,c=n(13),a=r((function(){s(1)}));i({target:"Object",stat:!0,forced:!c||a,sham:!c},{getOwnPropertyDescriptor:function(e,t){return s(o(e),t)}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));n(196),n(91),n(508),n(108),n(83),n(650),n(253),n(509),n(510),n(511),n(512),n(513),n(514),n(515),n(516),n(517),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(532);var i=n(1);function r(e){Object(i.c)("appendGcmManifest");var t=void 0!==e?e:"/cleverpush-manifest.json";if("DISABLED"!==t){var n=document.createElement("link");n.rel="manifest",n.href=t,document.getElementsByTagName("head")[0].appendChild(n);var r=document.querySelectorAll("link[rel=manifest]");if(r&&r.length>1)for(var o=0;o<r.length;o+=1){var s=r[o];s.href.indexOf(t)>-1&&(document.querySelector("head").insertBefore(s,document.querySelector("head").children[0]),i.b.debug("Moved GCM manifest before other manifests."))}}}function o(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Panel}));var core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(135),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(266),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(82),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(196),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(201),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(264),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(154),core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_array_sort__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(468),core_js_modules_es_array_sort__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_array_sort__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_date_to_iso_string__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(504),core_js_modules_es_date_to_iso_string__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_date_to_iso_string__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_date_to_string__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(102),core_js_modules_es_date_to_string__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_date_to_string__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_function_bind__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(153),core_js_modules_es_function_bind__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_function_bind__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(112),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_object_define_property__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(81),core_js_modules_es_object_define_property__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_object_define_property__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(90),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_web_timers__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(211),core_js_modules_web_timers__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_web_timers__WEBPACK_IMPORTED_MODULE_14__),_utils_dom__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(151),_utils_translate__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(22),_utils_debug__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(1),_const_event__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(55);function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Panel=function(){function Panel(e,t,n){_classCallCheck(this,Panel),this.config=e,this.subscriptionManager=t,this.triggerEvent=n,__webpack_require__(654),this.tab=e.hidePanelNotifications?"settings":"notifications"}return _createClass(Panel,[{key:"show",value:function(){if(!this.panel){var e="cleverpush-panel";this.config&&this.config.notificationBellPosition&&(e+=" cleverpush-panel-position-"+this.config.notificationBellPosition),document.querySelector("body").appendChild(Object(_utils_dom__WEBPACK_IMPORTED_MODULE_15__.a)('<div class="'+e+'"><button class="cleverpush-panel-close" type="button">&times;</button><div class="cleverpush-panel-content"></div></div>'))}this.panel=document.querySelector(".cleverpush-panel"),this.closeButton=this.panel.querySelector(".cleverpush-panel-close"),this.closeButton&&this.closeButton.addEventListener("click",this.onCloseClick.bind(this)),this.showPanelContent(),this.triggerEvent(_const_event__WEBPACK_IMPORTED_MODULE_18__.a.PANEL_SHOWN)}},{key:"hide",value:function(){this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel),this.panel=null,this.closeButton=null,this.tabButtons=null,this.triggerEvent(_const_event__WEBPACK_IMPORTED_MODULE_18__.a.PANEL_HIDDEN)}},{key:"onCloseClick",value:function(e){e.preventDefault(),this.hide()}},{key:"onUnsubscribeClick",value:function(e){confirm(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_16__.a)("unsubscribe.confirm"))&&(this.onCloseClick(e),this.subscriptionManager.unsubscribe())}},{key:"setTab",value:function(e){this.tab=e,this.showPanelContent()}},{key:"onTabButtonClick",value:function(e){Object(_utils_debug__WEBPACK_IMPORTED_MODULE_17__.c)("onTabButtonClick",e.currentTarget.dataset.tab),e.preventDefault(),this.setTab(e.currentTarget.dataset.tab||"notifications")}},{key:"openNotification",value:function(e){e.preventDefault(),window.open(e.currentTarget.dataset.url,"_blank")}},{key:"showPanelContent",value:function showPanelContent(){var _this=this,panelContent=this.panel.querySelector(".cleverpush-panel-content"),content=this.config.hidePanelNotifications?"":'<div class="cleverpush-panel-buttons"><button type="button" class="cleverpush-panel-button'.concat("notifications"===this.tab?" active":"",'" data-tab="notifications">').concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_16__.a)("panel.notifications"),"</button>")+'<button type="button" class="cleverpush-panel-button'.concat("settings"===this.tab?" active":"",'" data-tab="settings">').concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_16__.a)("panel.settings"),"</button>")+"</div>",setPanelContent=function(e){panelContent.innerHTML=e,_this.tabButtons=_this.panel.querySelectorAll(".cleverpush-panel-button");for(var t=0;t<_this.tabButtons.length;t+=1){_this.tabButtons[t].addEventListener("click",_this.onTabButtonClick.bind(_this))}_this.notificationItems=_this.panel.querySelectorAll(".cleverpush-panel-notification");for(var n=0;n<_this.notificationItems.length;n+=1){_this.notificationItems[n].addEventListener("click",_this.openNotification.bind(_this))}};if("notifications"===this.tab)content+='<div class="spinner">\n                <div class="double-bounce1"></div>\n                <div class="double-bounce2"></div>\n            </div>',setPanelContent(content),this.subscriptionManager.getStoredNotifications().then((function(e){e.length?(content+='<div class="cleverpush-panel-notifications" style="display: none;">',e.slice(0,50).forEach((function(e){content+='<div class="cleverpush-panel-notification" data-url="'.concat(e.url,'">'),content+='<div class="cleverpush-panel-notification-title">'.concat(e.title,"</div>"),e.text&&(content+='<div class="cleverpush-panel-notification-text">'.concat(e.text,"</div>")),e.createdAt&&(content+='<div class="cleverpush-panel-notification-time">'.concat(new Date(e.createdAt).toISOString().substring(0,10),"</div>")),content+="</div>"})),content+="</div>"):content+='<div class="cleverpush-panel-notifications-empty">'.concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_16__.a)("panel.notificationsEmpty"),"</div>"),setPanelContent(content);var t=panelContent.querySelector(".spinner"),n=panelContent.querySelector(e.length?".cleverpush-panel-notifications":".cleverpush-panel-notifications-empty");t&&n&&Object(_utils_dom__WEBPACK_IMPORTED_MODULE_15__.e)(t,150,(function(){t.style.display="none",n.style.opacity=0,n.style.display="block",Object(_utils_dom__WEBPACK_IMPORTED_MODULE_15__.d)(n,150)}))}));else if("settings"===this.tab){var topicsContent,setSettingsContent=function setSettingsContent(){if(content+='<div class="cleverpush-panel-settings">'.concat(topicsContent||"",'<div class="cleverpush-panel-unsubscribe">')+'<button type="button" class="cleverpush-panel-unsubscribe-button">'+Object(_utils_translate__WEBPACK_IMPORTED_MODULE_16__.a)("unsubscribe.title")+"</button></div></div>",setPanelContent(content),_this.unsubscribeButton=_this.panel.querySelector(".cleverpush-panel-unsubscribe-button"),_this.unsubscribeButton&&_this.unsubscribeButton.addEventListener("click",_this.onUnsubscribeClick.bind(_this)),topicsContent){if(_this.config.topicsTemplateFunction&&topicsContent){var topicsDiv=panelContent.querySelector(".cleverpush-topics");if(topicsDiv)try{var templateFunc=eval("("+_this.config.topicsTemplateFunction+")");"function"==typeof templateFunc&&_this.subscriptionManager.getTopics().then((function(e){templateFunc(topicsDiv,_this.config,e,"panel"),_this.topicCheckboxes=_this.panel.querySelectorAll('.cleverpush-panel-topics input[type="'+(_this.config.confirmAlertRadioButtonTopics?"radio":"checkbox")+'"]')}))}catch(e){_utils_debug__WEBPACK_IMPORTED_MODULE_17__.b.error(e)}}else _this.topicCheckboxes=_this.panel.querySelectorAll('.cleverpush-panel-topic-selection input[type="'+(_this.config.confirmAlertRadioButtonTopics?"radio":"checkbox")+'"]');_this.saveTopicsButton=_this.panel.querySelector(".cleverpush-panel-save-topics-button"),_this.saveTopicsButton&&_this.saveTopicsButton.addEventListener("click",_this.saveTopics.bind(_this))}};this.config.channelTopics&&this.config.channelTopics.length?this.config.topicsTemplateFunction?(topicsContent="<div><h3>".concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_16__.a)("panel.editTopics"),'</h3><div class="cleverpush-topics cleverpush-panel-topics"></div><div class="cleverpush-panel-save-topics"><button type="button" class="cleverpush-panel-save-topics-button">').concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_16__.a)("panel.save"),"</div></button>"),setSettingsContent()):this.subscriptionManager.getTopics().then((function(e){var t=_this.config.channelTopics.filter((function(e){return!e.parentTopic}));topicsContent="".concat('<div class="cleverpush-topics cleverpush-panel-topics"><h3>'+Object(_utils_translate__WEBPACK_IMPORTED_MODULE_16__.a)("panel.editTopics")+'</h3><div class="cleverpush-panel-topic-selection">').concat(t.sort((function(e,t){return e.sort-t.sort})).map((function(t){var n=t.name;"windows-1252"!==document.characterSet&&"iso-8859-1"!==document.characterSet||(n=decodeURIComponent(escape(t.name)));var i=_this.config.channelTopics.filter((function(e){return e.parentTopic===t._id})),r='<div class="cleverpush-panel-topic"><label><input type="'.concat(_this.config.confirmAlertRadioButtonTopics?"radio":"checkbox",'" name="topics[]" value="').concat(t._id,'"').concat(e&&e.indexOf(t._id)>-1?' checked="checked"':"","> ").concat(n,"</label></div>");return i.length&&i.forEach((function(n){var i=n.name;if("windows-1252"===document.characterSet||"iso-8859-1"===document.characterSet)try{i=decodeURIComponent(escape(n.name))}catch(e){_utils_debug__WEBPACK_IMPORTED_MODULE_17__.b.debug(e)}var o=_this.config.confirmAlertRadioButtonTopics||t.childTopicsRadioButtons?"radio":"checkbox";r+='<div class="topic-child" data-parent-topic="'.concat(t._id,'" style="margin-left: 20px; font-size: 90%; ').concat("",'"><label><input type="').concat(o,'" name="topics[]" value="').concat(n._id,'" ').concat(e&&e.indexOf(n._id)>-1?' checked="checked"':"","> ").concat(i,"</label></div>")})),r})).join(""),'</div><button type="button" class="cleverpush-panel-save-topics-button">').concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_16__.a)("panel.save"),"</button>")+"</div>",setSettingsContent()})):setSettingsContent()}}},{key:"saveTopics",value:function(e){var t=this;if(e.preventDefault(),!this.savingTopics){this.savingTopics=!0,this.saveTopicsButton.innerHTML+="...",this.saveTopicsButton.disabled=!0;var n=[];if(this.topicCheckboxes=this.panel.querySelectorAll('.cleverpush-panel-topics input[type="'+(this.config.confirmAlertRadioButtonTopics?"radio":"checkbox")+'"]'),this.topicCheckboxes&&this.topicCheckboxes.length)for(var i=0;i<this.topicCheckboxes.length;i+=1){var r=this.topicCheckboxes[i];r.checked&&n.push(r.value)}var o=function(e){t.saveTopicsButton.disabled=!1,e?(t.saveTopicsButton.innerHTML='<span style="color: #009222">'.concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_16__.a)("panel.successfullySaved"),"</span>"),setTimeout((function(){t.saveTopicsButton.innerHTML=Object(_utils_translate__WEBPACK_IMPORTED_MODULE_16__.a)("panel.save"),t.savingTopics=!1}),2e3)):(t.saveTopicsButton.innerHTML=Object(_utils_translate__WEBPACK_IMPORTED_MODULE_16__.a)("panel.save"),t.savingTopics=!1)};this.subscriptionManager.setTopics(n).then((function(){t.subscriptionManager.sync().then((function(){o(!0)})).catch((function(){o(!1)}))})).catch((function(){o(!1)}))}}}]),Panel}()},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(3),r=n(51).findIndex,o=n(189),s=n(50),c=!0,a=s("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){c=!1})),i({target:"Array",proto:!0,forced:c||!a},{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o("findIndex")},function(e,t,n){"use strict";var i=n(3),r=n(480).left,o=n(97),s=n(50),c=o("reduce"),a=s("reduce",{1:0});i({target:"Array",proto:!0,forced:!c||!a},{reduce:function(e){return r(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){n(3)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var i=/[^\0-\u007E]/,r=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",s=Math.floor,c=String.fromCharCode,a=function(e){return e+22+75*(e<26)},u=function(e,t,n){var i=0;for(e=n?s(e/700):e>>1,e+=s(e/t);e>455;i+=36)e=s(e/35);return s(i+36*e/(e+38))},l=function(e){var t,n,i=[],r=(e=function(e){for(var t=[],n=0,i=e.length;n<i;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&r)<<10)+(1023&o)+65536):(t.push(r),n--)}else t.push(r)}return t}(e)).length,l=128,_=0,f=72;for(t=0;t<e.length;t++)(n=e[t])<128&&i.push(c(n));var d=i.length,p=d;for(d&&i.push("-");p<r;){var h=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=l&&n<h&&(h=n);var g=p+1;if(h-l>s((2147483647-_)/g))throw RangeError(o);for(_+=(h-l)*g,l=h,t=0;t<e.length;t++){if((n=e[t])<l&&++_>2147483647)throw RangeError(o);if(n==l){for(var b=_,m=36;;m+=36){var v=m<=f?1:m>=f+26?26:m-f;if(b<v)break;var y=b-v,E=36-v;i.push(c(a(v+y%E))),b=s(y/E)}i.push(c(a(b))),f=u(_,g,p==d),_=0,++p}}++_,++l}return i.join("")};e.exports=function(e){var t,n,o=[],s=e.toLowerCase().replace(r,".").split(".");for(t=0;t<s.length;t++)n=s[t],o.push(i.test(n)?"xn--"+l(n):n);return o.join(".")}},function(e,t,n){"use strict";n(91);var i=n(3),r=n(44),o=n(495),s=n(25),c=n(263),a=n(77),u=n(245),l=n(43),_=n(206),f=n(11),d=n(95),p=n(142),h=n(15),g=n(12),b=n(76),m=n(42),v=n(567),y=n(156),E=n(9),w=r("fetch"),O=r("Headers"),P=E("iterator"),M=l.set,T=l.getterFor("URLSearchParams"),k=l.getterFor("URLSearchParamsIterator"),D=/\+/g,I=Array(4),S=function(e){return I[e-1]||(I[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},A=function(e){try{return decodeURIComponent(e)}catch(t){return e}},C=function(e){var t=e.replace(D," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(S(n--),A);return t}},B=/[!'()~]|%20/g,R={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},L=function(e){return R[e]},x=function(e){return encodeURIComponent(e).replace(B,L)},U=function(e,t){if(t)for(var n,i,r=t.split("&"),o=0;o<r.length;)(n=r[o++]).length&&(i=n.split("="),e.push({key:C(i.shift()),value:C(i.join("="))}))},j=function(e){this.entries.length=0,U(this.entries,e)},W=function(e,t){if(e<t)throw TypeError("Not enough arguments")},K=u((function(e,t){M(this,{type:"URLSearchParamsIterator",iterator:v(T(e).entries),kind:t})}),"Iterator",(function(){var e=k(this),t=e.kind,n=e.iterator.next(),i=n.value;return n.done||(n.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),n})),N=function(){_(this,N,"URLSearchParams");var e,t,n,i,r,o,s,c,a,u=arguments.length>0?arguments[0]:void 0,l=this,d=[];if(M(l,{type:"URLSearchParams",entries:d,updateURL:function(){},updateSearchParams:j}),void 0!==u)if(g(u))if("function"==typeof(e=y(u)))for(n=(t=e.call(u)).next;!(i=n.call(t)).done;){if((s=(o=(r=v(h(i.value))).next).call(r)).done||(c=o.call(r)).done||!o.call(r).done)throw TypeError("Expected sequence with length 2");d.push({key:s.value+"",value:c.value+""})}else for(a in u)f(u,a)&&d.push({key:a,value:u[a]+""});else U(d,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")},q=N.prototype;c(q,{append:function(e,t){W(arguments.length,2);var n=T(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){W(arguments.length,1);for(var t=T(this),n=t.entries,i=e+"",r=0;r<n.length;)n[r].key===i?n.splice(r,1):r++;t.updateURL()},get:function(e){W(arguments.length,1);for(var t=T(this).entries,n=e+"",i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){W(arguments.length,1);for(var t=T(this).entries,n=e+"",i=[],r=0;r<t.length;r++)t[r].key===n&&i.push(t[r].value);return i},has:function(e){W(arguments.length,1);for(var t=T(this).entries,n=e+"",i=0;i<t.length;)if(t[i++].key===n)return!0;return!1},set:function(e,t){W(arguments.length,1);for(var n,i=T(this),r=i.entries,o=!1,s=e+"",c=t+"",a=0;a<r.length;a++)(n=r[a]).key===s&&(o?r.splice(a--,1):(o=!0,n.value=c));o||r.push({key:s,value:c}),i.updateURL()},sort:function(){var e,t,n,i=T(this),r=i.entries,o=r.slice();for(r.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(r[t].key>e.key){r.splice(t,0,e);break}t===n&&r.push(e)}i.updateURL()},forEach:function(e){for(var t,n=T(this).entries,i=d(e,arguments.length>1?arguments[1]:void 0,3),r=0;r<n.length;)i((t=n[r++]).value,t.key,this)},keys:function(){return new K(this,"keys")},values:function(){return new K(this,"values")},entries:function(){return new K(this,"entries")}},{enumerable:!0}),s(q,P,q.entries),s(q,"toString",(function(){for(var e,t=T(this).entries,n=[],i=0;i<t.length;)e=t[i++],n.push(x(e.key)+"="+x(e.value));return n.join("&")}),{enumerable:!0}),a(N,"URLSearchParams"),i({global:!0,forced:!o},{URLSearchParams:N}),o||"function"!=typeof w||"function"!=typeof O||i({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,i,r=[e];return arguments.length>1&&(t=arguments[1],g(t)&&(n=t.body,"URLSearchParams"===p(n)&&((i=t.headers?new O(t.headers):new O).has("content-type")||i.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=b(t,{body:m(0,String(n)),headers:m(0,i)}))),r.push(t)),w.apply(this,r)}}),e.exports={URLSearchParams:N,getState:T}},function(e,t,n){var i=n(15),r=n(156);e.exports=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return i(t.call(e))}},function(e,t,n){"use strict";var i=n(506),r=n(507);e.exports=i("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r)},function(e,t,n){var i=n(4);e.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t){var n=Math.abs,i=Math.pow,r=Math.floor,o=Math.log,s=Math.LN2;e.exports={pack:function(e,t,c){var a,u,l,_=new Array(c),f=8*c-t-1,d=(1<<f)-1,p=d>>1,h=23===t?i(2,-24)-i(2,-77):0,g=e<0||0===e&&1/e<0?1:0,b=0;for((e=n(e))!=e||e===1/0?(u=e!=e?1:0,a=d):(a=r(o(e)/s),e*(l=i(2,-a))<1&&(a--,l*=2),(e+=a+p>=1?h/l:h*i(2,1-p))*l>=2&&(a++,l/=2),a+p>=d?(u=0,a=d):a+p>=1?(u=(e*l-1)*i(2,t),a+=p):(u=e*i(2,p-1)*i(2,t),a=0));t>=8;_[b++]=255&u,u/=256,t-=8);for(a=a<<t|u,f+=t;f>0;_[b++]=255&a,a/=256,f-=8);return _[--b]|=128*g,_},unpack:function(e,t){var n,r=e.length,o=8*r-t-1,s=(1<<o)-1,c=s>>1,a=o-7,u=r-1,l=e[u--],_=127&l;for(l>>=7;a>0;_=256*_+e[u],u--,a-=8);for(n=_&(1<<-a)-1,_>>=-a,a+=t;a>0;n=256*n+e[u],u--,a-=8);if(0===_)_=1-c;else{if(_===s)return n?NaN:l?-1/0:1/0;n+=i(2,t),_-=c}return(l?-1:1)*n*i(2,_-t)}}},function(e,t,n){var i=n(2),r=n(4),o=n(193),s=n(52).NATIVE_ARRAY_BUFFER_VIEWS,c=i.ArrayBuffer,a=i.Int8Array;e.exports=!s||!r((function(){a(1)}))||!r((function(){new a(-1)}))||!o((function(e){new a,new a(null),new a(1.5),new a(e)}),!0)||r((function(){return 1!==new a(new c(2),1,void 0).length}))},function(e,t,n){var i=n(48);e.exports=function(e){var t=i(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},function(e,t,n){var i=n(26),r=n(23),o=n(156),s=n(199),c=n(95),a=n(52).aTypedArrayConstructor;e.exports=function(e){var t,n,u,l,_,f,d=i(e),p=arguments.length,h=p>1?arguments[1]:void 0,g=void 0!==h,b=o(d);if(null!=b&&!s(b))for(f=(_=b.call(d)).next,d=[];!(l=f.call(_)).done;)d.push(l.value);for(g&&p>2&&(h=c(h,arguments[2],2)),n=r(d.length),u=new(a(this))(n),t=0;n>t;t++)u[t]=g?h(d[t],t):d[t];return u}},function(e,t,n){"use strict";var i=n(26),r=n(93),o=n(23),s=Math.min;e.exports=[].copyWithin||function(e,t){var n=i(this),c=o(n.length),a=r(e,c),u=r(t,c),l=arguments.length>2?arguments[2]:void 0,_=s((void 0===l?c:r(l,c))-u,c-a),f=1;for(u<a&&a<u+_&&(f=-1,u+=_-1,a+=_-1);_-- >0;)u in n?n[a]=n[u]:delete n[a],a+=f,u+=f;return n}},function(e,t,n){var i=n(3),r=n(500);i({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},,,,function(e,t,n){var i,r;!function(o,s){"use strict";void 0===(r="function"==typeof(i=function(){var e=function(){},t="undefined"!=typeof window&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function i(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function r(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(n){return"debug"===n&&(n="log"),"undefined"!=typeof console&&("trace"===n&&t?r:void 0!==console[n]?i(console,n):void 0!==console.log?i(console,"log"):e)}function s(t,i){for(var r=0;r<n.length;r++){var o=n[r];this[o]=r<t?e:this.methodFactory(o,t,i)}this.log=this.debug}function c(e,t,n){return function(){"undefined"!=typeof console&&(s.call(this,t,n),this[e].apply(this,arguments))}}function a(e,t,n){return o(e)||c.apply(this,arguments)}function u(e,t,i){var r,o=this,c="loglevel";function u(){var e;if("undefined"!=typeof window){try{e=window.localStorage[c]}catch(e){}if(void 0===e)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(c)+"=");-1!==n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===o.levels[e]&&(e=void 0),e}}e&&(c+=":"+e),o.name=e,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=i||a,o.getLevel=function(){return r},o.setLevel=function(t,i){if("string"==typeof t&&void 0!==o.levels[t.toUpperCase()]&&(t=o.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(r=t,!1!==i&&function(e){var t=(n[e]||"silent").toUpperCase();if("undefined"!=typeof window){try{return void(window.localStorage[c]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"="+t+";"}catch(e){}}}(t),s.call(o,t,e),"undefined"==typeof console&&t<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(e){u()||o.setLevel(e,!1)},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e)},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e)};var l=u();null==l&&(l=null==t?"WARN":t),o.setLevel(l,!1)}var l=new u,_={};l.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=_[e];return t||(t=_[e]=new u(e,l.getLevel(),l.methodFactory)),t};var f="undefined"!=typeof window?window.log:void 0;return l.noConflict=function(){return"undefined"!=typeof window&&window.log===l&&(window.log=f),l},l.getLoggers=function(){return _},l})?i.call(t,n,t,e):i)||(e.exports=r)}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n(148),n(149),n(150),n(135),n(196),n(91),n(102),n(153),n(254),n(81),n(255),n(256),n(108),n(195),n(257),n(137),n(98),n(144),n(211);var i=n(268),r=n(55),o=n(258),s=n(1),c=n(61),a=n(22);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d(e);if(t){var r=d(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(f,e);var t,n,i,u=_(f);function f(e,t,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(i=u.call(this,e,t,n)).storageManager.initDb(),i.triggerEvent(r.a.INITIALIZED),i}return t=f,(n=[{key:"isSubscribed",value:function(e){var t=this;if(void 0!==e&&e){if(!this.config.safariWebsitePushId)return!1;var n=window.safari.pushNotification.permission(this.config.safariWebsitePushId),i=n.permission,r=n.deviceToken;return!("granted"!==i||!r)&&this.storageManager.isSubscribed(!1,!0)}return new Promise((function(e){if(t.config.safariWebsitePushId){var n=window.safari.pushNotification.permission(t.config.safariWebsitePushId),i=n.permission,r=n.deviceToken;if("granted"===i&&r)return t.storageManager.isSubscribed().then((function(n){n?t.storageManager.checkIfShouldSync().then((function(n){n?t.sync().then((function(){e(!0)})).catch((function(t){s.b.warn("error while syncing",t),e(!0)})):e(!0)})):e(!1)}));e(!1)}else e(!1)}))}},{key:"canSubscribe",value:function(){var e=this;return new Promise((function(t,n){if(e.config.safariWebsitePushId&&e.config.safariWebsitePushId.length)if(e.config.domain||e.config.channelDomain){try{window.safari.pushNotification.requestPermission("https://",e.config.safariWebsitePushId,null)}catch(e){"string"==typeof e&&e.indexOf("user gesture")>-1||n(e)}e.storageManager.canSubscribe().then((function(i){i?e.isSubscribed().then((function(i){i?n(new c.a("User is already subscribed","subscribed")):"denied"===window.safari.pushNotification.permission(e.config.safariWebsitePushId).permission?n(new c.a("User denied notifications","denied")):(e.config.isSafari_12_1&&e.api.getSyncParameters().then((function(t){e.cachedSyncParameters=t})),t(!0))})):n(new c.a("User has manually unsubscribed or denied notifications","unsubscribed"))})).catch((function(e){n(e)}))}else t(!1),s.b.warn("Channel domain is not set but required for safari.");else t(!1),s.b.warn("Safari web push ID not set.")}))}},{key:"subscribeForce",value:function(){return this.subscribe()}},{key:"subscribe",value:function(){var e=this;return new Promise((function(t,n){if(e.isSubscribed(!0))e.confirm&&e.confirm.hideBackdrop(),t();else if(e.isSubscribing)n(new o.a("A subscription process is already in progress."));else if(e.config.safariWebsitePushId){var i;e.isSubscribing=!0,function o(u){var l=u.permission,_=u.deviceToken;if(i&&"default"!==l&&clearInterval(i),"default"===l){if(s.b.info("calling window.safari.pushNotification.requestPermission"),e.config.isSafari_12_1){e.cachedSyncParameters||(e.cachedSyncParameters=e.api.getSyncParameters(!0));try{window.safari.pushNotification.requestPermission(e.config.safariWebServiceUrl||"".concat(e.config.apiEndpoint,"/channel/").concat(e.config.channelId,"/safari"),e.config.safariWebsitePushId,e.cachedSyncParameters,o.bind(e))}catch(e){s.b.error("Safari error:",e),n(e)}}else e.api.getSyncParameters().then((function(t){try{window.safari.pushNotification.requestPermission(e.config.safariWebServiceUrl||"".concat(e.config.apiEndpoint,"/channel/").concat(e.config.channelId,"/safari"),e.config.safariWebsitePushId,t,o.bind(e))}catch(e){s.b.error("Safari error:",e),n(e)}}));i=setInterval((function(){var t=window.safari.pushNotification.permission(e.config.safariWebsitePushId);"default"!==t.permission&&o(t)}),100),setTimeout((function(){"default"===window.safari.pushNotification.permission(e.config.safariWebsitePushId).permission&&(i&&clearInterval(i),e.confirm&&e.confirm.hideBackdrop(),e.storageManager.setClosed())}),3e4)}else"denied"===l?(e.confirm&&e.confirm.hideBackdrop(),n(new c.a(Object(a.a)("popup.info").formatCleverPush("<strong>"+(Object(a.a)("confirm.allowBrowser")||Object(a.a)("confirm.allow"))+"</strong>"),"denied"))):"granted"===l&&(e.confirm&&(e.confirm.hideBackdrop(),e.config.confirmAlertSelectTopicsLater&&e.confirm.appendConfirmBox(e.config.confirmAlertSelectTopicsLaterTheme||"cleverpush-confirm-default",!0)),e.sync({deviceToken:_}).then((function(){e.isSubscribing=!1,e.triggerEvent(r.a.SUBSCRIBED,e.storageManager.getSubscriptionId()),t(l)})))}(window.safari.pushNotification.permission(e.config.safariWebsitePushId))}else s.b.warn("Safari Website Push ID missing"),n(new c.a("Safari Website Push ID missing","internal"))}))}},{key:"unsubscribe",value:function(e){var t=this,n=this.storageManager.getSubscriptionId();return n?this.api.unsubscribe(n).then((function(){t.storageManager.setUnsubscribed(e),t.triggerEvent(r.a.UNSUBSCRIBED)})):Promise.resolve()}},{key:"hasNotificationPermission",value:function(){return Promise.resolve("granted"===window.safari.pushNotification.permission(this.config.safariWebsitePushId).permission)}},{key:"getNotificationPermission",value:function(){return window.safari.pushNotification.permission(this.config.safariWebsitePushId).permission}}])&&l(t.prototype,n),i&&l(t,i),f}(i.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(148),n(149),n(150),n(196),n(91),n(153),n(81),n(108),n(98),n(144),n(211);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(t,i,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.webBanner=t,this.config=i,this.subscriptionManager=r,this.api=o,this.element=null,n(655)}var t,o,s;return t=e,(o=[{key:"show",value:function(){var e=this;this.element=document.createElement("div"),this.element.className="cleverpush-banner",this.element.innerHTML='\n      <div class="banner-content">\n        <button type="button" class="banner-close">&times;</button>\n        <iframe frameborder="0" scrolling="no" allowtransparency></iframe>\n      </div>\n    ';var t=document.body;if(this.webBanner.appendToSelector&&(t=document.querySelector(this.webBanner.appendToSelector)),this.webBanner.customCss){var n=document.createElement("style");n.innerHTML=this.webBanner.customCss,document.head.appendChild(n)}if(t){if(t.appendChild(this.element),this.closeButton=this.element.querySelector(".overlay-close"),this.closeButton&&this.closeButton.addEventListener("click",this.onCloseClick.bind(this)),this.content=this.element.querySelector(".banner-content"),this.content&&(this.iframe=this.content.querySelector("iframe"),this.iframe)){var r=this.webBanner.content||"";r+="\n          <style>\n            body, body > table {\n              background-color: transparent !important;\n            }\n          </style>\n          ",this.iframe.contentWindow.document.write(r),this.iframe.contentWindow.document.close();var o=0;!function t(){window.requestAnimationFrame((function(){e.iframe.style.height=0,e.iframe.style.height=e.iframe.contentWindow.document.body.scrollHeight+"px",++o<10&&setTimeout(t,100)}))}()}if(this.webBanner.darkenBackground?this.element.style.backgroundColor="rgba(0,0,0,.75)":(this.element.style.pointerEvents="none",this.content.style.pointerEvents="initial"),this.content.style.backgroundColor="transparent",this.element.addEventListener("click",(function(t){t.target===t.currentTarget&&(e.element.style.display="none")})),"object"===i(this.webBanner.style)){for(var s in"top"===this.webBanner.style.align&&(this.content.style.top=0),"bottom"===this.webBanner.style.align&&(this.content.style.bottom=0),"left"===this.webBanner.style.align&&(this.content.style.left=0),"right"===this.webBanner.style.align&&(this.content.style.right=0),"top"===this.webBanner.style.align&&delete this.webBanner.style.bottom,"bottom"===this.webBanner.style.align&&delete this.webBanner.style.top,"left"===this.webBanner.style.align&&delete this.webBanner.style.right,"right"===this.webBanner.style.align&&delete this.webBanner.style.left,this.webBanner.style)if(this.webBanner.style.hasOwnProperty(s)){var c=this.webBanner.style[s];"backgroundImage"===s&&c.indexOf("url(")<0&&(c="url("+c+")"),this.content.style[s]="number"==typeof c?c+"px":c}this.content.style.align&&"center"!==this.content.style.align||(this.content.style.margin="50px auto 0",this.content.style.maxHeight="calc(100% - 100px)"),this.content.style.fullWidth?this.content.style.width="100%":this.webBanner.style.align&&"center"!==this.webBanner.style.align?this.content.style.width=(this.webBanner.style.width||600)+"px":(this.content.style.left="50%",this.content.style.width=(this.webBanner.style.width||600)+"px",this.content.style.marginLeft=-1*(this.webBanner.style.width||600)/2+"px")}this.closeButton=this.element.querySelector(".banner-close"),this.closeButton&&(this.closeButton.addEventListener("click",(function(){return e.element.style.display="none"})),this.webBanner.style&&this.webBanner.style.color&&(this.closeButton.style.color=this.webBanner.style.color))}}},{key:"onClick",value:function(e){if(e.preventDefault(),"function"==typeof this.onClickCallback&&this.onClickCallback(),this.element.style.display="none",this.webBanner.buttonUrl)try{window.open(this.webBanner.buttonUrl,"_blank")||(location.href=this.webBanner.buttonUrl)}catch(e){location.href=this.webBanner.buttonUrl}}},{key:"onCloseClick",value:function(e){e.preventDefault(),e.stopPropagation(),"function"==typeof this.onClickCallback&&this.onClickCallback(),this.element.style.display="none"}}])&&r(t.prototype,o),s&&r(t,s),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(135),n(153),n(81);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(t,i,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.notification=t,this.config=i,this.subscriptionManager=r,this.api=o,this.element=null,n(658)}var t,r,o;return t=e,(r=[{key:"show",value:function(){this.element=document.createElement("div"),this.element.className="cleverpush-page-banner-notification",this.notification.pageBannerPosition&&(this.element.className+=" "+this.element.className+"-"+this.notification.pageBannerPosition),this.notification.pageBannerTimeout&&(this.element.style.animationDelay=this.notification.pageBannerTimeout+"s"),this.element.innerHTML='\n      <div class="pull-right text-muted notification-preview-windows-icons close-btn"><span>&times;</span></div>\n      <div class="notification-icon" style="background-image: url(\''.concat(this.notification.iconUrl||this.config.channelIcon,'\');"></div>\n      <div class="notification-content">\n      <p class="notification-title">').concat(this.notification.title,"</p>\n      ").concat(this.notification.text?'<p class="notification-text">'.concat(this.notification.text,"</p>"):"","\n      ").concat(this.notification.mediaUrl?'<p class="notification-media"><img src="'.concat(this.notification.mediaUrl,'"></p>'):"",'\n      <p class="notification-origin text-muted">').concat(location.hostname,'</p>\n      </div>\n      <div class="cleverpush-clearfix"></div>\n    '),this.element.addEventListener("click",this.onClick.bind(this)),this.element.addEventListener("touchstart",this.onClick.bind(this)),document.body&&(document.body.appendChild(this.element),this.closeButton=this.element.querySelector(".close-btn"),this.closeButton&&(this.closeButton.addEventListener("click",this.onCloseClick.bind(this)),this.closeButton.addEventListener("touchstart",this.onCloseClick.bind(this)))),this.notification._id&&this.api.request("POST","/notification/page-banner-delivered",{notificationId:this.notification._id})}},{key:"onClick",value:function(e){if(e.preventDefault(),"function"==typeof this.onClickCallback&&this.onClickCallback(),this.notification._id&&this.api.request("POST","/notification/page-banner-clicked",{notificationId:this.notification._id}),this.element.style.display="none",this.notification.url)try{window.open(this.notification.url,"_blank")||(location.href=this.notification.url)}catch(e){location.href=this.notification.url}}},{key:"onCloseClick",value:function(e){e.preventDefault(),e.stopPropagation(),"function"==typeof this.onClickCallback&&this.onClickCallback(),this.element.style.display="none"}}])&&i(t.prototype,r),o&&i(t,o),e}()},function(e,t,n){var i=n(3),r=n(12),o=n(15),s=n(11),c=n(56),a=n(113);i({target:"Reflect",stat:!0},{get:function e(t,n){var i,u,l=arguments.length<3?t:arguments[2];return o(t)===l?t[n]:(i=c.f(t,n))?s(i,"value")?i.value:void 0===i.get?void 0:i.get.call(l):r(u=a(t))?e(u,n,l):void 0}})},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return x}));n(148),n(149),n(150),n(135),n(266),n(82),n(91),n(504),n(102),n(153),n(112),n(200),n(81),n(108),n(83),n(137),n(98),n(253),n(90),n(144);var i=n(249),r=n.n(i);function o(){var e=new Date;return e.setHours(0,0,0,0),e}function s(e,t){return(e&&e.toDateString())===(t&&t.toDateString())}function c(e,t,n){var i=(e=new Date(e)).getDate(),r=e.getMonth()+t;return e.setDate(1),e.setMonth(n?(12+r)%12:r),e.setDate(i),e.getDate()<i&&e.setDate(0),e}function a(e,t){return(e=new Date(e)).setFullYear(e.getFullYear()+t),e}function u(e){return function(t){return function(e){return(e=new Date(e)).setHours(0,0,0,0),e}("string"==typeof t?e(t):t)}}function l(e,t,n){return e<t?t:e>n?n:e}n(211);function _(e,t){var n=void 0;return function(){clearTimeout(n),n=setTimeout(t,e)}}function f(){}function d(){for(var e=arguments,t=e[0],n=1;n<e.length;++n){var i=e[n]||{};for(var r in i)t[r]=i[r]}return t}var p={days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],today:"Today",clear:"Clear",close:"Close"};function h(e){e=e||{};var t=u((e=d({lang:p,mode:"dp-modal",hilightedDate:o(),format:function(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()},parse:function(e){var t=new Date(e);return isNaN(t)?o():t},dateClass:function(){},inRange:function(){return!0},appendTo:document.body},e)).parse);return e.lang=d(p,e.lang),e.parse=t,e.inRange=function(e){var t=e.inRange;return function(n,i){return t(n,i)&&e.min<=n&&e.max>=n}}(e),e.min=t(e.min||a(o(),-100)),e.max=t(e.max||a(o(),100)),e.hilightedDate=e.parse(e.hilightedDate),e}n(196),n(467),n(201),n(264),n(207);var g=37,b=38,m=39,v=40,y=13,E=27;function w(e,t,n){return t.addEventListener(e,n,!0),function(){t.removeEventListener(e,n,!0)}}var O=function(){var e=window.CustomEvent;"function"!=typeof e&&((e=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}).prototype=window.Event.prototype);return e}();var P={day:{onKeyDown:function(e,t){var n=e.keyCode,i=n===g?-1:n===m?1:n===b?-7:n===v?7:0;n===E?t.close():i&&(e.preventDefault(),t.setState({hilightedDate:(r=t.state.hilightedDate,o=i,(r=new Date(r)).setDate(r.getDate()+o),r)}));var r,o},onClick:{"dp-day":function(e,t){t.setState({selectedDate:new Date(parseInt(e.target.getAttribute("data-date")))})},"dp-next":function(e,t){var n=t.state.hilightedDate;t.setState({hilightedDate:c(n,1)})},"dp-prev":function(e,t){var n=t.state.hilightedDate;t.setState({hilightedDate:c(n,-1)})},"dp-today":function(e,t){t.setState({selectedDate:o()})},"dp-clear":function(e,t){t.setState({selectedDate:null})},"dp-close":function(e,t){t.close()},"dp-cal-month":function(e,t){t.setState({view:"month"})},"dp-cal-year":function(e,t){t.setState({view:"year"})}},render:function(e){var t=e.opts,n=t.lang,i=e.state,r=n.days,c=t.dayOffset||0,a=i.selectedDate,u=i.hilightedDate,l=u.getMonth(),_=o().getTime();return'<div class="dp-cal"><header class="dp-cal-header"><button tabindex="-1" type="button" class="dp-prev">Prev</button><button tabindex="-1" type="button" class="dp-cal-month">'+n.months[l]+'</button><button tabindex="-1" type="button" class="dp-cal-year">'+u.getFullYear()+'</button><button tabindex="-1" type="button" class="dp-next">Next</button></header><div class="dp-days">'+r.map((function(e,t){return'<span class="dp-col-header">'+r[(t+c)%r.length]+"</span>"})).join("")+function(e,t,n){var i="",r=new Date(e);r.setDate(1),r.setDate(1-r.getDay()+t),t&&r.getDate()===t+1&&r.setDate(t-6);for(var o=0;o<42;++o)i+=n(r),r.setDate(r.getDate()+1);return i}(u,c,(function(n){var i=n.getMonth()!==l,r=!t.inRange(n),o=n.getTime()===_,c="dp-day";return c+=i?" dp-edge-day":"",c+=s(n,u)?" dp-current":"",c+=s(n,a)?" dp-selected":"",c+=r?" dp-day-disabled":"",c+=o?" dp-day-today":"",'<button tabindex="-1" type="button" class="'+(c+=" "+t.dateClass(n,e))+'" data-date="'+n.getTime()+'">'+n.getDate()+"</button>"}))+'</div><footer class="dp-cal-footer"><button tabindex="-1" type="button" class="dp-today">'+n.today+'</button><button tabindex="-1" type="button" class="dp-clear">'+n.clear+'</button><button tabindex="-1" type="button" class="dp-close">'+n.close+"</button></footer></div>"}},year:{render:function(e){var t=e.state,n=t.hilightedDate.getFullYear(),i=t.selectedDate.getFullYear();return'<div class="dp-years">'+function(e,t){for(var n="",i=e.opts.max.getFullYear();i>=e.opts.min.getFullYear();--i)n+=t(i);return n}(e,(function(e){var t="dp-year";return t+=e===n?" dp-current":"",'<button tabindex="-1" type="button" class="'+(t+=e===i?" dp-selected":"")+'" data-year="'+e+'">'+e+"</button>"}))+"</div>"},onKeyDown:function(e,t){var n=e.keyCode,i=t.opts,r=n===g||n===b?1:n===m||n===v?-1:0;if(n===E)t.setState({view:"day"});else if(r){e.preventDefault();var o=a(t.state.hilightedDate,r);t.setState({hilightedDate:l(o,i.min,i.max)})}},onClick:{"dp-year":function(e,t){t.setState({hilightedDate:(n=t.state.hilightedDate,i=parseInt(e.target.getAttribute("data-year")),(n=new Date(n)).setFullYear(i),n),view:"day"});var n,i}}},month:{onKeyDown:function(e,t){var n=e.keyCode,i=n===g?-1:n===m?1:n===b?-3:n===v?3:0;n===E?t.setState({view:"day"}):i&&(e.preventDefault(),t.setState({hilightedDate:c(t.state.hilightedDate,i,!0)}))},onClick:{"dp-month":function(e,t){t.setState({hilightedDate:(n=t.state.hilightedDate,i=parseInt(e.target.getAttribute("data-month")),c(n,i-n.getMonth())),view:"day"});var n,i}},render:function(e){var t=e.opts.lang.months,n=e.state.hilightedDate.getMonth();return'<div class="dp-months">'+t.map((function(e,t){var i="dp-month";return'<button tabindex="-1" type="button" class="'+(i+=n===t?" dp-current":"")+'" data-month="'+t+'">'+e+"</button>"})).join("")+"</div>"}}};function M(e,t,n){var i,r,o=!1,s={el:void 0,opts:n,shouldFocusOnBlur:!0,shouldFocusOnRender:!0,state:{get selectedDate(){return r},set selectedDate(e){e&&!n.inRange(e)||(e?(r=new Date(e),s.state.hilightedDate=r):r=e,s.updateInput(r),t("select"),s.close())},view:"day"},adjustPosition:f,containerHTML:'<div class="dp"></div>',attachToDom:function(){n.appendTo.appendChild(s.el)},updateInput:function(t){var i=new O("change",{bubbles:!0});i.simulated=!0,e.value=t?n.format(t):"",e.dispatchEvent(i)},computeSelectedDate:function(){return n.parse(e.value)},currentView:function(){return P[s.state.view]},open:function(){o||(s.el||(s.el=function(e,t){var n=document.createElement("div");return n.className=e.mode,n.innerHTML=t,n}(n,s.containerHTML),function(e){var t=e.el,n=t.querySelector(".dp");function i(t){t.target.className.split(" ").forEach((function(n){var i=e.currentView().onClick[n];i&&i(t,e)}))}t.ontouchstart=f,w("blur",n,_(150,(function(){e.hasFocus()||e.close(!0)}))),w("keydown",t,(function(t){t.keyCode===y?i(t):e.currentView().onKeyDown(t,e)})),w("mousedown",n,(function(t){t.target.focus&&t.target.focus(),document.activeElement!==t.target&&(t.preventDefault(),T(e))})),w("click",t,i)}(s)),r=l(s.computeSelectedDate(),n.min,n.max),s.state.hilightedDate=r||n.hilightedDate,s.state.view="day",s.attachToDom(),s.render(),t("open"))},isVisible:function(){return!!s.el&&!!s.el.parentNode},hasFocus:function(){var e=document.activeElement;return s.el&&s.el.contains(e)&&e.className.indexOf("dp-focuser")<0},shouldHide:function(){return s.isVisible()},close:function(n){var i=s.el;if(s.isVisible()){if(i){var r=i.parentNode;r&&r.removeChild(i)}o=!0,n&&s.shouldFocusOnBlur&&function(e){e.focus(),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&e.blur()}(e),setTimeout((function(){o=!1}),100),t("close")}},destroy:function(){s.close(),i()},render:function(){if(s.el){var e=s.hasFocus(),t=s.currentView().render(s);t&&(s.el.firstChild.innerHTML=t),s.adjustPosition(),(e||s.shouldFocusOnRender)&&T(s)}},setState:function(e){for(var n in e)s.state[n]=e[n];t("statechange"),s.render()}};return i=function(e,t){var n=_(5,(function(){t.shouldHide()?t.close():t.open()})),i=[w("blur",e,_(150,(function(){t.hasFocus()||t.close(!0)}))),w("mousedown",e,(function(){e===document.activeElement&&n()})),w("focus",e,n),w("input",e,(function(e){var n=t.opts.parse(e.target.value);isNaN(n)||t.setState({hilightedDate:n})}))];return function(){i.forEach((function(e){e()}))}}(e,s),s}function T(e){var t=e.el.querySelector(".dp-current");return t&&t.focus()}function k(e,t,n){var i=M(e,t,n);return i.shouldFocusOnBlur=!1,Object.defineProperty(i,"shouldFocusOnRender",{get:function(){return e!==document.activeElement}}),i.adjustPosition=function(){!function(e,t){var n=e.getBoundingClientRect(),i=window;(function(e,t,n){var i=e.el,r=n.pageYOffset,o=r+t.top,s=i.offsetHeight,c=o+t.height+8,a=o-s-8,u=a>0&&c+s>r+n.innerHeight,l=u?a:c;i.classList&&(i.classList.toggle("dp-is-above",u),i.classList.toggle("dp-is-below",!u));i.style.top=l+"px"})(t,n,i),function(e,t,n){var i=e.el,r=n.pageXOffset,o=t.left+r,s=n.innerWidth+r,c=i.offsetWidth,a=s-c,u=o+c>s&&a>0?a:o;i.style.left=u+"px"}(t,n,i),t.el.style.visibility=""}(e,i)},i}function D(e,t,n){return e=e&&e.tagName?e:document.querySelector(e),"dp-modal"===n.mode?function(e,t,n){var i=M(e,t,n);return e.readonly=!0,i.containerHTML+='<a href="#" class="dp-focuser">.</a>',i}(e,t,n):"dp-below"===n.mode?k(e,t,n):"dp-permanent"===n.mode?function(e,t,n){var i=M(e,t,n);return i.close=f,i.shouldFocusOnRender=n.shouldFocusOnRender,i.computeSelectedDate=function(){return n.hilightedDate},i.attachToDom=function(){n.appendTo.appendChild(i.el)},i.open(),i}(e,t,n):void 0}function I(){var e={};function t(t,n){(e[t]=e[t]||[]).push(n)}return{on:function(e,n){return n?t(e,n):function(e){for(var n in e)t(n,e[n])}(e),this},emit:function(t,n){(e[t]||[]).forEach((function(e){e(t,n)}))},off:function(t,n){return t?e[t]=n?(e[t]||[]).filter((function(e){return e!==n})):[]:e={},this}}}var S=n(1),A=n(151),C=n(22);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var L=/^\s*(3[01]|[12][0-9]|0?[1-9])\.(1[012]|0?[1-9])\.((?:19|20)\d{2})\s*$/g,x=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.autoHideBackdrop=!0,this.config=t,this.subscriptionManager=i,this.id=document.querySelectorAll(".cleverpush-confirm").length+1,this.visible=!1,n(584),n(652)}var t,i,o;return t=e,(i=[{key:"removeConfirmBox",value:function(){Object(S.c)("removeConfirmBox"),this.visible=!1;var e=document.getElementsByClassName("cleverpush-attributes-box");if(e.length){var t=e[e.length-1];t.parentNode.removeChild(t)}this.confirmBox=null}},{key:"hide",value:function(){Object(S.c)("hide"),this.autoHideBackdrop&&this.hideBackdrop(),this.removeConfirmBox()}},{key:"onCloseClick",value:function(e){Object(S.c)("closeConfirmBox"),e.preventDefault(),this.hide(),this.hideBackdrop()}},{key:"onAllowClick",value:function(e){Object(S.c)("allowPush"),e.preventDefault();for(var t=document.querySelectorAll(".cleverpush-attributes input"),n=0;n<t.length;n+=1){var i=t[n];if("radio"!==i.type&&"checkbox"!==i.type||!i.checked)if("birthdate"===i.name){var r=L.exec(i.value);if(!r)return void alert("Bitte wähle ein Datum aus.");var o=new Date(r[3]+"-"+r[2]+"-"+r[1]+"T12:00:00");CleverPush.setAttribute(i.name,o.toISOString())}else CleverPush.setAttribute(i.name,i.value);else CleverPush.setAttribute(i.name,i.value)}this.hide()}},{key:"showBackdrop",value:function(e,t,n){var i=this;if(Object(S.c)("showBackdrop"),"denied"==(void 0!==t&&"denied"===t?"denied":"grant")||this.config.hideNativeConfirmAlert||this.config.showConfirmAlert||!this.config.confirmAlertNativeTheme||"cleverpush-confirm-default"===this.config.confirmAlertNativeTheme||"cleverpush-confirm-backdrop-text"===this.config.confirmAlertNativeTheme||!this.config.ownDomain||"https:"!==window.top.location.protocol&&"localhost"!==window.top.location.hostname||this.appendConfirmBox("".concat(this.config.confirmAlertNativeTheme," ").concat(this.config.confirmAlertNativeTheme,"-native")),void 0===this.config.confirmAlertBackdrop||this.config.confirmAlertBackdrop){var r=document.getElementsByClassName("cleverpush-backdrop");if(r&&r.length)for(var o=0;o<r.length;o+=1){var s=r[o];s&&s.parentNode&&s.parentNode.removeChild(s)}var c=document.createElement("div");c.className="cleverpush-backdrop",c.style.display="none",c.innerHTML=backdropText,this.config.confirmAlertBackdropOpacity&&(c.style.backgroundColor="rgba(0, 0, 0, ".concat(this.config.confirmAlertBackdropOpacity,")")),this.config.confirmAlertBackdropBlur&&(c.className+=" cleverpush-backdrop-blur"),c.addEventListener("click",(function(e){e.preventDefault(),i.hideBackdrop()})),document.body&&(document.body.appendChild(c),document.body.classList?(document.body.classList.add("has-cleverpush-backdrop"),this.config.confirmAlertBackdropBlur&&document.body.classList.add("has-cleverpush-backdrop-blur")):(document.body.className+=" has-cleverpush-backdrop",this.config.confirmAlertBackdropBlur&&(document.body.className+=" has-cleverpush-backdrop-blur"))),Object(A.d)(c,200,void 0!==e?e:function(){})}else"function"==typeof e&&e()}},{key:"hideBackdrop",value:function(){if(Object(S.c)("hideBackdrop"),document.body&&(document.body.classList?(this.config.confirmAlertBackdropBlur&&document.body.classList.remove("has-cleverpush-backdrop-blur"),document.body.classList.remove("has-cleverpush-backdrop")):(this.config.confirmAlertBackdropBlur&&(document.body.className=document.body.className.replace("has-cleverpush-backdrop-blur","")),document.body.className=document.body.className.replace("has-cleverpush-backdrop",""))),!this.config.hideNativeConfirmAlert&&this.config.confirmAlertNativeTheme&&"cleverpush-confirm-default"!==this.config.confirmAlertNativeTheme&&"cleverpush-backdrop-text"!==this.config.confirmAlertNativeTheme&&document.getElementsByClassName("cleverpush-confirm")[0],void 0===this.config.confirmAlertBackdrop||this.config.confirmAlertBackdrop)for(var e=document.getElementsByClassName("cleverpush-backdrop"),t=0;t<e.length;t+=1)!function(e){Object(A.e)(e,200,(function(){e&&e.parentNode&&e.parentNode.removeChild(e)}))}(e[t])}},{key:"camelCaseToDash",value:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}},{key:"appendConfirmBox",value:function(e){var t=this;if(Object(S.c)("appendConfirmBox"),!this.confirmBox){var n=this.config.alertLocalization||{},i=(navigator.language||navigator.userLanguage||"").substr(0,2);this.config.alertLocalizationTranslations&&i&&this.config.alertLocalizationTranslations[i]&&(n=Object.assign({},n,this.config.alertLocalizationTranslations[i]));var o={title:n.title||Object(C.a)("confirm.title").formatCleverPush(this.config.channelName),deny:n.deny||Object(C.a)("confirm.deny"),allow:n.allow||Object(C.a)("confirm.allow"),confirmInfo:n.confirmInfo||Object(C.a)("popup.info").formatCleverPush(Object(C.a)("confirm.allowBrowser"))},s="cleverpush-confirm-default",c="",a=void 0!==e?e:this.config.confirmAlertTheme;a&&(s=a);var u=new r.a;this.config.confirmAlertThemeVariant&&"cleverpush-confirm-auto"!==this.config.confirmAlertThemeVariant?s+=" ".concat(this.config.confirmAlertThemeVariant):"Mac OS"===u.getOS().name?s+=" cleverpush-confirm-mac":"Windows"===u.getOS().name?s+=" cleverpush-confirm-chrome":s+=" cleverpush-confirm-material",this.config.confirmAlertStyle&&this.config.confirmAlertStyle.color&&(this.config.confirmAlertThemeTextColor=this.config.confirmAlertStyle.color),this.config.confirmAlertThemeBackgroundColor?(c+="background-color: "+this.config.confirmAlertThemeBackgroundColor+";",this.config.confirmAlertThemeTextColor&&(c+="color: "+this.config.confirmAlertThemeTextColor+";")):this.config.confirmAlertThemeBackground&&(s+=" ".concat(this.config.confirmAlertThemeBackground)),this.config.confirmAlertHideChannelIcon&&(s+=" cleverpush-confirm-hide-channel-icon"),this.config.confirmAlertHideArrow&&(s+=" cleverpush-confirm-hide-arrow"),"PREVIEW"===this.config.env&&(s+=" cleverpush-confirm-preview"),s+=" cleverpush-confirm-".concat(this.id);var l,_=[],f="";this.config.customAttributes&&this.config.customAttributes.length&&!this.config.confirmAlertHideChannelTopics&&(f+='<div class="cleverpush-attributes">',this.config.customAttributes.filter((function(e){return!!e.askAfterOptIn})).forEach((function(e){f+='<div class="cleverpush-attributes-item">',f+='<div class="cleverpush-attributes-title"><strong>'.concat(e.askAfterOptInTitle||e.name,"</strong></div>"),e.possibleValues&&e.possibleValues.length?e.possibleValues.forEach((function(n){f+='<div><label><input type="'.concat(t.config.askAfterOptInInputType||"radio",'" name="').concat(e.id,'" value="').concat(n,'"> ').concat(n,"</label></div>")})):(f+='<input type="'.concat(t.config.askAfterOptInInputType||"text",'" name="').concat(e.id,'" placeholder="').concat("birthdate"===e.id?"TT.MM.JJJJ":"",'">'),"birthdate"===e.id&&(f+='</div><div class="cleverpush-attributes-item"><div class="'.concat("cleverpush-datepicker-"+e.id,'"></div>'),_.push(e.id))),f+="</div>"})),f+="</div>"),this.config.appendConfirmBoxTo&&(l=document.querySelector(this.config.appendConfirmBoxTo)),l?s+="cleverpush-confirm-static":(this.config.appendConfirmBoxTo&&S.b.error("appendConfirmBoxTo: container not found. Falling back to default."),l=document.body),s+=" cleverpush-topic-box",o.title=this.config.confirmAlertSelectTopicsLaterTitle||Object(C.a)("confirm.selectTopics")||o.title,o.allow=Object(C.a)("panel.save");var d=Object(A.a)('<div class="cleverpush-confirm cleverpush-attributes-box '.concat(s,'" style="').concat(c,'">\n        <div class="cleverpush-confirm-caret cleverpush-confirm-caret-top" style="display: none; border-bottom-color: ').concat(this.config.confirmAlertThemeBackgroundColor,'"></div>\n        <div class="cleverpush-confirm-caret cleverpush-confirm-caret-bottom" style="display: none; border-top-color: ').concat(this.config.confirmAlertThemeBackgroundColor,'"></div>\n        <button type="button" class="cleverpush-confirm-hide">&times;</button>\n        <div class="cleverpush-confirm-wrap">\n            ').concat("cleverpush-confirm-topbar cleverpush-confirm-topbar-native"===e?'<div class="cleverpush-confirm-topbar-arrow"></div>':"",'\n            <div class="').concat("cleverpush-confirm-icon"+(this.config.confirmAlertRoundChannelIcon?" cleverpush-confirm-icon-round":""),'"><img src="').concat(this.config.channelIcon,'"></div>\n          <div class="cleverpush-confirm-text" style="').concat(this.config.confirmAlertThemeTextColor?"color: "+this.config.confirmAlertThemeTextColor+";":"",'">\n            ').concat(f,'\n            </div>\n          <div class="cleverpush-clearfix cleverpush-clearfix-bottom">\n            <div class="cleverpush-confirm-buttons">\n            <button class="cleverpush-confirm-btn cleverpush-confirm-btn-deny">').concat(o.deny,'</button>\n            <button class="cleverpush-confirm-btn cleverpush-confirm-btn-allow" style="').concat(this.config.confirmAlertThemeButtonTextColor?"color: "+this.config.confirmAlertThemeButtonTextColor+";":""," ").concat(this.config.confirmAlertThemeButtonBackgroundColor?"border-color: transparent !important; background: none; background-color: "+this.config.confirmAlertThemeButtonBackgroundColor+";":"",'">').concat(o.allow,'</button></div>\n            <div class="cleverpush-clearfix"></div>\n          </div>\n        </div>\n      </div>'));if(l.appendChild(d),this.confirmBox=document.querySelector(".cleverpush-confirm-".concat(this.id)),this.confirmBox&&"object"===B(this.config.confirmAlertStyle))for(var p in this.config.confirmAlertStyle)this.config.confirmAlertStyle.hasOwnProperty(p)&&(this.confirmBox.style[p]=this.config.confirmAlertStyle[p]);if(this.confirmBoxTitle=document.querySelector(".cleverpush-confirm-".concat(this.id," .cleverpush-confirm-title")),this.confirmBoxTitle&&"object"===B(this.config.confirmAlertTitleStyle))for(var g in this.config.confirmAlertTitleStyle)this.config.confirmAlertTitleStyle.hasOwnProperty(g)&&(this.confirmBoxTitle.style[g]=this.config.confirmAlertTitleStyle[g]);if(this.allowButton=this.confirmBox.querySelector(".cleverpush-confirm-btn-allow"),this.allowButton){if(this.allowButton.addEventListener("click",this.onAllowClick.bind(this)),"object"===B(this.config.confirmAlertButtonStyle))for(var b in this.config.confirmAlertButtonStyle.backgroundColor&&!this.config.confirmAlertButtonStyle.borderColor&&(this.config.confirmAlertButtonStyle.borderColor="transparent"),this.config.confirmAlertButtonStyle)this.config.confirmAlertButtonStyle.hasOwnProperty(b)&&this.allowButton.style.setProperty(this.camelCaseToDash(b),this.config.confirmAlertAllowButtonStyle[b],"important");if("object"===B(this.config.confirmAlertAllowButtonStyle))for(var m in this.config.confirmAlertAllowButtonStyle)this.config.confirmAlertAllowButtonStyle.backgroundColor&&!this.config.confirmAlertAllowButtonStyle.borderColor&&(this.config.confirmAlertAllowButtonStyle.borderColor="transparent"),this.config.confirmAlertAllowButtonStyle.hasOwnProperty(m)&&this.allowButton.style.setProperty(this.camelCaseToDash(m),this.config.confirmAlertAllowButtonStyle[m],"important")}this.closeButton=this.confirmBox.querySelector(".cleverpush-confirm-hide"),this.closeButton&&(this.closeButton.addEventListener("click",this.onCloseClick.bind(this)),this.confirmBox&&"object"===B(this.config.confirmAlertStyle)&&this.config.confirmAlertStyle.color&&(this.closeButton.style.color=this.config.confirmAlertStyle.color)),this.confirmBox&&_.length&&_.forEach((function(e){var n,i,r,o,s,c=(n=t.confirmBox.querySelector('input[name="'+e+'"]'),i={appendTo:t.confirmBox.querySelector(".cleverpush-datepicker-"+e),mode:"dp-permanent",lang:{days:["So","Mo","Di","Mi","Do","Fr","Sa"],dayOffset:0,months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],today:"Heute",clear:"Löschen",close:"Schließen"},format:function(e){var t=e.getDate();1===t.toString().length&&(t="0"+t);var n=e.getMonth()+1;return 1===n.toString().length&&(n="0"+n),t+"."+n+"."+e.getFullYear()},parse:function(e){var t=L.exec(e);return t?new Date(t[3]+"-"+t[2]+"-"+t[1]+"T12:00:00"):new Date}},r=I(),o=D(n,(function(e){r.emit(e,s)}),h(i)),s={get state(){return o.state},on:r.on,off:r.off,setState:o.setState,open:o.open,close:o.close,destroy:o.destroy});console.log(c)}))}}}])&&R(t.prototype,i),o&&R(t,o),e}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CleverPush}));var core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(148),core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(149),core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_symbol_iterator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(150),core_js_modules_es_symbol_iterator__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_symbol_iterator__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(135),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(266),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(472),core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_find_index__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(562),core_js_modules_es_array_find_index__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_find_index__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(82),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_array_from__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(209),core_js_modules_es_array_from__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_array_from__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(492),core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(196),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_array_is_array__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(455),core_js_modules_es_array_is_array__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_array_is_array__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(91),core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(264),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(563),core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(154),core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_array_sort__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(468),core_js_modules_es_array_sort__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_array_sort__WEBPACK_IMPORTED_MODULE_16__),core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(494),core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_17__),core_js_modules_es_date_now__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(564),core_js_modules_es_date_now__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(core_js_modules_es_date_now__WEBPACK_IMPORTED_MODULE_18__),core_js_modules_es_date_to_iso_string__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(504),core_js_modules_es_date_to_iso_string__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(core_js_modules_es_date_to_iso_string__WEBPACK_IMPORTED_MODULE_19__),core_js_modules_es_date_to_string__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(102),core_js_modules_es_date_to_string__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(core_js_modules_es_date_to_string__WEBPACK_IMPORTED_MODULE_20__),core_js_modules_es_function_bind__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(153),core_js_modules_es_function_bind__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(core_js_modules_es_function_bind__WEBPACK_IMPORTED_MODULE_21__),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(112),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_22__),core_js_modules_es_object_assign__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(200),core_js_modules_es_object_assign__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(core_js_modules_es_object_assign__WEBPACK_IMPORTED_MODULE_23__),core_js_modules_es_object_create__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(254),core_js_modules_es_object_create__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(core_js_modules_es_object_create__WEBPACK_IMPORTED_MODULE_24__),core_js_modules_es_object_define_property__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(81),core_js_modules_es_object_define_property__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(core_js_modules_es_object_define_property__WEBPACK_IMPORTED_MODULE_25__),core_js_modules_es_object_get_prototype_of__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(255),core_js_modules_es_object_get_prototype_of__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(core_js_modules_es_object_get_prototype_of__WEBPACK_IMPORTED_MODULE_26__),core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(267),core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_27__),core_js_modules_es_object_set_prototype_of__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(256),core_js_modules_es_object_set_prototype_of__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(core_js_modules_es_object_set_prototype_of__WEBPACK_IMPORTED_MODULE_28__),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(108),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_29__),core_js_modules_es_parse_int__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(207),core_js_modules_es_parse_int__WEBPACK_IMPORTED_MODULE_30___default=__webpack_require__.n(core_js_modules_es_parse_int__WEBPACK_IMPORTED_MODULE_30__),core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(195),core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_31___default=__webpack_require__.n(core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_31__),core_js_modules_es_reflect_construct__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(257),core_js_modules_es_reflect_construct__WEBPACK_IMPORTED_MODULE_32___default=__webpack_require__.n(core_js_modules_es_reflect_construct__WEBPACK_IMPORTED_MODULE_32__),core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(465),core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_33___default=__webpack_require__.n(core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_33__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(83),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_34___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_34__),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(137),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_35___default=__webpack_require__.n(core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_35__),core_js_modules_es_string_ends_with__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(649),core_js_modules_es_string_ends_with__WEBPACK_IMPORTED_MODULE_36___default=__webpack_require__.n(core_js_modules_es_string_ends_with__WEBPACK_IMPORTED_MODULE_36__),core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(493),core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_37___default=__webpack_require__.n(core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_37__),core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(98),core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_38___default=__webpack_require__.n(core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_38__),core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(469),core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_39___default=__webpack_require__.n(core_js_modules_es_string_search__WEBPACK_IMPORTED_MODULE_39__),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(467),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_40___default=__webpack_require__.n(core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_40__),core_js_modules_es_string_trim__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(262),core_js_modules_es_string_trim__WEBPACK_IMPORTED_MODULE_41___default=__webpack_require__.n(core_js_modules_es_string_trim__WEBPACK_IMPORTED_MODULE_41__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(90),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_42___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_42__),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(144),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_43___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_43__),core_js_modules_web_timers__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(211),core_js_modules_web_timers__WEBPACK_IMPORTED_MODULE_44___default=__webpack_require__.n(core_js_modules_web_timers__WEBPACK_IMPORTED_MODULE_44__),core_js_modules_web_url__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(484),core_js_modules_web_url__WEBPACK_IMPORTED_MODULE_45___default=__webpack_require__.n(core_js_modules_web_url__WEBPACK_IMPORTED_MODULE_45__),wolfy87_eventemitter__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(587),wolfy87_eventemitter__WEBPACK_IMPORTED_MODULE_46___default=__webpack_require__.n(wolfy87_eventemitter__WEBPACK_IMPORTED_MODULE_46__),ouibounce__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(588),ouibounce__WEBPACK_IMPORTED_MODULE_47___default=__webpack_require__.n(ouibounce__WEBPACK_IMPORTED_MODULE_47__),_bell__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(593),_confirm__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(592),_utils_debug__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(1),_utils_dom__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__(151),_api__WEBPACK_IMPORTED_MODULE_52__=__webpack_require__(589),_messenger_command__WEBPACK_IMPORTED_MODULE_53__=__webpack_require__(599),_utils_request__WEBPACK_IMPORTED_MODULE_54__=__webpack_require__(502),_utils_env__WEBPACK_IMPORTED_MODULE_55__=__webpack_require__(49),_const_event__WEBPACK_IMPORTED_MODULE_56__=__webpack_require__(55),_subscription_safariManager__WEBPACK_IMPORTED_MODULE_57__=__webpack_require__(580),_subscription_httpsManager__WEBPACK_IMPORTED_MODULE_58__=__webpack_require__(601),_subscription_httpHostManager__WEBPACK_IMPORTED_MODULE_59__=__webpack_require__(602),_subscription_httpIframeManager__WEBPACK_IMPORTED_MODULE_60__=__webpack_require__(591),_subscription_httpPopupManager__WEBPACK_IMPORTED_MODULE_61__=__webpack_require__(590),_subscription_facebookManager__WEBPACK_IMPORTED_MODULE_62__=__webpack_require__(481),_utils_translate__WEBPACK_IMPORTED_MODULE_63__=__webpack_require__(22),_contentButton__WEBPACK_IMPORTED_MODULE_64__=__webpack_require__(594),_multiPlatformWidget__WEBPACK_IMPORTED_MODULE_65__=__webpack_require__(595),_tagButton__WEBPACK_IMPORTED_MODULE_66__=__webpack_require__(596),_topicButton__WEBPACK_IMPORTED_MODULE_67__=__webpack_require__(597),_pageBanner__WEBPACK_IMPORTED_MODULE_68__=__webpack_require__(582),_webBanner__WEBPACK_IMPORTED_MODULE_69__=__webpack_require__(581),_error_CleverPushError__WEBPACK_IMPORTED_MODULE_70__=__webpack_require__(61),_utils_adblock__WEBPACK_IMPORTED_MODULE_71__=__webpack_require__(598),_panel__WEBPACK_IMPORTED_MODULE_72__=__webpack_require__(535);function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var CleverPush=function(_EventEmitter){_inherits(CleverPush,_EventEmitter);var _super=_createSuper(CleverPush);function CleverPush(){var e;return _classCallCheck(this,CleverPush),(e=_super.call(this)).bell=null,e.config={},e.log=_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b,e.initialized=!1,e.initCalled=!1,e.initFailed=!1,e.initError=null,e.api=null,e.subscriptionManager=null,e.version="undefined"!=typeof VERSION?VERSION:"",e}return _createClass(CleverPush,[{key:"init",value:function(e,t){var n=this;Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("init",e),_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.info("Browser:",_utils_env__WEBPACK_IMPORTED_MODULE_55__.a.name,_utils_env__WEBPACK_IMPORTED_MODULE_55__.c);var i=function(e,i){var r=void 0!==i?i:!e;"function"==typeof t?t(e,r):e&&(e.warn||"unsupported-browser"===e.reason||"private-mode"===e.reason||"already-initialized"===e.reason||"init-already-called"===e.reason?_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.warn(e.message):_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.error(e)),"function"==typeof window.cleverPushInitCallback&&window.cleverPushInitCallback(e,r),e?("already-initialized"!==e.reason&&"init-already-called"!==e.reason&&(n.initFailed=!0,n.initError=e),n.trigger(_const_event__WEBPACK_IMPORTED_MODULE_56__.a.INITIALIZATION_FAILED),e&&"unsupported-browser"!==e.reason&&"private-mode"!==e.reason&&"already-initialized"!==e.reason&&e.reason):n.initFailed=!1};if(this.initCalled)i(new _error_CleverPushError__WEBPACK_IMPORTED_MODULE_70__.a("Init was already called, please only call init() once.","init-already-called"),!1);else if(this.initCalled=!0,"object"!==_typeof(e))i(new _error_CleverPushError__WEBPACK_IMPORTED_MODULE_70__.a("Required parameter `config` not given.","invalid-config"));else if(e.channelId)if(this.initialized)i(new _error_CleverPushError__WEBPACK_IMPORTED_MODULE_70__.a("CleverPush SDK was already initialized.","already-initialized"));else{this.api=new _api__WEBPACK_IMPORTED_MODULE_52__.a(e.channelId),e.apiEndpoint&&(this.api.endpoint=e.apiEndpoint);var r=function(){var e;e="safari"===n.browserType?_subscription_safariManager__WEBPACK_IMPORTED_MODULE_57__.a:"facebook"===n.browserType?_subscription_facebookManager__WEBPACK_IMPORTED_MODULE_62__.a:Object(_utils_env__WEBPACK_IMPORTED_MODULE_55__.k)()?_subscription_httpPopupManager__WEBPACK_IMPORTED_MODULE_61__.a:Object(_utils_env__WEBPACK_IMPORTED_MODULE_55__.j)()?_subscription_httpIframeManager__WEBPACK_IMPORTED_MODULE_60__.a:!n.config.ownDomain||"https:"!==window.top.location.protocol&&"localhost"!==window.top.location.hostname?_subscription_httpHostManager__WEBPACK_IMPORTED_MODULE_59__.a:_subscription_httpsManager__WEBPACK_IMPORTED_MODULE_58__.a,n.subscriptionManager=new e(n.config,n.api,n.trigger.bind(n))};if(Object(_utils_env__WEBPACK_IMPORTED_MODULE_55__.i)()||"PREVIEW"===e.env||"WIDGET"===e.env){var o=new Promise((function(t,i){var r=e.confirmAlertTestsEnabled&&e.confirmAlertTests&&e.confirmAlertTests.length;"undefined"!=typeof fetch&&(void 0===e.loadConfig||e.loadConfig||r)?n.api.getChannelConfig(e.confirmAlertTestsEnabled).then((function(e){t(e)})).catch(i):e.loadConfigUrl?Object(_utils_request__WEBPACK_IMPORTED_MODULE_54__.a)(e.loadConfigUrl).then((function(e){t(e||{})})).catch(i):t({})}));e.apiEndpoint&&(this.api.endpoint=e.apiEndpoint),o.then((function(t){if(n.config=Object.assign({autoRegister:!0,alertTimeout:0,alertMinimumVisits:0,loadIframe:!0,trackSessions:!0},t,e),void 0!==n.config.channelId&&void 0!==n.config.channelName){if("object"===_typeof(self.cleverPushConfig)&&(n.config=Object.assign(n.config,self.cleverPushConfig)),_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("Config:",n.config),n.config.apiEndpoint&&(n.api.endpoint=n.config.apiEndpoint),n.config.regionEnabled&&(n.api.regionEnabled=!0),Object(_utils_env__WEBPACK_IMPORTED_MODULE_55__.l)()&&(n.config.autoRegister=!1),n.config.facebookPageId&&!n.config.facebookAppId&&(n.config.facebookAppId="436333683366106"),"undefined"!=typeof URLSearchParams&&location.search&&location.search.length){var o=new URLSearchParams(location.search.slice(1));o.get("confirmAlertTestId")&&(n.config.confirmAlertTestId=o.get("confirmAlertTestId"),n.api.setConfirmAlertTestId(n.config.confirmAlertTestId))}!sessionStorage.getItem("cleverpush-referrer")&&document.referrer&&sessionStorage.setItem("cleverpush-referrer",document.referrer.split("?")[0]),n.referrer=sessionStorage.getItem("cleverpush-referrer");n.initWebBanners(),n.initBounces(),Object(_utils_dom__WEBPACK_IMPORTED_MODULE_51__.c)().then((function(){n.initMultiPlatformWidgets()})),new Promise((function(e,t){Object(_utils_env__WEBPACK_IMPORTED_MODULE_55__.n)().then((function(t){n.config.facebookCheckboxOnlyUnsupported&&n.config.facebookPageId&&(n.config.facebookPageId=null),e(t)})).catch((function(i){if(n.config.facebookAppId&&n.config.facebookPageId&&"unsupported-browser"===i.reason){if(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("UAParser Browser:",_utils_env__WEBPACK_IMPORTED_MODULE_55__.a),!n.config.facebookCheckboxEnabled)return void t(i);n.config.facebookDoubleOptIn?e("facebook"):_subscription_facebookManager__WEBPACK_IMPORTED_MODULE_62__.a.initFacebook((function(){if("undefined"!=typeof FB){var r=document.createElement("div"),o=!1;FB.Event.subscribe("messenger_checkbox",(function(t){o||(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("FB - Mock Checkbox Event",t),"rendered"===t.event?(o=!0,document.body.removeChild(r),e("facebook")):"hidden"===t.event&&(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.warn("Facebook Messenger Plugin was hidden. Do you have disabled third-party tracking in your browser settings?"),n.config.facebookButtonOptIn=!0,document.body.removeChild(r),o=!0,e("facebook")))})),r.style.display="none",r.innerHTML='<div class="fb-messenger-checkbox" origin="'.concat(location.origin,'" page_id="').concat(n.config.facebookPageId,'" messenger_app_id="').concat(n.config.facebookAppId,'" user_ref="').concat(Math.random().toString(36).slice(2)+Math.random().toString(36).slice(2),'" prechecked="true" allow_login="false" size="large" style="margin-top: 10px; margin-left: -14px;"></div>'),document.body.appendChild(r),FB.XFBML.parse(),_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("FB mock checkbox appended")}else _utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("FB undefined"),t(i)})),n.config.showConfirmAlert=!0,"cleverpush-confirm-backdrop-text"===n.config.confirmAlertNativeTheme&&(n.config.confirmAlertNativeTheme="")}else t(i)}))})).then((function(e){if(n.browserType=e,!n.config.desktopOnly||"Android"!==_utils_env__WEBPACK_IMPORTED_MODULE_55__.m.name&&"mobile"!==_utils_env__WEBPACK_IMPORTED_MODULE_55__.d.type){if(n.config.confirmAlertTestsEnabled&&n.config.confirmAlertTests&&n.config.confirmAlertTests.length>0){var t;if(n.config.confirmAlertTestId){var o=n.config.confirmAlertTests.findIndex((function(e){return e.id===n.config.confirmAlertTestId}));o>=0&&(t=n.config.confirmAlertTests[o])}if(!t){var s,c=100/n.config.confirmAlertTests.length,a=(n.config.confirmAlertTests||[]).map((function(e){return Object.assign({},e,{percentage:e.percentage||c})})),u=Math.random(),l=0;for(s=0;s<a.length;s+=1)if(a[s].percentage){if((l+=a[s].percentage/100)>u){t=a[s];break}t||(t=a.filter((function(e){return!e.percentage})))}}t&&t.config&&(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("Split-Test:",t),n.config=Object.assign({},n.config,t.config,{confirmAlertTestId:t.id}),t.alertLocalization||(n.config.alertLocalization||(n.config.alertLocalization={}),n.config.alertLocalization={allow:t.config.alertLocalizationAllow||n.config.alertLocalization.allow,deny:t.config.alertLocalizationDeny||n.config.alertLocalization.deny,confirmInfo:t.config.alertLocalizationConfirmInfo||n.config.alertLocalization.confirmInfo,title:t.config.alertLocalizationTitle||n.config.alertLocalization.title,info:t.config.alertLocalizationInfo||n.config.alertLocalization.info}),n.api.setConfirmAlertTestId(n.config.confirmAlertTestId))}var _=(navigator.language||navigator.userLanguage||"").substr(0,2);if(n.config.alertLocalizationTranslations&&_&&n.config.alertLocalizationTranslations[_]){var f=n.config.alertLocalizationTranslations[_];f.privacyPolicyUrl&&(n.config.privacyPolicyUrl=f)}n.config.channelTopics&&n.config.channelTopics.length&&(n.config.channelTopics=n.config.channelTopics.sort((function(e,t){return e.sort-t.sort})));var d=function(){r(),n.waitForInit().then((function(){(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("Init done"),n.confirm=new _confirm__WEBPACK_IMPORTED_MODULE_49__.a(n.config,n.subscriptionManager),n.subscriptionManager.setConfirm(n.confirm),n.config.showNotificationBell)&&(("Android"===_utils_env__WEBPACK_IMPORTED_MODULE_55__.m.name||"mobile"===_utils_env__WEBPACK_IMPORTED_MODULE_55__.d.type)&&n.config.hideNotificationBellMobile||(n.bell=new _bell__WEBPACK_IMPORTED_MODULE_48__.a(n.config,n.subscriptionManager,n.api,n.confirm,n.trigger.bind(n))));var e="Android"===_utils_env__WEBPACK_IMPORTED_MODULE_55__.m.name&&("Chrome"===_utils_env__WEBPACK_IMPORTED_MODULE_55__.a.name||"Firefox"===_utils_env__WEBPACK_IMPORTED_MODULE_55__.a.name||"Opera"===_utils_env__WEBPACK_IMPORTED_MODULE_55__.a.name);n.config.showConfirmAlertMobile&&!n.config.confirmAlertSelectTopicsLater&&e&&(n.config.showConfirmAlert=!0);var t="Mac OS"===_utils_env__WEBPACK_IMPORTED_MODULE_55__.m.name&&"Safari"===_utils_env__WEBPACK_IMPORTED_MODULE_55__.a.name;if(t&&(_utils_env__WEBPACK_IMPORTED_MODULE_55__.c>12||12===_utils_env__WEBPACK_IMPORTED_MODULE_55__.c&&_utils_env__WEBPACK_IMPORTED_MODULE_55__.b>=1)&&(n.config.showConfirmAlert=!0,n.config.isSafari_12_1=!0),"Firefox"===_utils_env__WEBPACK_IMPORTED_MODULE_55__.a.name&&_utils_env__WEBPACK_IMPORTED_MODULE_55__.c>=72&&"PREVIEW"!==n.config.env&&(n.config.showConfirmAlert=!0),n.config.confirmAlertHideChannelTopics||!n.config.isSafari_12_1&&(n.config.channelTopics||[]).length&&(e&&!n.config.showConfirmAlertMobile||t)&&(n.config.confirmAlertSelectTopicsLater=!0),n.config.customAttributes&&n.config.customAttributes.length&&n.config.customAttributes.filter((function(e){return!!e.askAfterOptIn})).length&&(n.config.confirmAlertSelectAttributesLater=!0),n.on(_const_event__WEBPACK_IMPORTED_MODULE_56__.a.SUBSCRIBED,(function(e){n.bell&&n.bell.reset(!0),n.confirm&&n.confirm.hide(),n.config.googleAnalyticsDimensionIndex&&"function"==typeof ga&&ga("set","dimension".concat(n.config.googleAnalyticsDimensionIndex),e)})),n.on(_const_event__WEBPACK_IMPORTED_MODULE_56__.a.UNSUBSCRIBED,(function(){n.subscriptionManager.subscribed=!1,n.bell&&n.bell.reset(!1)})),n.initContentButtons(),n.initTagButtons(),n.initTopicButtons(),n.initPageBanners(),n.initTags(),n.initTopics(),n.initConversions(),n.subscriptionManager.isSubscribed().then((function(e){n.bell&&(n.bell.show(e),n.trigger(_const_event__WEBPACK_IMPORTED_MODULE_56__.a.BELL_READY)),e&&(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("main subscribed = true"),n.subscriptionManager.subscribed=!0,n.subscriptionManager.iframeMessenger&&n.subscriptionManager.getSubscriptionId().then((function(e){n.subscriptionManager.iframeMessenger.setSubscribed(e)})))})),n.config.trackSessions)try{n.waitForSubscription().then((function(e){var t=n.subscriptionManager.storageManager.getLastSession(),i=function(){if(t&&t.lastInteractionAt&&t.startedAt&&new Date(t.lastInteractionAt)<new Date(Date.now()-108e3)){var i=Math.round((new Date(t.lastInteractionAt).getTime()-new Date(t.startedAt).getTime())/1e3);i>108e3?i=108e3:i<0&&(i=0),n.api.endSession(e,{duration:i,visits:t.visits}),t={}}};i(),t.startedAt&&"true"===sessionStorage.getItem("cleverpush-session-counted")||(sessionStorage.setItem("cleverpush-session-counted","true"),n.api.startSession(e),t.startedAt=new Date,t.visits=0),t.lastInteractionAt=new Date,t.visits+=1,n.subscriptionManager.storageManager.setLastSession(t),window.addEventListener("unload",(function(){(t=n.subscriptionManager.storageManager.getLastSession())&&t.lastInteractionAt&&t.startedAt&&!(new Date(t.lastInteractionAt)>=new Date(Date.now()-108e3))||(t.lastInteractionAt=new Date),i(),n.subscriptionManager.storageManager.setLastSession(t)}),!1)}))}catch(e){_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.warn(e)}if(n.config.confirmAlertFilters&&n.config.confirmAlertFilters.length&&"PREVIEW"!==n.config.env){var r=function(e){void 0!==e.autoRegister&&(n.config.autoRegister=e.autoRegister),void 0!==e.minimumVisits&&(n.config.alertMinimumVisits=e.minimumVisits),void 0!==e.scrollPercentage&&(n.config.alertScrollPercentage=e.scrollPercentage),void 0!==e.timeout&&(n.config.alertTimeout=1e3*e.timeout),void 0!==e.localizationTitle&&(n.config.alertLocalization=Object.assign({},n.config.alertLocalization,{title:e.localizationTitle})),void 0!==e.localizationInfo&&(n.config.alertLocalization=Object.assign({},n.config.alertLocalization,{info:e.localizationInfo})),void 0!==e.radioButtonTopics&&(n.config.confirmAlertRadioButtonTopics=e.radioButtonTopics),void 0!==e.requireTopics&&(n.config.confirmAlertRequireChannelTopics=e.requireTopics),"undefined"!==e.nativeTheme&&(n.config.confirmAlertNativeTheme=e.nativeTheme),void 0!==e.customCss&&(n.config.customCss||(n.config.customCss=""),n.config.customCss+=e.customCss)};n.config.confirmAlertFilters.forEach((function(e){"device"===e.type&&("desktop"===e.value&&"mobile"!==_utils_env__WEBPACK_IMPORTED_MODULE_55__.d.type||"mobile"===e.value&&"mobile"===_utils_env__WEBPACK_IMPORTED_MODULE_55__.d.type||"bot"===e.value&&/bot|google|baidu|bing|msn|duckduckbot|teoma|slurp|yandex/i.test(navigator.userAgent))&&r(e),"referrer"===e.type&&(n.referrer&&new RegExp(e.value).test(n.referrer)||document.referrer&&new RegExp(e.value).test(document.referrer))&&r(e),"path"===e.type&&location.pathname&&new RegExp(e.value).test(location.pathname)&&r(e),"userAgent"===e.type&&navigator.userAgent&&new RegExp(e.value).test(navigator.userAgent)&&r(e),"host"===e.type&&location.hostname&&new RegExp(e.value).test(location.hostname)&&r(e),"utmSource"===e.type&&window.location.search&&window.location.search.indexOf("utm_source="+e.value)>-1&&r(e),"utmMedium"===e.type&&window.location.search&&window.location.search.indexOf("utm_medium="+e.value)>-1&&r(e),"utmCampaign"===e.type&&window.location.search&&window.location.search.indexOf("utm_campaign="+e.value)>-1&&r(e)}))}if(n.config.customCss){var o=document.createElement("style");o.innerHTML=n.config.customCss,document.body.appendChild(o)}var s=!1,c=function(){if(!s){s=!0;var e=function(){n.subscriptionManager.storageManager.getVisits()>=n.config.alertMinimumVisits&&setTimeout((function(){n.config.preventDuplicateOptIns&&n.config.androidPackageName&&"getInstalledRelatedApps"in navigator?navigator.getInstalledRelatedApps().then((function(e){var t=!1;e&&e.forEach((function(e){e.id===n.config.androidPackageName&&(t=!0)})),t||(sessionStorage.setItem("cleverpush-alert-shown","true"),n.triggerOptIn())})):(sessionStorage.setItem("cleverpush-alert-shown","true"),n.triggerOptIn())}),n.config.alertTimeout)};n.config.alertOncePerSession?"true"!==sessionStorage.getItem("cleverpush-alert-shown")&&e():e()}};if(n.config.autoRegister)if("PREVIEW"===n.config.env)n.triggerOptIn();else{if(!isNaN(n.config.alertScrollPercentage)&&n.config.alertScrollPercentage>0){var a,u=function(){Object(_utils_env__WEBPACK_IMPORTED_MODULE_55__.f)()>=n.config.alertScrollPercentage&&(window.removeEventListener("scroll",a),c())};a=window.addEventListener("scroll",u),u()}else c();n.subscriptionManager.storageManager.incrementVisits()}if(n.config.showConfirmAlert&&n.config.disableConfirmAlertSearchTraffic&&n.referrer&&/google|bing|yahoo|baidu|duckduckgo|wolframalpha/.test(n.referrer)&&(n.config.showConfirmAlert=!1),n.on(_const_event__WEBPACK_IMPORTED_MODULE_56__.a.PERMISSION_RE_GRANTED,(function(){n.config.autoRegister&&c()})),n.initialized=!0,n.initCalled=!1,i(!1,!0),Object(_utils_env__WEBPACK_IMPORTED_MODULE_55__.i)()&&"undefined"!=typeof URLSearchParams&&location.search&&location.search.length){var l=new URLSearchParams(location.search.slice(1));"true"===l.get("cleverPushBypassInactiveFollowUps")&&(n.config.bypassInactiveFollowUps=!0);var _=l.get("cleverPushOnesignalSubscriptionId")||l.get("cleverPushAccengageSubscriptionId")||l.get("cleverPushImportedSubscriptionId")||localStorage.getItem("cleverpush-onesignal-subscription-id")||localStorage.getItem("cleverpush-imported-subscription-id");if("true"===l.get("cleverPushDebugRedirect")){var f=n.config.subdomain||n.config.channelSubdomain;if(f){var d={worker:null,workerScope:null,notification:(window.Notification||{}).permission,localStorage:{"cleverpush-subscription-id":localStorage.getItem("cleverpush-subscription-id"),"cleverpush-subscription-id-old":localStorage.getItem("cleverpush-subscription-id-old"),"cleverpush-subscription-status":localStorage.getItem("cleverpush-subscription-status"),"cleverpush-last-sync":localStorage.getItem("cleverpush-last-sync"),"cleverpush-last-worker-update":localStorage.getItem("cleverpush-last-worker-update"),"cleverpush-last-worker-version":localStorage.getItem("cleverpush-last-worker-version"),"cleverpush-visits":localStorage.getItem("cleverpush-visits"),"cleverpush-close-time":localStorage.getItem("cleverpush-close-time"),"cleverpush-deny-time":localStorage.getItem("cleverpush-deny-time"),"cleverpush-topics":localStorage.getItem("cleverpush-topics"),"cleverpush-tags":localStorage.getItem("cleverpush-tags")}},p=function(){location.href="https://".concat(f,".cleverpush.com/debug?status=").concat(encodeURIComponent(JSON.stringify(d)))};n.subscriptionManager.getActiveWorkerRegistration().then((function(e){e&&(d.workerScope=e.scope,e.active&&(d.worker=e.active.scriptURL,d.workerState=e.active.state),e.waiting&&(d.workerWaiting=e.waiting.scriptURL),e.waiting&&(d.workerInstalling=e.installing.scriptURL)),p()})).catch(p)}}else if("true"===l.get("cleverPushUnsubscribe")){var h=n.config.subdomain||n.config.channelSubdomain;h&&n.subscriptionManager.getSubscriptionId().then((function(e){n.unsubscribe((function(){location.href="https://".concat(h,".cleverpush.com/unsubscribe?subscriptionId=").concat(e)}))}))}else if("true"===l.get("cleverPushTestSubscription"))n.api.testSubscription=!0,n.subscriptionManager.sync().then((function(){alert("Dieses CleverPush Abonnement wurde erfolgreich als Test-Abonnement markiert.")}));else if(l.get("cleverPushWebBannerId")){var g=(n.config.webBanners||[]).find((function(e){return e._id===l.get("cleverPushWebBannerId")}));if(g)new _webBanner__WEBPACK_IMPORTED_MODULE_69__.a(g,n.config,n.subscriptionManager,n.api).show();else _utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.warn("cleverPushWebBannerId parameter given but banner with that ID could not be found")}else l.get("cleverPushNotificationId")?sessionStorage.setItem("cleverpush-notification-id",l.get("cleverPushNotificationId")):_?(localStorage.setItem("cleverpush-imported-subscription-id",_),n.waitForSubscription().then((function(e){e&&e!==_&&(n.api.unsubscribe(_),localStorage.removeItem("cleverpush-imported-subscription-id"),localStorage.removeItem("cleverpush-onesignal-subscription-id"))}))):"true"===l.get("cleverPushOptIn")?n.triggerOptIn():"true"===l.get("cleverPushShowBell")&&(n.config.hideNotificationBellSubscribed=!1,n.config.hideNotificationBellMobile=!1,n.config.showNotificationBell=!0);l.get("cleverPushReferralSubscriptionId")&&!sessionStorage.getItem("cleverpush-referral-subscription-id")&&sessionStorage.setItem("cleverpush-referral-subscription-id",l.get("cleverPushReferralSubscriptionId"));var b=l.get("cleverPushFollowUpCampaignId")||sessionStorage.getItem("cleverPushFollowUpCampaignId");b&&(sessionStorage.setItem("cleverPushFollowUpCampaignId",b),n.config.clickedFollowUpCampaignId=b)}else sessionStorage.getItem("cleverPushFollowUpCampaignId")&&(n.config.clickedFollowUpCampaignId=sessionStorage.getItem("cleverPushFollowUpCampaignId"));n.initFollowUpCampaigns()}))};n.config.initSdkBeforeOnLoad,Object(_utils_dom__WEBPACK_IMPORTED_MODULE_51__.c)().then(d).catch((function(e){i(e)}))}})).catch((function(e){n.initPageBanners(),n.initWebBanners();for(var t=document.querySelectorAll(".cleverpush-hide-unsupported"),r=0;r<t.length;r+=1){t[r].style.display="none"}e.warn=!0,i(e)}))}else i(new _error_CleverPushError__WEBPACK_IMPORTED_MODULE_70__.a("`channelId` or `channelName` not found in config.","invalid-config"))})).catch((function(e){i(e)}))}else if(Object(_utils_env__WEBPACK_IMPORTED_MODULE_55__.j)()||Object(_utils_env__WEBPACK_IMPORTED_MODULE_55__.k)()){if(this.config=e,"undefined"!=typeof URLSearchParams&&location.search&&location.search.length){var s=new URLSearchParams(location.search.slice(1));s.get("confirmAlertTestId")&&(this.config.confirmAlertTestId=s.get("confirmAlertTestId"),this.api.setConfirmAlertTestId(this.config.confirmAlertTestId))}r(),_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("Init done"),this.initialized=!0,this.initCalled=!1,i(!1,!0)}}else i(new _error_CleverPushError__WEBPACK_IMPORTED_MODULE_70__.a("Required attribute `channelId` in `config` not given.","invalid-config"))}},{key:"initHttpIframe",value:function(e){Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("initHttpIframe",e),this.init(e)}},{key:"initWidget",value:function(e){Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("initWidget",e),this.init(Object.assign({},e,{env:"WIDGET"}))}},{key:"initHttpPopup",value:function(e){Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("initHttpPopup",e),this.init(e,(function(e){if(e){_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.error(e);var t=document.findElementById("status");t?t.innerText=e.message||e.reason||e:window.opener?window.close():history.back()}else window.onbeforeunload=function(){return Object(_utils_translate__WEBPACK_IMPORTED_MODULE_63__.a)("windowclose.confirm")}}))}},{key:"initContentButtons",value:function(){var e=this;Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("initContentButtons"),this.contentButtons=this.contentButtons||[];for(var t=document.querySelectorAll(".cleverpush-content-button"),n=function(n){var i=t[n],r=new _contentButton__WEBPACK_IMPORTED_MODULE_64__.a(n,i,e.config,e.subscriptionManager,e.api);e.on(_const_event__WEBPACK_IMPORTED_MODULE_56__.a.SUBSCRIBED,(function(){r.show(!0)})),e.on(_const_event__WEBPACK_IMPORTED_MODULE_56__.a.TOPICS_SET,(function(){r.show(!0)})),e.on(_const_event__WEBPACK_IMPORTED_MODULE_56__.a.UNSUBSCRIBED,(function(){r.reset(!1)})),e.contentButtons.push(r)},i=0;i<t.length;i+=1)n(i)}},{key:"initMultiPlatformWidgets",value:function(){var e=this;Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("initMultiPlatformWidgets"),this.multiPlatformWidgets=this.multiPlatformWidgets||[];for(var t=document.querySelectorAll(".cleverpush-multi-platform-widget"),n=function(n){var i=t[n],r=new _multiPlatformWidget__WEBPACK_IMPORTED_MODULE_65__.a(n,i,e.config,e.subscriptionManager,e.api);e.on(_const_event__WEBPACK_IMPORTED_MODULE_56__.a.SUBSCRIBED,(function(){r.reset("facebook"!==e.browserType,!0)})),e.on(_const_event__WEBPACK_IMPORTED_MODULE_56__.a.UNSUBSCRIBED,(function(){r.reset("facebook"!==e.browserType,!1)})),e.waitForInit().then((function(){r.subscriptionManager=e.subscriptionManager,e.subscriptionManager.isSubscribed().then((function(t){r.show("facebook"!==e.browserType,t)})).catch((function(){r.show("facebook"!==e.browserType,!1)}))})).catch((function(){r.show(!1,!1)})),e.multiPlatformWidgets.push(r)},i=0;i<t.length;i+=1)n(i)}},{key:"initTagButtons",value:function(){var e=this;Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("initTagButtons"),this.tagButtons=this.tagButtons||[];for(var t=document.querySelectorAll(".cleverpush-tag-buttons"),n=function(n){var i=t[n],r=new _tagButton__WEBPACK_IMPORTED_MODULE_66__.a(n,i,e.config,e.subscriptionManager,e.api);e.on(_const_event__WEBPACK_IMPORTED_MODULE_56__.a.SUBSCRIBED,(function(){r.reset(!0)})),e.on(_const_event__WEBPACK_IMPORTED_MODULE_56__.a.UNSUBSCRIBED,(function(){r.reset(!1)})),e.tagButtons.push(r)},i=0;i<t.length;i+=1)n(i)}},{key:"initTopicButtons",value:function(){var e=this;Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("initTopicButtons"),this.topicButtons=this.topicButtons||[];for(var t=document.querySelectorAll(".cleverpush-topic-button"),n=function(n){var i=t[n],r=new _topicButton__WEBPACK_IMPORTED_MODULE_67__.a(n,i,e.config,e.subscriptionManager,e.api);e.on(_const_event__WEBPACK_IMPORTED_MODULE_56__.a.SUBSCRIBED,(function(){r.reset(!0)})),e.on(_const_event__WEBPACK_IMPORTED_MODULE_56__.a.UNSUBSCRIBED,(function(){r.reset(!1)})),e.topicButtons.push(r)},i=0;i<t.length;i+=1)n(i)}},{key:"initPageBanners",value:function(){var e,t=this;Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("initPageBanners"),this.pageBanners=this.pageBanners||[],this.subscriptionManager&&this.subscriptionManager.storageManager&&(e=this.subscriptionManager.storageManager),(this.config.pageBannerNotifications||[]).reduce((function(t,n){return t.then((function(t){return new Promise((function(i){e?e.getNotification(n._id).then((function(e){i(e?t:t.concat(n))})).catch((function(){i(t.concat(n))})):i(t.concat(n))}))}))}),Promise.resolve([])).then((function(n){n.forEach((function(n){var i=new _pageBanner__WEBPACK_IMPORTED_MODULE_68__.a(n,t.config,t.subscriptionManager,t.api);if((!n.scheduledAt||n.scheduledAt&&n.scheduledAt<new Date)&&(!n.expiresAt||n.expiresAt>new Date)){var r=!0;r&&n.pageBannerMatchPath&&(r=new RegExp(n.pageBannerMatchPath).test(window.location.pathname)),r&&n.pageBannerNotMatchPath&&(r=!new RegExp(n.pageBannerNotMatchPath).test(window.location.pathname)),r&&(!0,i.show(),e&&(i.onClickCallback=function(){return e.addNotification({id:n._id,url:n.url,title:n.title,text:n.text,icon:n.iconUrl,media:n.mediaUrl,autoHide:n.autoHide,subscriptionId:"",channelId:t.config.channelId,scheduledAt:n.scheduledAt,createdAt:n.createdAt,expiresAt:n.expiresAt,clicked:0,markedAsDelivered:1})}))}t.pageBanners.push(i)}))})),this.config.pageBannerAdblockEnabled&&Object(_utils_adblock__WEBPACK_IMPORTED_MODULE_71__.a)((function(e){e&&(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("AdBlock detected"),new _pageBanner__WEBPACK_IMPORTED_MODULE_68__.a({id:"adblockNotification",title:t.config.pageBannerAdblockTitle||"",text:t.config.pageBannerAdblockText||"",url:t.config.pageBannerAdblockUrl},t.config,t.subscriptionManager,t.api).show())}))}},{key:"initWebBanners",value:function(){var e=this;Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("initWebBanners");var t,n="cleverpush-webbanners-shown",i=localStorage.getItem(n);if(i)try{t=JSON.parse(i)}catch(e){}t||(t=[]);var r=sessionStorage.getItem(n);if(r)try{t=t.concat(JSON.parse(r))}catch(e){}this.webBanners=this.webBanners||[],this.subscriptionManager&&this.subscriptionManager.storageManager&&this.subscriptionManager.storageManager;var o=!1;(this.config.webBanners||[]).filter((function(e){return!t.includes(e._id)&&"draft"!==e.status})).forEach((function(i){var r=new _webBanner__WEBPACK_IMPORTED_MODULE_69__.a(i,e.config,e.subscriptionManager,e.api);if((!i.startsAt||new Date(i.startsAt)<new Date)&&(!i.endsAt||new Date(i.endsAt)>new Date))if(i.exitIntent){if(o)return;o=!0,ouibounce__WEBPACK_IMPORTED_MODULE_47___default()(null,{aggressive:!0,callback:function(){r.show(),t.push(i._id),"once"===i.frequency?localStorage.setItem(n,JSON.stringify(t)):"oncePerSession"===i.frequency&&sessionStorage.setItem(n,JSON.stringify(t))}})}else{(function(){var t=!0;if(t&&i.matchPath&&(t=new RegExp(i.matchPath).test(window.location.pathname)),t&&i.notMatchPath&&(t=!new RegExp(i.notMatchPath).test(window.location.pathname)),t&&i.matchDomain&&(t=!new RegExp(i.matchDomain).test(window.location.hostname||window.location.host)),t&&i.matchQuery&&Object.keys(i.matchQuery||{}).forEach((function(e){i.matchQuery[e]&&(t=t&&window.location.search&&window.location.search.indexOf(e+"="+i.matchQuery[e])>-1)})),t&&i.minimumVisits){var n=localStorage.getItem("cleverpush-banner-"+i._id+"-visits"),r=0;if(n)try{var o=parseInt(n,10);isNaN(o)||(r=parseInt(o,10))}catch(e){}r+=1,localStorage.setItem("cleverpush-banner-"+i._id+"-visits",r+""),t=t&&r>=i.minimumVisits}var s=function(){return t&&i.showOnlySubscribers?new Promise((function(t){e.isSubscribed((function(e){t(e)}))})):Promise.resolve(t)};return new Promise((function(e){if(t&&!isNaN(i.scrollPercentage)&&i.scrollPercentage>0){var n,r=function(){Object(_utils_env__WEBPACK_IMPORTED_MODULE_55__.f)()>=i.scrollPercentage&&(window.removeEventListener("scroll",n),s().then(e))};n=window.addEventListener("scroll",r),r()}else s().then(e)}))})().then((function(e){e&&setTimeout((function(){r.show(),t.push(i._id),"once"===i.frequency?localStorage.setItem(n,JSON.stringify(t)):"oncePerSession"===i.frequency&&sessionStorage.setItem(n,JSON.stringify(t))}),1e3*(i.timeout||0))}))}e.webBanners.push(r)}))}},{key:"autoAssignTagMatches",value:function autoAssignTagMatches(storedTags,tag,callback){if(tag.autoAssignPath){if(!new RegExp(tag.autoAssignPath).test(location.pathname))return;if(!tag.autoAssignFunction&&!tag.autoAssignSelector)return callback(!0)}if(tag.autoAssignFunction)try{if(tag.autoAssignCheckInterval&&!isNaN(tag.autoAssignCheckInterval)){var interval=setInterval((function(){try{var matches=!!eval(tag.autoAssignFunction);matches&&(clearInterval(interval),callback(!0))}catch(e){_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.trace(e)}}),tag.autoAssignCheckInterval);return null}return callback(!!eval(tag.autoAssignFunction))}catch(e){_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.trace(e)}if(tag.autoAssignSelector)try{for(var triggerElems=document.querySelectorAll(tag.autoAssignSelector),triggerElemIndex=0;triggerElemIndex<triggerElems.length;triggerElemIndex+=1){var triggerElem=triggerElems[triggerElemIndex];triggerElem&&triggerElem.addEventListener("click",(function(){callback(!0)}))}return null}catch(e){_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.trace(e)}return callback(!1)}},{key:"initTags",value:function(){var e=this;this.subscriptionManager.storageManager.getTags().then((function(t){var n=e.config.channelTags;n&&n.length&&"undefined"!=typeof localStorage&&n.forEach((function(n){e.autoAssignTagMatches(t,n,(function(t){if(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("autoAssignTagMatches callback"),t){var i,r=isNaN(n.autoAssignVisits)?0:n.autoAssignVisits,o="cleverpush-tag-autoAssignVisits-"+n._id,s=n.autoAssignSessionVisits?sessionStorage:localStorage,c=(new Date).toISOString().substr(0,10);n.autoAssignDays&&(i=new Date).setDate(i.getDate()-n.autoAssignDays);var a=s.getItem(o),u=0,l={};if(n.autoAssignDays)try{"object"!==_typeof(l=JSON.parse(a)||{})&&(l={}),Object.keys(l||{}).forEach((function(e){new Date(e)>=i?u+=l[e]||0:delete l[e]}))}catch(e){l={}}else"string"!=typeof a||isNaN(a)||(u=parseInt(a,10));var _=isNaN(n.autoAssignSessions)?0:n.autoAssignSessions,f="cleverpush-tag-autoAssignSessions-"+n._id,d="cleverpush-tag-autoAssignSessionsCounted-"+n._id,p=localStorage.getItem(f),h=0,g={};if(n.autoAssignDays)try{"object"!==_typeof(g=JSON.parse(p)||{})&&(g={}),Object.keys(g||{}).forEach((function(e){new Date(e)>=i?h+=g[e]||0:delete g[e]}))}catch(e){g={}}else"string"!=typeof p||isNaN(p)||(h=parseInt(p,10));h>=_?u>=r?!isNaN(n.autoAssignSeconds)&&n.autoAssignSeconds?setTimeout((function(){e.tagSubscription(n._id)}),1e3*n.autoAssignSeconds):e.tagSubscription(n._id):n.autoAssignDays?(l[c]||(l[c]=0),l[c]+=1,localStorage.setItem(o,JSON.stringify(l))):(u+=1,s.setItem(o,u.toString())):n.autoAssignDays?(l[c]||(l[c]=0),l[c]+=1,localStorage.setItem(o,JSON.stringify(l)),"true"!==sessionStorage.getItem(d)&&(sessionStorage.setItem(d,"true"),g[c]||(g[c]=0),g[c]+=1,localStorage.setItem(f,JSON.stringify(g)))):(u+=1,s.setItem(o,u.toString()),"true"!==sessionStorage.getItem(d)&&(sessionStorage.setItem(d,"true"),h+=1,localStorage.setItem(f,h.toString())))}}))}))}))}},{key:"initTopics",value:function initTopics(){var _this10=this;this.waitForSubscription().then((function(){_this10.subscriptionManager.storageManager.getTopics().then((function(storedTopics){var topics=_this10.config.channelTopics;if(topics&&topics.length&&"undefined"!=typeof localStorage){var topicFound=!1;topics.forEach((function(topic){var topicLayerShownKey="cleverpush-topic-layerShown-"+topic._id,visitsStorageKey="cleverpush-topic-layer-visits-"+topic._id,topicMatches=topic.layerMatchPath&&new RegExp(topic.layerMatchPath).test(location.pathname);if(topic.layerFunction&&topicMatches)try{topicMatches=!!eval(topic.layerFunction)}catch(e){_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.trace(e)}if(topic.layerEnabled&&"true"!==localStorage.getItem(topicLayerShownKey)&&"true"!==sessionStorage.getItem(topicLayerShownKey)&&storedTopics.indexOf(topic<-1)&&topicMatches){if(topicFound)return;var finalizeShow=function(){var e={title:topic.layerTitle,deny:topic.layerDenyText,allow:topic.layerAllowText,info:" "};Object.keys(e).forEach((function(t){void 0===e[t]&&delete e[t]}));var t=topics.filter((function(e){return e.parentTopic===topic._id})).length>0;_this10.subscriptionManager.confirm.appendConfirmBox(_this10.config.layerTheme||_this10.config.confirmAlertSelectTopicsLaterTheme||"cleverpush-confirm-default",t,{customLocalization:e,parentTopic:topic._id,topicsRadioButtons:topic.childTopicsRadioButtons,topicsRequired:topic.childTopicsRequired},(function(e,t){e&&t?(_this10.setTopics([].concat(_toConsumableArray(storedTopics),_toConsumableArray(t),[topic._id])),localStorage.setItem(topicLayerShownKey,"true")):sessionStorage.setItem(topicLayerShownKey,"true")}))},show=function(){if(topicFound=!0,!isNaN(topic.layerScrollPercentage)&&topic.layerScrollPercentage>0){var e,t=function(){Object(_utils_env__WEBPACK_IMPORTED_MODULE_55__.f)()>=topic.layerScrollPercentage&&(window.removeEventListener("scroll",e),finalizeShow())};e=window.addEventListener("scroll",t),t()}else finalizeShow()},visitsNeeded=isNaN(topic.layerMinimumVisits)?0:topic.layerMinimumVisits,visitsStorage=localStorage,visitsStr=visitsStorage.getItem(visitsStorageKey),visits=0;"string"!=typeof visitsStr||isNaN(visitsStr)||(visits=parseInt(visitsStr,10)),visits>=visitsNeeded?!isNaN(topic.layerTimeout)&&topic.layerTimeout?setTimeout((function(){show()}),1e3*topic.layerTimeout):show():(visits+=1,visitsStorage.setItem(visitsStorageKey,visits.toString()))}}))}}))}))}},{key:"triggerPathAndQuery",value:function(e){var t=e.split("?"),n=new RegExp(t[0]).test(location.pathname);if(n&&t.length>1&&"undefined"!=typeof URLSearchParams&&location.search&&location.search.length){var i=new URLSearchParams(t[1]),r=new URLSearchParams(location.search.slice(1));i.forEach((function(e,t){r.get(t)!==e&&e&&(n=!1)}))}return n}},{key:"initConversions",value:function(){var e=this;(this.config.channelEvents||[]).forEach((function(t){t&&t._id&&"path"===t.triggerType&&t.triggerPath&&e.triggerPathAndQuery(t.triggerPath)&&e.trackConversion(t._id)}))}},{key:"getNotificationPermission",value:function(){var e=this;return this.waitForInit().then((function(){return new Promise((function(t){e.config.ownDomain&&"https:"===location.protocol?"safari"===e.browserType?e.config.safariWebsitePushId?t(window.safari.pushNotification.permission(e.config.safariWebsitePushId).permission):_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("Safari website push ID is unknown."):"facebook"===e.browserType?t("default"):t(window.Notification.permission):e.iframeMessenger.message(_messenger_command__WEBPACK_IMPORTED_MODULE_53__.a.REMOTE_NOTIFICATION_PERMISSION,null,(function(e){var n=e.data;t(n)}))}))}))}},{key:"push",value:function(e){if("function"==typeof e)e();else if("string"==typeof e)this.push(arguments);else{var t=e.shift();this[t].apply(this,e)}}},{key:"executeFunction",value:function(){var e=[],t=this[(e=arguments&&"object"===_typeof(arguments[0])?arguments[0]:arguments)[0]];"function"==typeof t&&t.apply(this,Array.prototype.slice.call(e,1))}},{key:"waitForInit",value:function(){var e=this;return new Promise((function(t,n){e.initFailed?n(e.initError):e.initialized?t():(e.once(_const_event__WEBPACK_IMPORTED_MODULE_56__.a.INITIALIZED,t),e.once(_const_event__WEBPACK_IMPORTED_MODULE_56__.a.INITIALIZATION_FAILED,n))}))}},{key:"waitForSubscription",value:function(){var e=this;return new Promise((function(t,n){e.waitForInit().then((function(){e.subscriptionManager.isSubscribed().then((function(n){n?e.subscriptionManager.getSubscriptionId().then((function(e){t(e)})):e.once(_const_event__WEBPACK_IMPORTED_MODULE_56__.a.SUBSCRIBED,t)}))})).catch(n)}))}},{key:"waitForBell",value:function(){var e=this;return this.waitForInit().then((function(){return new Promise((function(t){e.bell?t():e.once(_const_event__WEBPACK_IMPORTED_MODULE_56__.a.BELL_READY,t)}))}))}},{key:"isSubscribed",value:function(e){var t=this;return this.waitForInit().then((function(){return t.subscriptionManager.isSubscribed().then((function(t){return e(t)}))})).catch((function(){return e(!1)}))}},{key:"subscribe",value:function(e){var t=this;return this.initialized?this.subscriptionManager.subscribe().then((function(){return t.subscriptionManager.getSubscriptionId().then((function(t){return e(!1,t)}))})).catch((function(t){return e(t)})):this.waitForInit().then((function(){return t.subscriptionManager.subscribe().then((function(){return t.subscriptionManager.getSubscriptionId().then((function(t){return e(!1,t)}))}))})).catch((function(t){return e(t)}))}},{key:"triggerOptIn",value:function(e,t){var n=this;Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("triggerOptIn");var i="function"==typeof t?t:e,r="boolean"==typeof e&&e,o="function"==typeof i?i:function(e){e&&("unsubscribed"!==e.reason&&"subscribed"!==e.reason||_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.info(e.message||e),"unsupported-browser"===e.reason||"private-mode"===e.reason||"already-initialized"===e.reason||"init-already-called"===e.reason||"unsubscribed"===e.reason?_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.warn(e.message||e):_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.error(e.message||e))};return this.waitForInit().then((function(){var e=function(){n.subscriptionManager.getSubscriptionId().then((function(e){o(!1,e)}))};(r?Promise.resolve(!0):n.subscriptionManager.canSubscribe()).then((function(t){if(!0===t){var i=n.subscriptionManager.getNotificationPermission();if(n.confirm&&(n.config.showConfirmAlert||!n.config.ownDomain||"https:"!==window.top.location.protocol&&"localhost"!==window.top.location.hostname))n.confirm.setAutoHideBackdrop("granted"===i||Object(_utils_env__WEBPACK_IMPORTED_MODULE_55__.g)()),n.confirm.show(o);else if(!n.subscriptionManager.isSubscribing){var r="default"===i||"PREVIEW"===n.config.env;_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("showBackdrop",r);var s=function(){"PREVIEW"!==n.config.env&&n.subscriptionManager.subscribe().then((function(t){n.confirm&&r&&n.confirm.hideBackdrop(t),"denied"===t?(n.confirm&&"safari"!==n.browserType&&n.confirm.showDenyAlert(),o(new _error_CleverPushError__WEBPACK_IMPORTED_MODULE_70__.a("Permission for notifications was denied",t))):e()})).catch((function(e){n.confirm&&r&&n.confirm.hideBackdrop("denied"),o(e)}))};if(n.confirm&&r)if(n.subscriptionManager instanceof _subscription_safariManager__WEBPACK_IMPORTED_MODULE_57__.a){_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("starting safariBlurChecker"),function e(t){"default"===n.subscriptionManager.getNotificationPermission()&&(document.hasFocus()?t<300?setTimeout((function(){e(t+1)}),100):_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("safariBlurChecker waited 30 secs without success"):(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("safariBlurChecker success"),n.confirm.showBackdrop()))}(0),s()}else"w3c"===n.browserType&&"storage"in navigator&&"estimate"in navigator.storage?navigator.storage.estimate().then((function(e){e.quota<=120*Math.pow(2,20)?(r=!1,_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("We are *probably* in incognito (used chrome 76 detection method). Will not show backdrop + layer."),Object(_utils_dom__WEBPACK_IMPORTED_MODULE_51__.b)().then((function(){s()}))):Object(_utils_dom__WEBPACK_IMPORTED_MODULE_51__.b)().then((function(){n.confirm.showBackdrop(s)}))})):Object(_utils_dom__WEBPACK_IMPORTED_MODULE_51__.b)().then((function(){n.confirm.showBackdrop(s)}));else s()}n.subscriptionManager.existingPermission="granted"===i,n.api.confirmAlertShown(n.subscriptionManager.existingPermission)}else o(new _error_CleverPushError__WEBPACK_IMPORTED_MODULE_70__.a("Can not subscribe because of an unknown error","cannot-subscribe"))})).catch((function(t){t&&"subscribed"===t.reason?(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("running successCallback()"),e()):o(t)}))})).catch((function(e){return o(e)}))}},{key:"unsubscribe",value:function(e,t){var n=this;Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("unsubscribe");var i="function"==typeof e?e:function(e){e&&_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.error(e.stack||e.message||e)},r="boolean"==typeof t&&t;this.waitForInit().then((function(){n.subscriptionManager.unsubscribe(r).then((function(){i(!1,!0)})).catch((function(e){i(e)}))}))}},{key:"tagSubscription",value:function(e){var t=this;Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("tagSubscription",e),this.waitForInit().then((function(){t.subscriptionManager&&t.subscriptionManager.initialTags.push(e),t.waitForSubscription().then((function(n){e?t.subscriptionManager.storageManager.getTags().then((function(i){var r=t.subscriptionManager.storageManager.getTagDate(e);i.indexOf(e)<0||!r||r.getTime()<Date.now()-432e5?(t.subscriptionManager.storageManager.setTags([].concat(_toConsumableArray(i),[e])),t.api.tagSubscription(n,e)):_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.trace("tag is already in stored tags")})):_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.error("tag id not specified")}))}))}},{key:"untagSubscription",value:function(e){var t=this;Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("untagSubscription",e),this.waitForInit().then((function(){t.waitForSubscription().then((function(n){e?(t.subscriptionManager.storageManager.getTags().then((function(n){n.splice(n.indexOf(e),1),t.subscriptionManager.storageManager.setTags(n)})),t.api.untagSubscription(n,e)):_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.error("tag id not specified")}))}))}},{key:"setTopics",value:function(e,t){var n=this;return Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("setTopics",e),this.waitForInit().then((function(){if(n.subscriptionManager)return n.subscriptionManager.setTopics(e),n.subscriptionManager.sync().then((function(){"function"==typeof t&&t()}))}))}},{key:"getTopics",value:function(e){var t=this;if(Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("getTopics"),"function"==typeof e)return this.waitForInit().then((function(){t.subscriptionManager&&t.subscriptionManager.getTopics().then((function(t){e(null,t)}))}));_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.error("Please provide a callback function (err, topics) => {} to getTopics")}},{key:"setAttribute",value:function(e,t){var n=this;Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("setAttribute",e,t),this.waitForInit().then((function(){n.waitForSubscription().then((function(i){localStorage.getItem("cleverpush-attribute-"+e)!==t&&(localStorage.setItem("cleverpush-attribute-"+e,t),n.api.setSubscriptionAttribute(i,e,t))}))}))}},{key:"getAttribute",value:function(e,t){var n=this;Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("getAttribute",e),this.waitForInit().then((function(){n.waitForSubscription().then((function(n){t(localStorage.getItem("cleverpush-attribute-"+e))}))}))}},{key:"hasAttributeValue",value:function(e,t,n){var i=localStorage.getItem("cleverpush-attribute-"+e);if(i)try{var r=JSON.parse(i);if(r&&r.length)return void n(r.indexOf(t)>-1)}catch(e){}n(!1)}},{key:"pushAttributeValue",value:function(e,t,n,i){var r=this;Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("pushAttributeValue",e,t);var o=i,s={};"function"==typeof n?o=n:"object"===_typeof(n)&&(s=n),this.waitForInit().then((function(){r.waitForSubscription().then((function(n){var i=!1,c=localStorage.getItem("cleverpush-attribute-"+e);if(c)try{var a=JSON.parse(c);a&&a.length?a.indexOf(t)>-1?i=!0:localStorage.setItem("cleverpush-attribute-"+e,JSON.stringify([].concat(_toConsumableArray(a),[t]))):localStorage.setItem("cleverpush-attribute-"+e,JSON.stringify([t]))}catch(n){localStorage.setItem("cleverpush-attribute-"+e,JSON.stringify([t]))}else localStorage.setItem("cleverpush-attribute-"+e,JSON.stringify([t]));i&&!s.force||r.api.pushSubscriptionAttributeValue(n,e,t).then((function(){"function"==typeof o&&o(!1,!0)}))}))}))}},{key:"pullAttributeValue",value:function(e,t,n){var i=this;Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("pullAttributeValue",e,t),this.waitForInit().then((function(){i.waitForSubscription().then((function(r){var o=localStorage.getItem("cleverpush-attribute-"+e);if(o)try{var s=JSON.parse(o);s&&s.length&&s.indexOf(t)>-1&&(s.splice(s.indexOf(t),1),localStorage.setItem("cleverpush-attribute-"+e,JSON.stringify(s)))}catch(e){}i.api.pullSubscriptionAttributeValue(r,e,t).then((function(){"function"==typeof n&&n(!1,!0)}))}))}))}},{key:"trigger",value:function(e,t){if(t||!1===t?_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("%c".concat(e.toUpperCase(),":"),Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.a)("event"),t):_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("%c".concat(e.toUpperCase()),Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.a)("event")),Object(_utils_env__WEBPACK_IMPORTED_MODULE_55__.h)()){if(e===_const_event__WEBPACK_IMPORTED_MODULE_56__.a.INITIALIZED){if(this.initialized)return;this.initialized=!0}this.emit(e,t)}}},{key:"triggerBellClick",value:function(){this.bell?this.bell.onClick():this.panel?this.panel.show():(this.panel=new _panel__WEBPACK_IMPORTED_MODULE_72__.a(this.config,this.subscriptionManager,this.trigger.bind(this)),this.panel.show())}},{key:"hidePanel",value:function(){this.panel&&this.panel.hide()}},{key:"translate",value:function(e){return Object(_utils_translate__WEBPACK_IMPORTED_MODULE_63__.a)(e)}},{key:"triggerFollowUpEvent",value:function(e,t,n){var i=this,r="object"===_typeof(n)?n:{};Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("triggerFollowUpEvent",e,t,r);var o=function(n){_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("triggerFollowUpEvent waitForSubscription done",n);var o=i.config.clickedFollowUpCampaignId===e,s="undefined"!=typeof sessionStorage?sessionStorage.getItem("cleverpush-notification-id"):void 0;i.api.triggerFollowUpEvent(n,e,s,t,Object.assign({url:location.href},r),o,i.config.bypassInactiveFollowUps)};this.waitForInit().then((function(){_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.debug("triggerFollowUpEvent waitForInit done"),i.config.autoRegister?i.waitForSubscription().then(o):i.subscriptionManager.getSubscriptionId().then(o)}))}},{key:"initBounces",value:function(){var e=this;try{if(Object(_utils_env__WEBPACK_IMPORTED_MODULE_55__.i)()&&"undefined"!=typeof URLSearchParams&&location.search&&location.search.length){var t=new URLSearchParams(location.search.slice(1)),n=t.get("cleverPushBounceUrl");n&&n.length&&this.initBounce(n,t.get("cleverPushNotificationId"))}if(this.config&&this.config.bounceEnabled&&this.config.bounceFilters&&this.config.bounceFilters.length){var i=document.referrer&&(document.referrer.endsWith("cleverpush.com/worker.js")||document.referrer.endsWith(this.config.serviceWorkerFile||document.referrer.endsWith("/cleverpush-worker.js"))),r=document.referrer&&/google|bing|yahoo|baidu|duckduckgo|wolframalpha/.test(document.referrer),o=this.config.bounceFilters.find((function(t){var n=(!t.source||"notification"===t.source)&&i||"seo"===t.source&&r||(!e.referrer||e.referrer===location.href)&&"direct"===t.source;return n&&t.matchQuery&&Object.keys(t.matchQuery||{}).forEach((function(e){t.matchQuery[e]&&(n=n&&window.location.search&&window.location.search.indexOf(e+"="+t.matchQuery[e])>-1)})),n}));o&&o.url&&this.initBounce(o.url,null)}"true"===sessionStorage.getItem("cleverpush-bounced")&&window.performance&&window.performance.navigation.type===window.performance.navigation.TYPE_BACK_FORWARD&&(sessionStorage.removeItem("cleverpush-bounced"),history.back())}catch(e){_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.error(e)}}},{key:"initBounce",value:function(e,t){var n=this,i=!1;if(window.history&&window.history.pushState){var r=function(){setTimeout((function(){window.addEventListener("popstate",(function(){if("true"!==sessionStorage.getItem("cleverpush-bounced")&&(sessionStorage.setItem("cleverpush-bounced","true"),i)){var r={channelId:n.config.channelId,notificationId:t,subscriptionId:n.subscriptionManager.storageManager.getSubscriptionId()};n.api.trackBounce(r),location.href=e}}),!1)}),250);var r=location.pathname+(location.search||"")+(location.hash||"");setTimeout((function(){history.pushState({cleverpushBounce:!0},document.title,"?_"),setTimeout((function(){history.replaceState(null,document.title,r)}),150)}),150),i=!0};"completed"===document.readyState||"interactive"===document.readyState?r():window.addEventListener("load",r)}}},{key:"initFollowUpCampaigns",value:function initFollowUpCampaigns(){var _this31=this;if(this.config.followUpCampaigns&&this.config.followUpCampaigns.length&&this.config.followUpCampaigns.forEach((function(campaign){var trigger=function(e){var t={};campaign.triggerAutoVariables&&campaign.triggerAutoVariables.length&&campaign.triggerAutoVariables.forEach((function(n){var i;n.selector.split(",").forEach((function(t){i||(i=e.querySelector(t.trim()))||(i=document.querySelector(t.trim()))})),i&&("img"===i.tagName.toLowerCase()&&(i.src||i.dataset&&i.dataset.src)?t[n.variable]=i.src||i.dataset&&i.dataset.src:"a"===i.tagName.toLowerCase()&&i.href?t[n.variable]=i.href:"input"!==i.tagName.toLowerCase()&&"textarea"!==i.tagName.toLowerCase()||!i.value?t[n.variable]=i.innerText:t[n.variable]=i.value)})),_this31.triggerFollowUpEvent(campaign._id,"trigger"+(campaign.triggerType[0].substr(0,1).toUpperCase()+campaign.triggerType.substr(1)),t)};if("selector"===campaign.triggerType&&campaign.triggerSelector)for(var triggerElems=document.querySelectorAll(campaign.triggerSelector),_loop5=function(e){var t=triggerElems[e];t&&t.addEventListener("click",(function(){trigger(t.parentNode)}))},triggerElemIndex=0;triggerElemIndex<triggerElems.length;triggerElemIndex+=1)_loop5(triggerElemIndex);else if("function"===campaign.triggerType&&campaign.triggerFunction){var success=!1;try{success=!!eval(campaign.triggerFunction)}catch(e){_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.trace(e)}success&&trigger(document)}if("selector"===campaign.cancelType&&campaign.cancelSelector)for(var _triggerElems=document.querySelectorAll(campaign.cancelSelector),_triggerElemIndex=0;_triggerElemIndex<_triggerElems.length;_triggerElemIndex+=1){var triggerElem=_triggerElems[_triggerElemIndex];triggerElem&&triggerElem.addEventListener("click",(function(){_this31.triggerFollowUpEvent(campaign._id,"cancelSelector")}))}else if("function"===campaign.cancelType&&campaign.cancelFunction){var _success=!1;try{_success=!!eval(campaign.cancelFunction)}catch(e){_utils_debug__WEBPACK_IMPORTED_MODULE_50__.b.trace(e)}_success&&_this31.triggerFollowUpEvent(campaign._id,"cancelFunction")}else"path"===campaign.cancelType&&campaign.cancelPath&&_this31.triggerPathAndQuery(campaign.cancelPath)&&_this31.triggerFollowUpEvent(campaign._id,"cancelPath")})),this.config.shopifyCartAbandonmentFollowUpCampaignId){for(var addToCartButtons=document.querySelectorAll('button[name="add"], button.addtocart, a.add-to-cart'),addToCartButtonIndex=0;addToCartButtonIndex<addToCartButtons.length;addToCartButtonIndex++){var addToCartButton=addToCartButtons[addToCartButtonIndex];addToCartButton&&addToCartButton.addEventListener("click",(function(){_this31.triggerFollowUpEvent(_this31.config.shopifyCartAbandonmentFollowUpCampaignId,"addToCart")}))}(document.documentElement&&document.documentElement.className&&document.documentElement.className.indexOf("page--thank-you")>-1||window.location&&window.location.pathname&&window.location.pathname.indexOf("thank_you")>-1)&&this.triggerFollowUpEvent(this.config.shopifyCartAbandonmentFollowUpCampaignId,"checkout")}if(this.config.epagesCartAbandonmentFollowUpCampaignId){var _addToCartButton=document.querySelector("button.product-add-cart-button");_addToCartButton&&_addToCartButton.addEventListener("click",(function(){_this31.triggerFollowUpEvent(_this31.config.epagesCartAbandonmentFollowUpCampaignId,"addToCart")})),(document.documentElement&&document.documentElement.className&&document.documentElement.className.indexOf("page--thank-you")>-1||window.location&&window.location.pathname&&window.location.pathname.indexOf("thank_you")>-1)&&this.triggerFollowUpEvent(this.config.epagesCartAbandonmentFollowUpCampaignId,"checkout")}}},{key:"trackConversion",value:function(e,t){var n=this,i=void 0!==t?t:void 0;Object(_utils_debug__WEBPACK_IMPORTED_MODULE_50__.c)("trackConversion",i),this.waitForInit().then((function(){n.waitForSubscription().then((function(t){var r=new URLSearchParams(location.search.slice(1)).get("cleverPushNotificationId")||sessionStorage.getItem("cleverpush-notification-id");r&&!sessionStorage.getItem("cleverpush-conversion-"+e+"-tracked")&&(sessionStorage.setItem("cleverpush-notification-id",r),sessionStorage.setItem("cleverpush-conversion-"+e+"-tracked",r),n.api.trackConversion(t,r,e,i))}))}))}}]),CleverPush}(wolfy87_eventemitter__WEBPACK_IMPORTED_MODULE_46___default.a)},function(e,t,n){var i;!function(t){"use strict";function r(){}var o=r.prototype,s=t.EventEmitter;function c(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function a(e){return function(){return this[e].apply(this,arguments)}}o.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp)for(n in t={},i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n]);else t=i[e]||(i[e]=[]);return t},o.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},o.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},o.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),r="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===c(i[n],t)&&i[n].push(r?t:{listener:t,once:!1});return this},o.on=a("addListener"),o.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},o.once=a("addOnceListener"),o.defineEvent=function(e){return this.getListeners(e),this},o.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},o.removeListener=function(e,t){var n,i,r=this.getListenersAsObject(e);for(i in r)r.hasOwnProperty(i)&&-1!==(n=c(r[i],t))&&r[i].splice(n,1);return this},o.off=a("removeListener"),o.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},o.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},o.manipulateListeners=function(e,t,n){var i,r,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)o.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},o.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},o.removeAllListeners=a("removeEvent"),o.emitEvent=function(e,t){var n,i,r,o,s=this.getListenersAsObject(e);for(o in s)if(s.hasOwnProperty(o))for(n=s[o].slice(0),r=0;r<n.length;r++)!0===(i=n[r]).once&&this.removeListener(e,i.listener),i.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},o.trigger=a("emitEvent"),o.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},o.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},o._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},o._getEvents=function(){return this._events||(this._events={})},r.noConflict=function(){return t.EventEmitter=s,r},void 0===(i=function(){return r}.call(t,n,t,e))||(e.exports=i)}("undefined"!=typeof window?window:this||{})},function(e,t,n){var i,r;void 0===(r="function"==typeof(i=function(e,t,n){return function(e,t){"use strict";var n=t||{},i=n.aggressive||!1,r=p(n.sensitivity,20),o=p(n.timer,1e3),s=p(n.delay,0),c=n.callback||function(){},a=h(n.cookieExpire)||"",u=n.cookieDomain?";domain="+n.cookieDomain:"",l=n.cookieName?n.cookieName:"viewedOuibounceModal",_=!0===n.sitewide?";path=/":"",f=null,d=document.documentElement;function p(e,t){return void 0===e?t:e}function h(e){var t=24*e*60*60*1e3,n=new Date;return n.setTime(n.getTime()+t),"; expires="+n.toUTCString()}function g(e){e.clientY>r||(f=setTimeout(w,s))}function b(){f&&(clearTimeout(f),f=null)}setTimeout((function(){E()||(d.addEventListener("mouseleave",g),d.addEventListener("mouseenter",b),d.addEventListener("keydown",v))}),o);var m=!1;function v(e){m||e.metaKey&&76===e.keyCode&&(m=!0,f=setTimeout(w,s))}function y(e,t){return function(){for(var e=document.cookie.split("; "),t={},n=e.length-1;n>=0;n--){var i=e[n].split("=");t[i[0]]=i[1]}return t}()[e]===t}function E(){return y(l,"true")&&!i}function w(){E()||(e&&(e.style.display="block"),c(),O())}function O(e){var t=e||{};void 0!==t.cookieExpire&&(a=h(t.cookieExpire)),!0===t.sitewide&&(_=";path=/"),void 0!==t.cookieDomain&&(u=";domain="+t.cookieDomain),void 0!==t.cookieName&&(l=t.cookieName),document.cookie=l+"=true"+a+u+_,d.removeEventListener("mouseleave",g),d.removeEventListener("mouseenter",b),d.removeEventListener("keydown",v)}return{fire:w,disable:O,isDisabled:E}}})?i.call(t,n,t,e):i)||(e.exports=r)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(148),n(149),n(150),n(91),n(508),n(564),n(102),n(112),n(200),n(81),n(108),n(207),n(195),n(83),n(98),n(467),n(509),n(510),n(511),n(512),n(513),n(514),n(515),n(516),n(517),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(144);var i=n(249),r=n.n(i),o=n(1),s=n(502);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.channelId=t,this.confirmAlertTestId=void 0,this.endpoint="https://api.cleverpush.com",this.regionEnabled=!1}var t,n,i;return t=e,(n=[{key:"setConfirmAlertTestId",value:function(e){this.confirmAlertTestId=e}},{key:"request",value:function(e,t,n){Object(o.c)("request",e,t,n);var i={method:"GET",headers:{Accept:"application/json"}};return e&&(i.method=e),n&&(i.body=JSON.stringify(Object.assign({sdkVersion:"undefined"!=typeof VERSION?VERSION:void 0},n)),i.headers["Content-Type"]="application/json"),Object(s.a)(this.endpoint+t,i)}},{key:"getChannelConfig",value:function(e){var t="/channel/".concat(this.channelId,"/config");return void 0!==e&&e&&(t+="?confirmAlertTestsEnabled=true"),this.request("GET",t,null)}},{key:"tagSubscription",value:function(e,t){return this.request("POST","/subscription/tag",{channelId:this.channelId,tagId:t,subscriptionId:e})}},{key:"untagSubscription",value:function(e,t){return this.request("POST","/subscription/untag",{channelId:this.channelId,tagId:t,subscriptionId:e})}},{key:"setSubscriptionAttribute",value:function(e,t,n){return this.request("POST","/subscription/attribute",{channelId:this.channelId,attributeId:t,value:n,subscriptionId:e})}},{key:"pushSubscriptionAttributeValue",value:function(e,t,n){return this.request("POST","/subscription/attribute/push-value",{channelId:this.channelId,attributeId:t,value:n,subscriptionId:e})}},{key:"pullSubscriptionAttributeValue",value:function(e,t,n){return this.request("POST","/subscription/attribute/pull-value",{channelId:this.channelId,attributeId:t,value:n,subscriptionId:e})}},{key:"triggerFollowUpEvent",value:function(e,t,n,i,r,o,s){return this.request("POST","/subscription/event",{channelId:this.channelId,subscriptionId:e,campaignId:t,notificationId:n,name:i,parameters:r,fromNotification:o,bypassInactive:s})}},{key:"trackConversion",value:function(e,t,n,i){return this.request("POST","/subscription/conversion",{channelId:this.channelId,subscriptionId:e,notificationId:t,eventId:n,amount:i})}},{key:"trackBounce",value:function(e){var t=Object.assign({channelId:this.channelId},e||{}),n=new r.a(navigator.userAgent),i=n.getBrowser(),o=n.getOS();if(t.platformName=o.name||void 0,t.browserType=i.name||void 0,"function"==typeof navigator.sendBeacon){var s=new Blob([JSON.stringify(t)],{type:"application/x-www-form-urlencoded"});return navigator.sendBeacon(this.endpoint+"/notification/bounced",s)}return this.request("POST","/notification/bounced",t)}},{key:"getSyncParameters",value:function(e){Object(o.c)("getSyncParameters");var t=new r.a(navigator.userAgent),n=t.getBrowser(),i=t.getOS(),c={channelId:this.channelId,browserType:n.name||void 0,browserVersion:n.version||void 0,platformName:i.name||void 0,platformVersion:i.version||void 0},a=location.pathname;if(a&&(c.pathname=a),"undefined"!=typeof sessionStorage){var u=sessionStorage.getItem("cleverpush-referrer")||document.referrer.split("?")[0];u&&(c.referrer=u);var l=sessionStorage.getItem("cleverpush-referral-subscription-id");l&&(c.referralSubscriptionId=l)}if("undefined"!=typeof localStorage){var _=localStorage.getItem("cleverpush-visits")||0;isNaN(_)||(c.visits=_+"")}var f=(navigator.language||navigator.userLanguage||"").substr(0,2);return f&&(c.language=f),this.confirmAlertTestId&&(c.confirmAlertTestId=this.confirmAlertTestId),this.testSubscription&&(c.testSubscription=this.testSubscription),void 0!==e&&e?c:new Promise((function(e){Object(s.a)("https://geoip-api.cleverpush.com/",{mode:"cors",timeout:3e3}).then((function(t){e(Object.assign(c,t))})).catch((function(t){o.b.error(t),e(c)}))}))}},{key:"syncSubscription",value:function(e,t,n,i){var r=this;if(Object(o.c)("syncSubscription",e,t),!e)return Promise.reject();var s="object"===c(i)?i:{};return this.getSyncParameters().then((function(i){s=Object.assign(s,i);var o=parseInt(s.browserVersion.split(".")[0],10);if(r.regionEnabled||delete s.region,"object"===c(t)&&t&&!isNaN(t.length)&&(s.topics=t),"object"===c(n)&&n&&n.length&&(s.tags=n),s.existingPermission&&delete s.confirmAlertTestId,e.facebookUserRef&&(s.facebookUserRef=e.facebookUserRef),"Safari"===s.browserType&&"object"===c(e)&&e.deviceToken)s.apnsToken=e.deviceToken;else if("string"==typeof e)s.subscriptionId=e;else if("Chrome"===s.browserType&&o>=42&&o<50)s.endpoint=e.endpoint;else if(s.endpoint=e.endpoint,void 0!==e.getKey){var a=e.getKey?e.getKey("p256dh"):null,u=null;("Firefox"!==s.browserType||"Firefox"===s.browserType&&o>=46)&&(u=e.getKey?e.getKey("auth"):null),a&&(s.publicKey=btoa(String.fromCharCode.apply(null,new Uint8Array(a)))),u&&(s.authSecret=btoa(String.fromCharCode.apply(null,new Uint8Array(u))))}return new Promise((function(e,t){return r.request("POST","/subscription/sync/".concat(r.channelId),s).then((function(n){n&&n.id?e(n):n&&n.error?t(n.error):t()})).catch((function(e){e.reason?t(e.reason):e.status?t(e.status):t(e)}))}))}))}},{key:"unsubscribe",value:function(e){var t=this;return new Promise((function(n){t.request("POST","/subscription/unsubscribe",{subscriptionId:e,channelId:t.channelId}).then(n).catch(n)}))}},{key:"startSession",value:function(e){var t=this;return new Promise((function(n){t.request("POST","/subscription/session/start",{subscriptionId:e,channelId:t.channelId}).then(n).catch(n)}))}},{key:"endSession",value:function(e,t){var n=new Blob([JSON.stringify(Object.assign({subscriptionId:e,channelId:this.channelId},t))],{type:"application/x-www-form-urlencoded"});return navigator.sendBeacon(this.endpoint+"/subscription/session/end",n)}},{key:"confirmAlertShown",value:function(e){var t=!0,n=sessionStorage.getItem("cleverpush-confirm-alert-reported");if(n){var i=parseInt(n,10);isNaN(i)||(t=i+72e5<Date.now())}if(t){sessionStorage.setItem("cleverpush-confirm-alert-reported",Date.now());var o={channelId:this.channelId,confirmAlertTestId:this.confirmAlertTestId},s=new r.a(navigator.userAgent),c=s.getBrowser(),a=s.getOS();return o.platformName=a.name||void 0,o.browserType=c.name||void 0,void 0!==e&&e&&(o.existingPermission=!0,delete o.confirmAlertTestId),this.request("POST","/channel/confirm-alert",o)}return Promise.resolve()}},{key:"confirmAlertDenied",value:function(){var e={channelId:this.channelId,confirmAlertTestId:this.confirmAlertTestId};return e.existingPermission&&delete e.confirmAlertTestId,this.request("POST","/channel/blocked-optin-request",e)}}])&&a(t.prototype,n),i&&a(t,i),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n(148),n(149),n(150),n(135),n(91),n(102),n(112),n(200),n(254),n(81),n(255),n(256),n(108),n(195),n(257),n(83),n(137),n(98),n(253),n(144),n(211);var i=n(249),r=n.n(i),o=n(268),s=n(55),c=n(1),a=n(22),u=n(258),l=n(61),_=n(151);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=g(e);if(t){var r=g(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(f,e);var t,n,i,o=p(f);function f(e,t,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(i=o.call(this,e,t,n)).config=e,i.isSubscribing=!1,i.popupMessenger=null;var s=localStorage.getItem("cleverpush-topics");if(s)try{i.topics=JSON.parse(s)}catch(e){}return Object(_.b)().then((function(){i.subscribe().then((function(e){c.b.debug(e);var t=document.getElementById("loading");t&&(t.style.display="none");var n=document.getElementById("status");n&&(n.style.display="none");var i=document.getElementById("success");i&&(i.style.display="block"),setTimeout((function(){window.onbeforeunload=null,window.opener?window.close():history.back()}),1e3)})).catch((function(e){c.b.error(e);var t=document.getElementById("loading");t&&(t.style.display="none");var n=document.getElementById("status");if(n&&(n.style.display="block",n.innerHTML="<h2>".concat(e?e.message||e.reason||e:"Unbekannter Fehler ist aufgetreten.","</h2>")),"denied"===e.reason||"default"===e.reason){window.onbeforeunload=null;var i=document.querySelector(".subscribe-helper-text");i&&(i.style.marginTop=0);var o=document.getElementById("unblock-tutorial");if(o){var s=new r.a,a=s.getBrowser().name,u=s.getOS().name;if(a=a.toLowerCase().replace(/\s/g,"").replace("chromium","chrome"),u=u.toLowerCase().replace(/\s/g,"").replace("macos","mac"),!("chrome"!==a&&"firefox"!==a&&"safari"!==a||"android"!==u&&"windows"!==u&&"mac"!==u)){var l=document.createElement("img");l.src="https://static.cleverpush.com/app/images/unblock-tutorial/".concat(a,"-").concat(u,".gif"),l.style.display="initial",o.appendChild(l),o.style.display="initial"}}}}))})),i}return t=f,(n=[{key:"subscribeForce",value:function(){return this.subscribe()}},{key:"subscribe",value:function(){var e=this;return new Promise((function(t,n){var i=e.config.alertLocalization||{},r=(navigator.language||navigator.userLanguage||"").substr(0,2);e.config.alertLocalizationTranslations&&r&&e.config.alertLocalizationTranslations[r]&&(i=Object.assign({},i,e.config.alertLocalizationTranslations[r]));var o={popupInfo:i.popupInfo||Object(a.a)("popup.info").formatCleverPush("<strong>".concat(Object(a.a)("confirm.allowBrowser")||Object(a.a)("confirm.allow"),"</strong>")),popupText:i.popupText||Object(a.a)("popup.text").formatCleverPush("<strong>".concat(e.config.channelName,"</strong>"))};if(e.isSubscribing)n(new u.a("A subscription process is already in progress."));else{e.isSubscribing=!0;var _=function(){e.registerWorker().then((function(t){return t.pushManager.subscribe(e.getPushManagerSubscribeOptions())})).then((function(n){e.sync(n).then((function(){e.isSubscribing=!1,e.triggerEvent(s.a.SUBSCRIBED,e.storageManager.getSubscriptionId()),t("granted")}))})).catch((function(t){c.b.error(t),e.isSubscribing=!1,n(t)}))};if("default"===Notification.permission){var f=document.getElementById("status");f&&(f.style.display="block",f.innerHTML="<h2>".concat(o.popupInfo,"</h2><p>").concat(o.popupText,"</p>")),Notification.requestPermission((function(t){"granted"===t?_():(e.isSubscribing=!1,n(new l.a(o.popupInfo,t))),e.confirm&&e.confirm.hideBackdrop(),c.b.debug("HTTP Permission Request Result:",t)}))}else"denied"===Notification.permission?(e.isSubscribing=!1,n(new l.a(o.popupInfo,"denied"))):(c.b.debug("PermissionAlreadyGranted"),_())}}))}}])&&d(t.prototype,n),i&&d(t,i),f}(o.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));n(148),n(149),n(150),n(91),n(154),n(102),n(153),n(112),n(254),n(81),n(533),n(255),n(256),n(108),n(195),n(257),n(583),n(651),n(83),n(137),n(98),n(469),n(144),n(484);var i=n(268),r=n(1),o=n(258),s=n(471),c=n.n(s),a=n(49);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=m(e);if(t){var r=m(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n,i){return(h="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,i){var r,o=b(e,t);if(o){if((r=Object.getOwnPropertyDescriptor(o,t)).set)return r.set.call(i,n),!0;if(!r.writable)return!1}if(r=Object.getOwnPropertyDescriptor(i,t)){if(!r.writable)return!1;r.value=n,Object.defineProperty(i,t,r)}else!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(i,t,n);return!0})(e,t,n,i)}function g(e,t,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=b(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(u,e);var t,n,i,s=_(u);function u(e,t,n){var i,o,l,_,p,b,v,y,E,w;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(E=s.call(this,e,t,n)).storageManager.initDb(),E.config=e,E.api=t,E.isSubscribing=!1,E.iframeMessenger=null,(window.opener||window.parent)===window)return document.write('<p style="font-size: 14px; color: red; font-family: sans-serif;">CleverPush: This page cannot be directly opened, and\nmust be opened as a result of a subscription call.</p>'),f(E);if("undefined"!=typeof URLSearchParams&&location.search){var O=new URLSearchParams(location.search.slice(1));O.get("origin")&&(w=O.get("origin"))}r.b.debug("PenPal parentOrigin",w),c.a.debug=r.b.getLevel()<2;c.a.connectToParent({parentOrigin:w,methods:{subscribe:E.subscribe.bind(d(E)),setSubscribed:E.setSubscribed.bind(d(E)),setUnsubscribed:E.setUnsubscribed.bind(d(E)),unsubscribe:E.unsubscribe.bind(d(E)),isSubscribed:E.isSubscribed.bind(d(E)),canSubscribe:E.canSubscribe.bind(d(E)),setTopics:g((i=d(E),m(u.prototype)),"setTopics",i).bind(d(E)),getTopics:g((o=d(E),m(u.prototype)),"getTopics",o).bind(d(E)),getSubscriptionId:g((l=d(E),m(u.prototype)),"getSubscriptionId",l).bind(d(E)),hasNotificationPermission:g((_=d(E),m(u.prototype)),"hasNotificationPermission",_).bind(d(E)),getNotificationPermission:g((p=d(E),m(u.prototype)),"getNotificationPermission",p).bind(d(E)),getStoredNotifications:g((b=d(E),m(u.prototype)),"getStoredNotifications",b).bind(d(E)),deleteStoredNotification:g((v=d(E),m(u.prototype)),"deleteStoredNotification",v).bind(d(E)),setConfig:function(e){return function(e,t,n,i,r){if(!h(e,t,n,i||e)&&r)throw new Error("failed to set property")}((y=d(E),m(u.prototype)),"config",e,y,!0),E.config=e,E.config.confirmAlertTestId&&E.api.setConfirmAlertTestId(E.config.confirmAlertTestId),Promise.resolve()},getStorage:function(){try{Promise.resolve({"cleverpush-subscription-id":localStorage.get("cleverpush-subscription-id"),"cleverpush-subscription-status":localStorage.get("cleverpush-subscription-status")})}catch(e){Promise.resolve({"cleverpush-subscription-id":void 0,"cleverpush-subscription-status":void 0})}}}});return!navigator.permissions||"Firefox"===a.a.name&&a.c<46||navigator.permissions.query({name:"notifications"}).then((function(e){e.onchange=function(){E.isSubscribing||("granted"!==window.Notification.permission?E.unsubscribe():E.isSubscribed((function(e){e||E.subscribe()})))}})),E}return t=u,(n=[{key:"isSubscribed",value:function(){var e=this;return new Promise((function(t){try{e.storageManager.isSubscribed(!1,!1,!0).then((function(e){r.b.debug("Status: storage status:",e),t(e)}))}catch(e){t(!1)}}))}},{key:"canSubscribe",value:function(){var e=this;return new Promise((function(t){try{e.storageManager.canSubscribe().then((function(n){n?e.isSubscribed().then((function(e){t(e?{result:!1,message:"User is already subscribed",reason:"subscribed"}:{result:!0})})):t({result:!1,message:"User has manually unsubscribed or denied notifications",reason:"unsubscribed"})}))}catch(e){t({result:!0})}}))}},{key:"subscribeForce",value:function(){return this.subscribe()}},{key:"subscribe",value:function(){var e=this;return new Promise((function(t,n){if(e.isSubscribing)r.b.error("A subscription process is already in progress."),n(new o.a);else{e.isSubscribing=!0;var i=function(){e.storageManager.isSubscribed().then((function(e){t({permission:"granted",serviceWorkerInstalled:e})}))};"default"===Notification.permission?Notification.requestPermission((function(n){e.isSubscribing=!1,"granted"===n?i():t({permission:n}),r.b.debug("HTTP Permission Request Result:",n)})):"denied"===Notification.permission?(e.isSubscribing=!1,t({permission:"denied"})):(e.isSubscribing=!1,r.b.debug("PermissionAlreadyGranted"),i())}}))}},{key:"setSubscribed",value:function(e){try{this.storageManager.setSubscribed(e,!0)}catch(e){}}},{key:"setUnsubscribed",value:function(e){try{this.storageManager.setUnsubscribed(e)}catch(e){}}},{key:"unsubscribe",value:function(e){var t=this;return new Promise((function(n){var i;try{i=t.storageManager.getSubscriptionId()}catch(e){}return i?t.api.unsubscribe(i).then((function(){try{t.storageManager.setUnsubscribed(e)}catch(e){}return n()})).catch((function(){return n()})):n()}))}}])&&l(t.prototype,n),i&&l(t,i),u}(i.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Confirm}));var core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(148),core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_symbol__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(149),core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_symbol_description__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_symbol_iterator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(150),core_js_modules_es_symbol_iterator__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_symbol_iterator__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(135),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(266),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(82),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(196),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(91),core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(201),core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_array_join__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(264),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(154),core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_array_sort__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(468),core_js_modules_es_array_sort__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_array_sort__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_date_to_string__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(102),core_js_modules_es_date_to_string__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_date_to_string__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_function_bind__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(153),core_js_modules_es_function_bind__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_function_bind__WEBPACK_IMPORTED_MODULE_13__),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(112),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_14__),core_js_modules_es_object_assign__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(200),core_js_modules_es_object_assign__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(core_js_modules_es_object_assign__WEBPACK_IMPORTED_MODULE_15__),core_js_modules_es_object_define_property__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(81),core_js_modules_es_object_define_property__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(core_js_modules_es_object_define_property__WEBPACK_IMPORTED_MODULE_16__),core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(267),core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_17__),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(108),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_18__),core_js_modules_es_parse_int__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(207),core_js_modules_es_parse_int__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(core_js_modules_es_parse_int__WEBPACK_IMPORTED_MODULE_19__),core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(465),core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(core_js_modules_es_regexp_constructor__WEBPACK_IMPORTED_MODULE_20__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(83),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_21__),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(137),core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(core_js_modules_es_regexp_to_string__WEBPACK_IMPORTED_MODULE_22__),core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(98),core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(core_js_modules_es_string_iterator__WEBPACK_IMPORTED_MODULE_23__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(253),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_24__),core_js_modules_es_string_trim__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(262),core_js_modules_es_string_trim__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(core_js_modules_es_string_trim__WEBPACK_IMPORTED_MODULE_25__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(90),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_26__),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(144),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_27__),core_js_modules_web_timers__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(211),core_js_modules_web_timers__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(core_js_modules_web_timers__WEBPACK_IMPORTED_MODULE_28__),ua_parser_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(249),ua_parser_js__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(ua_parser_js__WEBPACK_IMPORTED_MODULE_29__),_utils_debug__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(1),_utils_dom__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(151),_utils_translate__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(22),_subscription_facebookManager__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(481),_utils_topics__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(503);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Confirm=function(){function Confirm(e,t){var n=this;_classCallCheck(this,Confirm),this.autoHideBackdrop=!0,this.config=e,this.subscriptionManager=t,this.id=document.querySelectorAll(".cleverpush-confirm").length+1,this.visible=!1,this.channelTopics=(this.config.channelTopics||[]).filter((function(e){var t=!0;return t&&e.matchPath&&e.matchPath.length&&(t=new RegExp(e.matchPath).test(window.location.pathname)),t&&e.notMatchPath&&e.notMatchPath.length&&(t=!new RegExp(e.notMatchPath).test(window.location.pathname)),t})),this.facebookEnabled=!1,this.config.facebookPageId&&this.config.facebookPageId.length&&this.config.facebookCheckboxEnabled&&(this.facebookEnabled=!0,this.facebookUserRef=this.subscriptionManager.storageManager.getFacebookUserRef(),this.facebookUserRef||(this.facebookUserRef="".concat(this.config.channelId,"-"),this.facebookUserRef+=Math.random().toString(36).slice(2))),__webpack_require__(584),window.addEventListener("beforeunload",(function(){n.autoHideBackdrop=!0,n.hide()}))}return _createClass(Confirm,[{key:"getArrowNode",value:function(e){var t=function(){var t=new ua_parser_js__WEBPACK_IMPORTED_MODULE_29___default.a,n=t.getBrowser().name;"Android"===t.getOS().name||t.getDevice().type;if("grant"===e){if("Chrome"===n||"Chromium"===n)return{x:347,y:92,padding:20};if("Firefox"===n)return{x:311,y:148,padding:20}}else if("denied"===e){if("Chrome"===n||"Chromium"===n)return{x:131,y:0,padding:0};if("Firefox"===n)return{x:60,y:0,padding:0}}return null}();if(!t)return null;var n=document.querySelector(".cleverpush-backdrop-text h2");if(n){var i={x:(window.innerWidth-n.getBoundingClientRect().width)/2,y:(window.innerHeight-n.getBoundingClientRect().height)/2},r=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)),o=Math.max(.1*r,15),s=t.x,c=t.y+o+t.padding,a=i.x-20,u=Math.max(i.y+40,c+40),l=a-s,_=u-c,f="M ".concat(a," ").concat(u," q ").concat(-1*l," ").concat(_,", ").concat(-1*l," ").concat(-1*_),d="M ".concat(s-o," ").concat(c+o," q ").concat(o," ").concat(-3*o,", ").concat(2*o," 0"),p='<div class="cleverpush-backdrop-arrow"><svg width="'.concat(window.innerWidth,'px" height="').concat(window.innerHeight,'px" viewBox="0 0 ').concat(window.innerWidth," ").concat(window.innerHeight,'" version="1.1" xmlns="http://www.w3.org/2000/svg"><g stroke-width="5" stroke-linecap="round" fill="none" fill-rule="evenodd"><path d="').concat(f,'" id="tail" stroke="#FFFFFF"></path><path d="').concat(d,'" id="head" stroke="#FFFFFF"></path></g></svg></div></div>');return Object(_utils_dom__WEBPACK_IMPORTED_MODULE_31__.a)(p)}}},{key:"removeConfirmBox",value:function(){Object(_utils_debug__WEBPACK_IMPORTED_MODULE_30__.c)("removeConfirmBox"),this.visible=!1;var e=document.getElementsByClassName("cleverpush-confirm");if(e.length){var t=e[e.length-1];(!this.withTopics||t.className.indexOf("cleverpush-topic-box")<0)&&t.className.indexOf("cleverpush-attributes-box")<0&&t.parentNode.removeChild(t)}this.confirmBox=null}},{key:"removeBrandingBox",value:function(){Object(_utils_debug__WEBPACK_IMPORTED_MODULE_30__.c)("removeBrandingBox"),this.visible=!1;var e=document.getElementsByClassName("cleverpush-branding-box");if(e.length){var t=e[e.length-1];t.parentNode.removeChild(t)}this.confirmBox=null}},{key:"hide",value:function(){Object(_utils_debug__WEBPACK_IMPORTED_MODULE_30__.c)("hide"),this.autoHideBackdrop&&this.hideBackdrop(),this.removeConfirmBox(),this.removeBrandingBox()}},{key:"onCloseClick",value:function(e){Object(_utils_debug__WEBPACK_IMPORTED_MODULE_30__.c)("closeConfirmBox"),e.preventDefault(),this.hide(),this.hideBackdrop(),this.subscriptionManager.storageManager.setClosed()}},{key:"onAllowClick",value:function(e){var t=this;Object(_utils_debug__WEBPACK_IMPORTED_MODULE_30__.c)("allowPush"),e.preventDefault();var n=this.getSelectedTopics(),i=this.hasTopicCheckboxes(!0);if(this.config.confirmAlertRequireChannelTopics&&!n.length&&i&&this.withTopics)alert(this.config.confirmAlertRequireChannelTopicsTitle||"Bitte wähle mindestens eine Kategorie aus.");else if("function"!=typeof this.allowCallback||(this.allowCallback(!0,n),this.allowCallback=void 0,this.withTopics)){this.confirmBox||(this.confirmBox=document.querySelector(".cleverpush-confirm-".concat(this.id)));for(var r,o=this.confirmBox.querySelectorAll('input[name="topics[]"]'),s=0;s<o.length;s+=1)if(o[s].checked&&o[s].dataset&&"true"===o[s].dataset.childTopicsRequired){var c=this.confirmBox.querySelectorAll('.topic-child[data-parent-topic="'+o[s].value+'"] input');if(c.length){for(var a=0,u=0;u<c.length;u+=1)c[u].checked&&(a+=1);if(0===a)return void alert("Bitte wähle mindestens eine Kategorie in "+(o[s].parentNode.innerText||"").trim()+" aus.")}}if(this.subscriptionManager.setTopics(n),this.withTopics&&this.config.confirmAlertSelectTopicsLater&&i)return this.subscriptionManager.sync(),this.withTopics=!1,this.hide(),this.subscribeCallback&&this.subscribeCallback(!1),void(this.subscriptionManager.registerForPushLater&&this.subscriptionManager.registerForPush());if(this.facebookEnabled&&this.config.facebookButtonOptIn)return window.open("https://m.me/".concat(this.config.facebookPageId),"_blank"),this.hide(),this.hideBackdrop(),void("function"==typeof this.subscriptionManager.storageManager.setFacebookUserRef&&this.subscriptionManager.storageManager.setFacebookUserRef(this.facebookUserRef));if(this.facebookEnabled&&!this.facebookConfirmed&&!this.facebookCheckboxChecked&&"facebook"===CleverPush.browserType)if(r="undefined"!=typeof FB?this.confirmBox.querySelector(".fb-messenger-checkbox-wrap"):this.confirmBox.querySelector("#cleverpush-facebook-checkbox")){var l=document.createElement("style");return l.type="text/css",document.head.appendChild(l),l.sheet.insertRule("\n          @keyframes cleverpushFlashAnimation { \n            0% { opacity: 1; } \n            50% { opacity: .1; } \n            100% { opacity: 1; }\n          }\n        ",l.length),r.style.paddingLeft="10px",r.style.border="2px solid red",r.style.borderRadius="3px",void(r.style.animation="cleverpushFlashAnimation linear 1s forwards")}if(this.config.showUnblockTutorial)return this.hide(),this.showBackdrop(void 0,"denied",Object(_utils_translate__WEBPACK_IMPORTED_MODULE_32__.a)("popup.info").formatCleverPush("<strong>"+(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_32__.a)("confirm.allowBrowser")||Object(_utils_translate__WEBPACK_IMPORTED_MODULE_32__.a)("confirm.allow"))+"</strong>")),void sessionStorage.setItem("cleverpush-subscription-status","denied");this.config.ownDomain&&("https:"===window.top.location.protocol||"localhost"===window.top.location.hostname)&&this.config.showConfirmAlert&&this.config.confirmAlertNativeTheme&&"cleverpush-confirm-default"!==this.config.confirmAlertNativeTheme&&"cleverpush-confirm-backdrop-text"!==this.config.confirmAlertNativeTheme?(this.removeConfirmBox(),this.appendConfirmBox("".concat(this.config.confirmAlertNativeTheme," ").concat(this.config.confirmAlertNativeTheme,"-native"))):this.hide(),localStorage.setItem("cleverpush-subscription-status","allowed"),this.subscriptionManager.subscribeForce(!1).then((function(e){t.hideBackdrop(),t.subscribeCallback&&t.subscribeCallback(!1,e)})).catch((function(e){t.hideBackdrop(),t.subscribeCallback&&t.subscribeCallback(e)})),this.confirmFacebook()}else this.hide()}},{key:"confirmFacebook",value:function(){this.facebookEnabled&&!this.facebookConfirmed&&"undefined"!=typeof FB&&(this.facebookConfirmed=!0,FB.AppEvents.logEvent("MessengerCheckboxUserConfirmation",null,{app_id:this.config.facebookAppId,page_id:this.config.facebookPageId,ref:this.config.channelId,user_ref:this.facebookUserRef}),this.facebookCheckboxChecked&&"function"==typeof this.subscriptionManager.setFacebookUserRef&&this.subscriptionManager.setFacebookUserRef(this.facebookUserRef))}},{key:"onDenyClick",value:function(e){Object(_utils_debug__WEBPACK_IMPORTED_MODULE_30__.c)("denyPush"),e.preventDefault(),this.subscriptionManager.storageManager.setDenied(),this.autoHideBackdrop=!0,this.hide(),!this.config.ownDomain||"https:"!==window.top.location.protocol&&"localhost"!==window.top.location.hostname||this.showDenyAlert(),"function"==typeof this.allowCallback&&(this.allowCallback(!1,[]),this.allowCallback=void 0)}},{key:"hasTopicCheckboxes",value:function(e){if(Object(_utils_debug__WEBPACK_IMPORTED_MODULE_30__.c)("hasTopicCheckboxes"),this.config.confirmAlertSelectTopicsLater&&!this.withTopics&&void 0===e)return!0;var t=document.querySelector(".cleverpush-confirm");return!!t&&t.querySelectorAll('input[name="topics[]"]').length>0}},{key:"getSelectedTopics",value:function(){Object(_utils_debug__WEBPACK_IMPORTED_MODULE_30__.c)("getSelectedTopics");var e=(this.channelTopics||[]).filter(_utils_topics__WEBPACK_IMPORTED_MODULE_34__.a).map((function(e){return e._id})),t=document.querySelector(".cleverpush-confirm");if(t){var n=t.querySelectorAll('input[name="topics[]"]');if(n&&n.length){e=[];for(var i=0;i<n.length;i+=1)"checkbox"!==n[i].type&&"radio"!==n[i].type||!n[i].checked||e.push(n[i].value)}}return e}},{key:"showDenyAlert",value:function(){Object(_utils_debug__WEBPACK_IMPORTED_MODULE_30__.c)("showDenyAlert")}},{key:"onClickToCloseDenyAlert",value:function(e){this.denyAlert&&e.target!==this.denyAlert&&e.target.parentNode!==this.denyAlert&&(document.removeEventListener("click",this.onClickToCloseDenyAlertListener),document.removeEventListener("touchstart",this.onClickToCloseDenyAlertListener),this.onDenyAlertClick())}},{key:"onDenyAlertClick",value:function(e){void 0!==e&&e.preventDefault(),Object(_utils_debug__WEBPACK_IMPORTED_MODULE_30__.c)("onDenyAlertClick");var t=document.getElementsByClassName("cleverpush-deny-alert")[0];t.parentNode.removeChild(t),this.denyAlert=null}},{key:"showBrandingBox",value:function(){Object(_utils_debug__WEBPACK_IMPORTED_MODULE_30__.c)("showBrandingBox"),document.body.appendChild(Object(_utils_dom__WEBPACK_IMPORTED_MODULE_31__.a)('<div class="cleverpush-branding-box cleverpush-branding-box-'.concat(this.id,'"><div class="cleverpush-branding-box-text">').concat(this.getBrandingLinks(),'</div><button class="cleverpush-branding-box-close">&times;</button></div>'))),this.brandingBox=document.querySelector(".cleverpush-branding-box-".concat(this.id)),this.brandingBoxCloseButton=this.brandingBox.querySelector(".cleverpush-branding-box-close"),this.brandingBoxCloseButton&&this.brandingBoxCloseButton.addEventListener("click",this.removeBrandingBox.bind(this))}},{key:"getBrandingLinks",value:function(){var e=[],t=this.config.confirmAlertThemeLinkColor;return this.config.confirmAlertLinkStyle&&this.config.confirmAlertLinkStyle.color&&(t=this.config.confirmAlertLinkStyle.color),this.config.hideBranding||e.push('<a href="https://cleverpush.com/" target="_blank" style="'.concat(t?"color: "+t+" !important":"",'">Powered by CleverPush</a>')),this.config.privacyPolicyUrl&&e.push('<a href="'.concat(this.config.privacyPolicyUrl,'" target="_blank" style="').concat(t?"color: "+t+" !important":"",'">').concat(this.config.privacyPolicyText||Object(_utils_translate__WEBPACK_IMPORTED_MODULE_32__.a)("privacy"),"</a>")),this.config.faqText&&this.config.faqUrl&&e.push('<a href="'.concat(this.config.faqUrl,'" target="_blank" style="').concat(t?"color: "+t+" !important":"",'">').concat(this.config.faqText||"FAQ","</a>")),e.join(" &nbsp;/&nbsp; ")}},{key:"showBackdrop",value:function(e,t,n){var i=this;Object(_utils_debug__WEBPACK_IMPORTED_MODULE_30__.c)("showBackdrop");var r=void 0!==t&&"denied"===t?"denied":"grant";if("denied"===r||this.config.hideNativeConfirmAlert||this.config.showConfirmAlert||!this.config.confirmAlertNativeTheme||"cleverpush-confirm-default"===this.config.confirmAlertNativeTheme||"cleverpush-confirm-backdrop-text"===this.config.confirmAlertNativeTheme||!this.config.ownDomain||"https:"!==window.top.location.protocol&&"localhost"!==window.top.location.hostname||this.appendConfirmBox("".concat(this.config.confirmAlertNativeTheme," ").concat(this.config.confirmAlertNativeTheme,"-native")),this.config.confirmAlertBackdrop||this.config.showConfirmAlert||this.config.confirmAlertNativeTheme&&"cleverpush-confirm-default"!==this.config.confirmAlertNativeTheme||this.config.hideBranding||this.showBrandingBox(),"denied"===r||void 0===this.config.confirmAlertBackdrop||this.config.confirmAlertBackdrop){var o=this.config.alertLocalization||{},s=(navigator.language||navigator.userLanguage||"").substr(0,2);this.config.alertLocalizationTranslations&&s&&this.config.alertLocalizationTranslations[s]&&(o=Object.assign({},o,this.config.alertLocalizationTranslations[s])),"windows-1252"!==document.characterSet&&"iso-8859-1"!==document.characterSet||Object.keys(o).forEach((function(e){if(o[e])try{o[e]=decodeURIComponent(escape(o[e]))}catch(e){_utils_debug__WEBPACK_IMPORTED_MODULE_30__.b.debug(e)}}));var c="";if(this.config.ownDomain&&("https:"===window.top.location.protocol||"localhost"===window.top.location.hostname)){if("denied"===r||"cleverpush-confirm-backdrop-text"===this.config.confirmAlertNativeTheme)if("grant"===r)c+='<div class="cleverpush-backdrop-text" style="'.concat(this.config.confirmAlertThemeTextColor?"color: "+this.config.confirmAlertThemeTextColor:"",'">\n').concat(this.config.channelIcon&&!this.config.confirmAlertHideChannelIcon?'<p class="cleverpush-backdrop-icon"><img src="'.concat(this.config.channelIcon,'" alt="').concat(this.config.channelName,'"></p>'):"","\n<h2>").concat(o.title||Object(_utils_translate__WEBPACK_IMPORTED_MODULE_32__.a)("popup.info").formatCleverPush("<strong>".concat(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_32__.a)("confirm.allowBrowser")||Object(_utils_translate__WEBPACK_IMPORTED_MODULE_32__.a)("confirm.allow"),"</strong>")),"</h2>\n<p>").concat(o.info||Object(_utils_translate__WEBPACK_IMPORTED_MODULE_32__.a)("popup.text").formatCleverPush("<strong>".concat(this.config.channelName,"</strong>")),"</p>\n</div>");else{var a=new ua_parser_js__WEBPACK_IMPORTED_MODULE_29___default.a,u=a.getBrowser().name,l=a.getOS().name;u=u.toLowerCase().replace(/\s/g,"").replace("chromium","chrome"),l=l.toLowerCase().replace(/\s/g,"").replace("macos","mac");var _="";"chrome"!==u&&"firefox"!==u&&"safari"!==u||"android"!==l&&"windows"!==l&&"mac"!==l||(_="chrome"===u&&"android"===l?'<div><video src="https://static.cleverpush.com/app/images/unblock-tutorial/'.concat(u,"-").concat(l,'.mp4" width="100%" autoplay loop muted playsinline /></div>'):'<div><img src="https://static.cleverpush.com/app/images/unblock-tutorial/'.concat(u,"-").concat(l,'.gif" /></div>')),c+='<div class="cleverpush-backdrop-text"><h2>'.concat(_?Object(_utils_translate__WEBPACK_IMPORTED_MODULE_32__.a)("unblock.title"):n,"</h2>").concat(_,"</div>")}(this.config.hideNativeConfirmAlert||this.config.showConfirmAlert&&(!this.config.confirmAlertNativeTheme||"cleverpush-confirm-default"===this.config.confirmAlertNativeTheme))&&(this.backdropHasBranding=!0,c+='<div class="cleverpush-backdrop-branding">'.concat(this.getBrandingLinks(),"</div>"))}var f=document.getElementsByClassName("cleverpush-backdrop");if(f&&f.length)for(var d=0;d<f.length;d+=1){var p=f[d];p&&p.parentNode&&p.parentNode.removeChild(p)}var h=document.createElement("div");if(h.className="cleverpush-backdrop",h.style.display="none",h.innerHTML=c,this.config.confirmAlertBackdropOpacity&&(h.style.backgroundColor="rgba(0, 0, 0, ".concat(this.config.confirmAlertBackdropOpacity,")")),this.config.confirmAlertBackdropBlur&&(h.className+=" cleverpush-backdrop-blur"),c&&c.length&&!this.config.confirmAlertHideArrow){var g=this.getArrowNode(r);g&&h.appendChild(g)}h.addEventListener("click",(function(e){e.preventDefault(),i.hideBackdrop(r)})),document.body&&(document.body.appendChild(h),document.body.classList?(document.body.classList.add("has-cleverpush-backdrop"),this.config.confirmAlertBackdropBlur&&document.body.classList.add("has-cleverpush-backdrop-blur")):(document.body.className+=" has-cleverpush-backdrop",this.config.confirmAlertBackdropBlur&&(document.body.className+=" has-cleverpush-backdrop-blur"))),Object(_utils_dom__WEBPACK_IMPORTED_MODULE_31__.d)(h,200,void 0!==e?e:function(){})}else"function"==typeof e&&e()}},{key:"hideBackdrop",value:function(e){if(Object(_utils_debug__WEBPACK_IMPORTED_MODULE_30__.c)("hideBackdrop"),this.removeBrandingBox(),document.body&&(document.body.classList?(this.config.confirmAlertBackdropBlur&&document.body.classList.remove("has-cleverpush-backdrop-blur"),document.body.classList.remove("has-cleverpush-backdrop")):(this.config.confirmAlertBackdropBlur&&(document.body.className=document.body.className.replace("has-cleverpush-backdrop-blur","")),document.body.className=document.body.className.replace("has-cleverpush-backdrop",""))),!this.config.hideNativeConfirmAlert&&this.config.confirmAlertNativeTheme&&"cleverpush-confirm-default"!==this.config.confirmAlertNativeTheme&&"cleverpush-backdrop-text"!==this.config.confirmAlertNativeTheme&&this.removeConfirmBox(),void 0!==e&&"denied"===e||void 0===this.config.confirmAlertBackdrop||this.config.confirmAlertBackdrop){for(var t=document.getElementsByClassName("cleverpush-backdrop"),n=0;n<t.length;n+=1){!function(e){Object(_utils_dom__WEBPACK_IMPORTED_MODULE_31__.e)(e,200,(function(){e&&e.parentNode&&e.parentNode.removeChild(e)}))}(t[n])}void 0!==e&&"granted"===e&&this.confirmFacebook()}}},{key:"camelCaseToDash",value:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}},{key:"appendConfirmBox",value:function appendConfirmBox(confirmAlertThemeParam,withTopicsParam,configParam,allowCallback){var _this5=this;if(Object(_utils_debug__WEBPACK_IMPORTED_MODULE_30__.c)("appendConfirmBox"),!this.confirmBox){this.withTopics="boolean"==typeof withTopicsParam&&withTopicsParam,"function"==typeof allowCallback&&(this.allowCallback=allowCallback);var confirmConfig="object"===_typeof(configParam)?configParam:{},configAlertLocalization=this.config.alertLocalization||{},language=(navigator.language||navigator.userLanguage||"").substr(0,2);this.config.alertLocalizationTranslations&&language&&this.config.alertLocalizationTranslations[language]&&(configAlertLocalization=Object.assign({},configAlertLocalization,this.config.alertLocalizationTranslations[language])),configAlertLocalization=Object.assign({},configAlertLocalization,confirmConfig.customLocalization),confirmConfig.topicsRequired&&(this.config.confirmAlertRequireChannelTopics=!0);var localization={title:configAlertLocalization.title||Object(_utils_translate__WEBPACK_IMPORTED_MODULE_32__.a)("confirm.title").formatCleverPush(this.config.channelName),info:configAlertLocalization.info||Object(_utils_translate__WEBPACK_IMPORTED_MODULE_32__.a)("confirm.info"),deny:configAlertLocalization.deny||Object(_utils_translate__WEBPACK_IMPORTED_MODULE_32__.a)("confirm.deny"),allow:configAlertLocalization.allow||Object(_utils_translate__WEBPACK_IMPORTED_MODULE_32__.a)("confirm.allow"),confirmInfo:configAlertLocalization.confirmInfo||Object(_utils_translate__WEBPACK_IMPORTED_MODULE_32__.a)("popup.info").formatCleverPush(Object(_utils_translate__WEBPACK_IMPORTED_MODULE_32__.a)("confirm.allowBrowser"))};"windows-1252"!==document.characterSet&&"iso-8859-1"!==document.characterSet||Object.keys(localization).forEach((function(e){if(configAlertLocalization[e])try{localization[e]=decodeURIComponent(escape(localization[e]))}catch(e){_utils_debug__WEBPACK_IMPORTED_MODULE_30__.b.debug(e)}}));var confirmClass="cleverpush-confirm-default",confirmStyle="",confirmAlertTheme=void 0!==confirmAlertThemeParam?confirmAlertThemeParam:this.config.confirmAlertTheme;confirmAlertTheme&&(confirmClass=confirmAlertTheme);var parser=new ua_parser_js__WEBPACK_IMPORTED_MODULE_29___default.a;this.config.confirmAlertThemeVariant&&"cleverpush-confirm-auto"!==this.config.confirmAlertThemeVariant?confirmClass+=" ".concat(this.config.confirmAlertThemeVariant):"Mac OS"===parser.getOS().name?confirmClass+=" cleverpush-confirm-mac":"Windows"===parser.getOS().name?confirmClass+=" cleverpush-confirm-chrome":confirmClass+=" cleverpush-confirm-material","Firefox"===parser.getBrowser().name&&(confirmClass+=" cleverpush-confirm-firefox"),"Opera"===parser.getBrowser().name&&(confirmClass+=" cleverpush-confirm-opera"),"Safari"===parser.getBrowser().name&&(confirmClass+=" cleverpush-confirm-safari"),"Chrome"===parser.getBrowser().name&&(confirmClass+=" cleverpush-confirm-chrome"),"Edge"===parser.getBrowser().name&&(confirmClass+=" cleverpush-confirm-edge"),this.config.confirmAlertStyle&&this.config.confirmAlertStyle.color&&(this.config.confirmAlertThemeTextColor=this.config.confirmAlertStyle.color),this.config.confirmAlertThemeBackgroundColor?(confirmStyle+="background-color: "+this.config.confirmAlertThemeBackgroundColor+";",this.config.confirmAlertThemeTextColor&&(confirmStyle+="color: "+this.config.confirmAlertThemeTextColor+";")):this.config.confirmAlertThemeBackground&&(confirmClass+=" ".concat(this.config.confirmAlertThemeBackground)),this.config.confirmAlertHideChannelIcon&&(confirmClass+=" cleverpush-confirm-hide-channel-icon"),this.config.confirmAlertHideArrow&&(confirmClass+=" cleverpush-confirm-hide-arrow"),"PREVIEW"===this.config.env&&(confirmClass+=" cleverpush-confirm-preview"),confirmClass+=" cleverpush-confirm-".concat(this.id);var topicSelection="",parentContainer;if(this.config.topicsTemplateFunction)topicSelection='<div class="cleverpush-topics cleverpush-confirm-topics"></div>';else if(this.channelTopics&&this.channelTopics.length&&!this.config.confirmAlertHideChannelTopics){var _topics=this.channelTopics.filter((function(e){return!e.parentTopic}));confirmConfig&&confirmConfig.parentTopic&&(_topics=this.channelTopics.filter((function(e){return e.parentTopic===confirmConfig.parentTopic}))),topicSelection+='<div class="cleverpush-topics cleverpush-confirm-topics">',_topics.sort((function(e,t){return e.sort-t.sort})).forEach((function(e){var t=e.name;if("windows-1252"===document.characterSet||"iso-8859-1"===document.characterSet)try{t=decodeURIComponent(escape(e.name))}catch(e){_utils_debug__WEBPACK_IMPORTED_MODULE_30__.b.debug(e)}var n=_this5.channelTopics.filter((function(t){return t.parentTopic===e._id}));topicSelection+='<div><label><input type="'.concat(_this5.config.confirmAlertRadioButtonTopics||confirmConfig.topicsRadioButtons?"radio":"checkbox",'" name="topics[]" value="').concat(e._id,'" ').concat(Object(_utils_topics__WEBPACK_IMPORTED_MODULE_34__.a)(e)?"checked":""," ").concat(e.childTopicsRequired?' data-child-topics-required="true"':"","> ").concat(t,"</label></div>"),n.length&&n.forEach((function(t){var n=t.name;if("windows-1252"===document.characterSet||"iso-8859-1"===document.characterSet)try{n=decodeURIComponent(escape(t.name))}catch(e){_utils_debug__WEBPACK_IMPORTED_MODULE_30__.b.debug(e)}var i=_this5.config.confirmAlertRadioButtonTopics||e.childTopicsRadioButtons?"radio":"checkbox";topicSelection+='<div class="topic-child" data-parent-topic="'.concat(e._id,'" style="margin-left: 20px; font-size: 90%; ').concat(Object(_utils_topics__WEBPACK_IMPORTED_MODULE_34__.a)(e)?"":"display: none;",'"><label><input type="').concat(i,'" name="topics[]" value="').concat(t._id,'" ').concat(Object(_utils_topics__WEBPACK_IMPORTED_MODULE_34__.a)(t)?"checked":"","> ").concat(n,"</label></div>")}))})),topicSelection+="</div>"}this.config.appendConfirmBoxTo&&(parentContainer=document.querySelector(this.config.appendConfirmBoxTo)),parentContainer?confirmClass+="cleverpush-confirm-static":(this.config.appendConfirmBoxTo&&_utils_debug__WEBPACK_IMPORTED_MODULE_30__.b.error("appendConfirmBoxTo: container not found. Falling back to default."),parentContainer=document.body);var showLinks=!this.backdropHasBranding;if(!this.withTopics&&("https:"===window.top.location.protocol||"localhost"===window.top.location.hostname)){var isNativeBox=confirmAlertThemeParam&&"cleverpush-confirm-default cleverpush-confirm-default-native"!==confirmAlertThemeParam&&"cleverpush-confirm-backdrop-text cleverpush-confirm-backdrop-text-native"!==confirmAlertThemeParam;if(_utils_debug__WEBPACK_IMPORTED_MODULE_30__.b.debug("isNativeBox",isNativeBox),this.config.showConfirmAlert&&this.config.isSafari_12_1)isNativeBox&&(topicSelection="");else if(this.config.showConfirmAlert){var canHideTopics=this.config.confirmAlertNativeTheme&&"cleverpush-confirm-default"!==this.config.confirmAlertNativeTheme;isNativeBox?(showLinks=!1,canHideTopics&&this.config.showConfirmAlertMobile&&(topicSelection="")):canHideTopics&&!this.config.showConfirmAlertMobile&&(topicSelection="")}else isNativeBox&&this.config.confirmAlertSelectTopicsLater&&this.config.ownDomain&&(topicSelection="")}if(this.facebookEnabled&&!this.config.facebookButtonOptIn&&(this.config.facebookDoubleOptIn&&!this.facebookDoubleOptInConfirmed&&(topicSelection+='<div class="cleverpush-topics cleverpush-confirm-topics"><div><label><input type="'.concat(this.config.confirmAlertRadioButtonTopics?"radio":"checkbox",'" id="cleverpush-facebook-checkbox"> Ich akzeptiere die <a href="').concat(this.config.privacyPolicyUrl,'">Datenschutzerklärung</a></label></div></div>')),topicSelection+='<div class="fb-messenger-checkbox-wrap"><div class="fb-messenger-checkbox" origin="'.concat(location.origin,'" page_id="').concat(this.config.facebookPageId,'" messenger_app_id="').concat(this.config.facebookAppId,'" user_ref="').concat(this.facebookUserRef,'" prechecked="true" allow_login="true" size="large" style="margin-top: 10px; margin-left: -14px;"></div></div>')),this.withTopics&&!confirmConfig.customLocalization){if(confirmClass+=" cleverpush-topic-box",localization.title=this.config.confirmAlertSelectTopicsLaterTitle||Object(_utils_translate__WEBPACK_IMPORTED_MODULE_32__.a)("confirm.selectTopics")||localization.title,this.config.confirmAlertSelectTopicsLaterTitle&&("windows-1252"===document.characterSet||"iso-8859-1"===document.characterSet))try{localization.title=decodeURIComponent(escape(localization.title))}catch(e){_utils_debug__WEBPACK_IMPORTED_MODULE_30__.b.debug(e)}localization.info="",localization.allow=Object(_utils_translate__WEBPACK_IMPORTED_MODULE_32__.a)("panel.save")}var confirm=Object(_utils_dom__WEBPACK_IMPORTED_MODULE_31__.a)('<div class="cleverpush-confirm '.concat(confirmClass,'" style="').concat(confirmStyle,'">\n        <div class="cleverpush-confirm-caret cleverpush-confirm-caret-top" style="display: none; border-bottom-color: ').concat(this.config.confirmAlertThemeBackgroundColor,'"></div>\n        <div class="cleverpush-confirm-caret cleverpush-confirm-caret-bottom" style="display: none; border-top-color: ').concat(this.config.confirmAlertThemeBackgroundColor,'"></div>\n        <button type="button" class="cleverpush-confirm-hide">&times;</button>\n        <div class="cleverpush-confirm-wrap">\n            ').concat("cleverpush-confirm-topbar cleverpush-confirm-topbar-native"===confirmAlertThemeParam?'<div class="cleverpush-confirm-topbar-arrow"></div>':"",'\n            <div class="').concat("cleverpush-confirm-icon"+(this.config.confirmAlertRoundChannelIcon?" cleverpush-confirm-icon-round":""),'"><img src="').concat(this.config.channelIcon,'"></div>\n          <div class="cleverpush-confirm-text" style="').concat(this.config.confirmAlertThemeTextColor?"color: "+this.config.confirmAlertThemeTextColor+";":"",'"><span class="cleverpush-confirm-title" style="').concat(this.config.confirmAlertThemeTitleColor?"color: "+this.config.confirmAlertThemeTitleColor+";":"",'">').concat(localization.title,'</span>\n            <p class="cleverpush-confirm-info">').concat(localization.info,"</p>\n            ").concat(topicSelection,'\n            </div>\n          <div class="cleverpush-clearfix cleverpush-clearfix-bottom">\n            <div class="cleverpush-confirm-buttons">\n            <button class="cleverpush-confirm-btn cleverpush-confirm-btn-deny">').concat(localization.deny,'</button>\n            <button class="cleverpush-confirm-btn cleverpush-confirm-btn-allow" style="').concat(this.config.confirmAlertThemeButtonTextColor?"color: "+this.config.confirmAlertThemeButtonTextColor+";":""," ").concat(this.config.confirmAlertThemeButtonBackgroundColor?"border-color: transparent !important; background: none; background-color: "+this.config.confirmAlertThemeButtonBackgroundColor+";":"",'">').concat(localization.allow,"</button></div>\n            ").concat(showLinks?'<div class="cleverpush-confirm-branding"><span>'.concat(this.getBrandingLinks(),"</span></div>"):"",'\n            <div class="cleverpush-clearfix"></div>\n          </div>\n          ').concat(localization.confirmInfo?'<div class="cleverpush-confirm-bottom-info" style="display: none;">\n            <div class="'.concat("cleverpush-confirm-icon"+(this.config.confirmAlertRoundChannelIcon?" cleverpush-confirm-icon-round":""),'"><img src="').concat(this.config.channelIcon,'"></div>\n            <div class="cleverpush-confirm-bottom-info-text">').concat(localization.confirmInfo,'</div>\n            <div class="cleverpush-clearfix"></div>\n          </div>'):"","\n        </div>\n      </div>"));if(parentContainer.appendChild(confirm),this.confirmBox=document.querySelector(".cleverpush-confirm-".concat(this.id)),this.confirmBox&&"object"===_typeof(this.config.confirmAlertStyle))for(var property in this.config.confirmAlertStyle)this.config.confirmAlertStyle.hasOwnProperty(property)&&(this.confirmBox.style[property]=this.config.confirmAlertStyle[property]);if(this.confirmBoxTitle=document.querySelector(".cleverpush-confirm-".concat(this.id," .cleverpush-confirm-title")),this.confirmBoxTitle&&"object"===_typeof(this.config.confirmAlertTitleStyle))for(var _property in this.config.confirmAlertTitleStyle)this.config.confirmAlertTitleStyle.hasOwnProperty(_property)&&(this.confirmBoxTitle.style[_property]=this.config.confirmAlertTitleStyle[_property]);if(this.allowButton=this.confirmBox.querySelector(".cleverpush-confirm-btn-allow"),this.allowButton){if(this.allowButton.addEventListener("click",this.onAllowClick.bind(this),!0),"object"===_typeof(this.config.confirmAlertButtonStyle))for(var _property2 in this.config.confirmAlertButtonStyle.backgroundColor&&!this.config.confirmAlertButtonStyle.borderColor&&(this.config.confirmAlertButtonStyle.borderColor="transparent"),this.config.confirmAlertButtonStyle)this.config.confirmAlertButtonStyle.hasOwnProperty(_property2)&&this.allowButton.style.setProperty(this.camelCaseToDash(_property2),this.config.confirmAlertButtonStyle[_property2],"important");if("object"===_typeof(this.config.confirmAlertAllowButtonStyle))for(var _property3 in this.config.confirmAlertAllowButtonStyle)this.config.confirmAlertAllowButtonStyle.backgroundColor&&!this.config.confirmAlertAllowButtonStyle.borderColor&&(this.config.confirmAlertAllowButtonStyle.borderColor="transparent"),this.config.confirmAlertAllowButtonStyle.hasOwnProperty(_property3)&&this.allowButton.style.setProperty(this.camelCaseToDash(_property3),this.config.confirmAlertAllowButtonStyle[_property3],"important")}if(this.denyButton=this.confirmBox.querySelector(".cleverpush-confirm-btn-deny"),this.denyButton&&(this.denyButton.addEventListener("click",this.onDenyClick.bind(this)),"object"===_typeof(this.config.confirmAlertButtonStyle)))for(var _property4 in this.config.confirmAlertButtonStyle)this.config.confirmAlertButtonStyle.hasOwnProperty(_property4)&&this.denyButton.style.setProperty(this.camelCaseToDash(_property4),this.config.confirmAlertButtonStyle[_property4],"important");this.closeButton=this.confirmBox.querySelector(".cleverpush-confirm-hide"),this.closeButton&&(this.closeButton.addEventListener("click",this.onCloseClick.bind(this)),this.confirmBox&&"object"===_typeof(this.config.confirmAlertStyle)&&this.config.confirmAlertStyle.color&&(this.closeButton.style.color=this.config.confirmAlertStyle.color));for(var topics=this.confirmBox.querySelectorAll('input[name="topics[]"]'),topicIndex=0;topicIndex<topics.length;topicIndex+=1)topics[topicIndex].addEventListener("change",(function(e){_this5.confirmBox||(_this5.confirmBox=document.querySelector(".cleverpush-confirm-".concat(_this5.id)));for(var t=_this5.confirmBox.querySelectorAll('.topic-child[data-parent-topic="'+e.target.value+'"]'),n=0;n<t.length;n+=1)t[n].style.display=e.target.checked?"block":"none"}));if(this.config.topicsTemplateFunction&&topicSelection){var topicsDiv=parentContainer.querySelector(".cleverpush-confirm .cleverpush-confirm-topics");if(topicsDiv)try{var templateFunc=eval("("+this.config.topicsTemplateFunction+")");"function"==typeof templateFunc?(_utils_debug__WEBPACK_IMPORTED_MODULE_30__.b.debug("calling templateFunc"),templateFunc(topicsDiv,this.config,[],"confirm")):_utils_debug__WEBPACK_IMPORTED_MODULE_30__.b.warn("typeof templateFunc is not function")}catch(e){_utils_debug__WEBPACK_IMPORTED_MODULE_30__.b.warn(e)}else _utils_debug__WEBPACK_IMPORTED_MODULE_30__.b.warn(".cleverpush-topics div not found")}if(this.facebookEnabled){var loadFbSdk=function(){_subscription_facebookManager__WEBPACK_IMPORTED_MODULE_33__.a.initFacebook((function(){"undefined"!=typeof FB&&(FB.Event.subscribe("messenger_checkbox",(function(e){_utils_debug__WEBPACK_IMPORTED_MODULE_30__.b.info('FB - Event "messenger_checkbox"',e),"rendered"===e.event?_utils_debug__WEBPACK_IMPORTED_MODULE_30__.b.info('FB - Event "messenger_checkbox" - successfully rendered'):"checkbox"===e.event?(_utils_debug__WEBPACK_IMPORTED_MODULE_30__.b.info("FB - Checkbox state:",e.state),_this5.facebookCheckboxChecked="checked"===e.state):"not_you"===e.event?_utils_debug__WEBPACK_IMPORTED_MODULE_30__.b.info("FB - User clicked 'not you'"):"hidden"===e.event&&_utils_debug__WEBPACK_IMPORTED_MODULE_30__.b.warn("FB - Plugin was hidden. This usually means a problem in FB or integration or your browser settings. Did you whitelist your domain? When using a FB dev app is your FB account registered developer/tester/admin? Have generated a unique `user_ref` for this render? Do you have disabled third-party tracking in your browser settings?")})),FB.XFBML.parse())}))};this.config.facebookDoubleOptIn?(this.facebookDoubleOptInConfirmed=!0,this.facebookConfirmCheckbox=this.confirmBox.querySelector("#cleverpush-facebook-checkbox"),this.facebookConfirmCheckbox&&this.facebookConfirmCheckbox.addEventListener("click",(function(){loadFbSdk()}))):loadFbSdk()}}}},{key:"show",value:function(e){var t=this;if(Object(_utils_debug__WEBPACK_IMPORTED_MODULE_30__.c)("showConfirmBox"),"function"==typeof e&&(this.subscribeCallback=e),!this.visible){this.visible=!0;var n=this.config.confirmMinimumVisits||0,i=localStorage.getItem("cleverpush-visits");(i=i?parseInt(i,10):0)>=n&&setTimeout((function(){t.showBackdrop(),t.appendConfirmBox()}),this.config.confirmTimeout||0),i+=1,localStorage.setItem("cleverpush-visits",i)}}},{key:"setAutoHideBackdrop",value:function(e){this.autoHideBackdrop=e}}]),Confirm}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(135),n(153),n(81),n(211);var i=n(535),r=n(22),o=n(1),s=n(258),c=n(49),a=n(151);function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(t,i,o,s,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.subscriptionManager=i,this.isSubscribed=this.subscriptionManager.subscribed,this.api=o,this.confirm=s,this.triggerEvent=c,this.config.bellLocalization&&this.config.bellLocalization.subscribed?this.messageSubscribed=this.config.bellLocalization.subscribed:this.messageSubscribed=Object(r.a)("bell.subscribed"),this.config.bellLocalization&&this.config.bellLocalization.subscribe?this.messageSubscribe=this.config.bellLocalization.subscribe:this.messageSubscribe=Object(r.a)("bell.subscribe"),this.config.bellLocalization&&this.config.bellLocalization.hide?this.messageHide=this.config.bellLocalization.hide:this.messageHide=Object(r.a)("bell.hide"),this.show=this.show.bind(this),this.reset=this.reset.bind(this),this.onClick=this.onClick.bind(this),n(653)}var t,l,_;return t=e,(l=[{key:"getClassName",value:function(){var e="cleverpush-bell";return this.config.notificationBellPosition&&(e+=" cleverpush-bell-position-"+this.config.notificationBellPosition),e}},{key:"show",value:function(e){if(Object(o.c)("bell.show",e),this.isSubscribed=e,"true"!==localStorage.getItem("cleverpush-bell-hidden")){var t,n=this.getClassName();e?(n+=" cleverpush-bell-disabled",t=this.messageSubscribed,this.config.hideNotificationBellSubscribed&&(n+=" cleverpush-bell-hidden")):t=this.messageSubscribe;var i="";this.config.notificationBellMoreButtons&&(i='<button type="button" class="cleverpush-bell-more-btn cleverpush-bell-more-settings" style="display: none"><svg viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M18.88 12.88a6.83 6.83 0 0 0 0-1.76l1.95-1.49a.45.45 0 0 0 .11-.57l-1.85-3.12c-.11-.2-.36-.27-.56-.2l-2.3.9a6.8 6.8 0 0 0-1.57-.88l-.35-2.38a.45.45 0 0 0-.46-.38h-3.7a.45.45 0 0 0-.45.38l-.35 2.38c-.57.23-1.09.53-1.57.88l-2.3-.9a.46.46 0 0 0-.57.2L3.06 9.06c-.12.2-.06.44.12.57l1.95 1.49a6.95 6.95 0 0 0 0 1.76l-1.95 1.49a.45.45 0 0 0-.12.57l1.85 3.12c.12.2.37.27.57.2l2.3-.9c.48.36 1 .65 1.57.88l.35 2.38c.03.22.22.38.45.38h3.7c.23 0 .43-.16.46-.38l.35-2.38a7.16 7.16 0 0 0 1.56-.88l2.3.9c.22.08.46 0 .57-.2l1.85-3.12a.45.45 0 0 0-.11-.57l-1.95-1.49zM12 15.15A3.2 3.2 0 0 1 8.76 12 3.2 3.2 0 0 1 12 8.85 3.2 3.2 0 0 1 15.24 12 3.2 3.2 0 0 1 12 15.15z" id="park-svg-settings-path-1"></path></defs><use xlink:href="#park-svg-settings-path-1" transform="translate(-3 -3)" stroke="none" stroke-width="1" fill-rule="evenodd"></use></svg><span class="cleverpush-tooltip">'.concat(Object(r.a)("panel.settings"),'</span></button>\n<button type="button" class="cleverpush-bell-more-btn cleverpush-bell-more-subscribe" style="display: none"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve">\n<g><path d="M380.6,989.9c-30.5,0-59.3-14.2-77.8-38.7L52.6,621C20,578,28.5,516.8,71.5,484.3c43-32.6,104.1-24.1,136.7,18.9l164.6,217.3L786.7,56c28.5-45.7,88.7-59.7,134.5-31.2c45.8,28.4,59.7,88.7,31.2,134.4L463.5,944c-17,27.4-46.4,44.5-78.5,45.9C383.6,990,382.1,990,380.6,989.9L380.6,989.9z"/></g>\n</svg><span class="cleverpush-tooltip">').concat(this.messageSubscribe,'</span></button>\n<button type="button" class="cleverpush-bell-more-btn cleverpush-bell-more-hide" style="display: none"><svg viewBox="0 0 8 8" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M8 6.87L6.87 8 4 5.13 1.13 8 0 6.87 2.87 4 0 1.13 1.13 0 4 2.87 6.87 0 8 1.13 5.13 4z"></path></svg><span class="cleverpush-tooltip">').concat(this.messageHide,"</span></button>\n")),this.bell=document.createElement("div"),this.bell.className=n,this.bell.innerHTML="".concat(i,"<div class='cleverpush-bell-message'>").concat(t,"</div>"),document.body.appendChild(this.bell),this.bell&&(this.bell.addEventListener("click",this.onClick.bind(this)),this.config.notificationBellColor&&this.config.notificationBellColor.length&&(this.bell.style.backgroundColor=this.config.notificationBellColor),this.config.notificationBellOffsetBottom&&(this.bell.style.bottom=this.config.notificationBellOffsetBottom+"px"),this.config.notificationBellOffsetLeft&&"right"!==this.config.notificationBellPosition&&(this.bell.style.left=this.config.notificationBellOffsetLeft+"px"),this.config.notificationBellOffsetRight&&"left"!==this.config.notificationBellPosition&&(this.bell.style.right=this.config.notificationBellOffsetRight+"px"),this.config.notificationBellMoreButtons&&this.initMoreButtons())}}},{key:"initMoreButtons",value:function(){var e=this;this.settingsButton=this.bell.querySelector(".cleverpush-bell-more-settings"),this.settingsButton.onclick=function(t){t.stopPropagation(),e.moreButtonsVisible=!1,e.settingsButton.style.display="none",e.hideButton.style.display="none",e.config.notificationBellSettingsLink?window.open(e.config.notificationBellSettingsLink,"_blank"):e.showPanel()},this.subscribeButton=this.bell.querySelector(".cleverpush-bell-more-subscribe"),this.subscribeButton.onclick=function(t){t.stopPropagation(),e.moreButtonsVisible=!1,e.subscribeButton.style.display="none",e.hideButton.style.display="none",e.subscribe()},this.hideButton=this.bell.querySelector(".cleverpush-bell-more-hide"),this.hideButton.onclick=function(t){t.stopPropagation(),e.hideForever()}}},{key:"reset",value:function(e){if(Object(o.c)("bell.reset",e),this.isSubscribed=e,this.moreButtonsVisible=!1,this.bell){var t,n=this.getClassName();e?(n+=" cleverpush-bell-disabled",t=this.messageSubscribed):t=this.messageSubscribe,this.bell.className=n;var i=this.bell.querySelector(".cleverpush-bell-message");i&&(i.innerHTML=t);var r=this.bell.querySelector(".cleverpush-loader");r&&r.parentNode&&r.parentNode.removeChild(r),this.config.notificationBellMoreButtons&&this.initMoreButtons()}}},{key:"hideForever",value:function(){localStorage.setItem("cleverpush-bell-hidden","true"),this.bell.style.display="none"}},{key:"showMessage",value:function(e,t){if(this.bell){var n=this.bell.querySelector(".cleverpush-bell-message");n.className+=" cleverpush-bell-message-open",n.innerHTML=e,setTimeout((function(){n.innerHTML=Object(r.a)("bell.subscribe"),n.className="cleverpush-bell-message"}),1e3*t)}}},{key:"showPanel",value:function(){this.panel||(this.panel=new i.a(this.config,this.subscriptionManager,this.triggerEvent)),this.panel.show()}},{key:"setLoading",value:function(){this.bell.className+=" cleverpush-bell-loading",this.bell.innerHTML+='<div class="cleverpush-loader"><div></div><div></div><div></div><div></div></div>'}},{key:"subscribe",value:function(){var e=this;Object(o.c)("bell.subscribe");var t=this.subscriptionManager.getNotificationPermission(!0),n="default"===t,i=function(t){e.confirm&&n&&e.confirm.hideBackdrop(),!t.message||t instanceof s.a||e.showMessage(t.message,5),!e.config.ownDomain||"https:"!==location.protocol||"denied"!==t.reason&&"default"!==t.reason?t&&o.b.error(t):e.subscriptionManager.confirm&&e.subscriptionManager.confirm.showBackdrop(void 0,"denied",t.message)};if(this.confirm&&(this.config.showConfirmAlert||!this.config.ownDomain||"https:"!==window.top.location.protocol&&"localhost"!==window.top.location.hostname))this.confirm.setAutoHideBackdrop("granted"===t||Object(c.g)()),this.confirm.show(i);else if(!this.subscriptionManager.isSubscribing){o.b.debug("showBackdrop",n),"denied"!==t&&this.setLoading();var u=function(){"PREVIEW"!==e.config.env&&e.subscriptionManager.subscribeForce(e.isSubscribed).then((function(t){e.confirm&&n&&e.confirm.hideBackdrop(),"denied"===t&&e.subscriptionManager.confirm&&e.subscriptionManager.confirm.showBackdrop(void 0,"denied",Object(r.a)("popup.info").formatCleverPush("<strong>"+(Object(r.a)("confirm.allowBrowser")||Object(r.a)("confirm.allow"))+"</strong>"))})).catch((function(r){e.reset(e.isSubscribed),"default"!==t&&"denied"===r.reason&&e.subscriptionManager.confirm&&e.subscriptionManager.confirm.showBackdrop(void 0,"denied",r.message),i(n)}))};Object(a.b)().then((function(){e.confirm&&n?(e.confirm.showBackdrop(),u()):e.confirm&&"granted"===t?e.confirm.appendConfirmBox(e.config.confirmAlertTheme,void 0,void 0,(function(t){t?u():e.reset(e.isSubscribed)})):u()}))}this.api.confirmAlertShown()}},{key:"toggleMoreButtons",value:function(){Object(o.c)("bell.toggleMoreButtons");var e=this.bell.querySelector(".cleverpush-bell-message");this.moreButtonsVisible?(this.settingsButton.style.display="none",this.subscribeButton.style.display="none",this.hideButton.style.display="none",this.moreButtonsVisible=!1,this.isSubscribed&&(this.bell.className+=" cleverpush-bell-disabled"),e&&window.innerWidth<768&&(e.className="cleverpush-bell-message"),window.document.activeElement&&window.document.activeElement.blur()):(this.isSubscribed?(this.settingsButton.style.display="block",this.bell.className="cleverpush-bell"):this.subscribeButton.style.display="block",this.hideButton.style.display="block",this.moreButtonsVisible=!0,e&&window.innerWidth<768&&(e.className+=" cleverpush-bell-message-open"))}},{key:"onClick",value:function(){var e=this;Object(o.c)("bell.onClick",!!this.bell),this.bell&&("function"==typeof this.handleLoadSdk?(this.setLoading(),this.handleLoadSdk().then((function(){window.CleverPush.waitForBell().then((function(){e.bell.parentNode.removeChild(e.bell),window.CleverPush.bell.onClick()}))})).catch((function(e){o.b.error("Bell loading failed",e)}))):e.config.notificationBellMoreButtons?e.toggleMoreButtons():e.isSubscribed?e.showPanel():e.subscribe())}}])&&u(t.prototype,l),_&&u(t,_),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(135),n(266),n(82),n(196),n(201),n(264),n(154),n(468),n(102),n(153),n(112),n(81),n(108),n(465),n(83),n(137),n(90),n(211);var i=n(22),r=n(1),o=n(481);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(t,i,r,o,s){var c=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.element=i,this.element&&(this.config=r,this.subscriptionManager=o,this.isSubscribed=this.subscriptionManager.subscribed,this.api=s,this.showTopics=!0,this.elementConfig=this.element.dataset||{},n(656),this.subscriptionManager.isSubscribed().then((function(e){c.show(e)})),this.channelTopics=(this.config.channelTopics||[]).filter((function(e){var t=!0;return t&&e.matchPath&&e.matchPath.length&&(t=new RegExp(e.matchPath).test(window.location.pathname)),t&&e.notMatchPath&&e.notMatchPath.length&&(t=!new RegExp(e.notMatchPath).test(window.location.pathname)),t})),this.facebookEnabled=!1,this.config.facebookPageId&&this.config.facebookPageId.length&&(this.facebookEnabled=!0,this.facebookUserRef=this.subscriptionManager.storageManager.getFacebookUserRef(),this.facebookUserRef||(this.facebookUserRef="".concat(this.config.channelId,"-"),this.facebookUserRef+=Math.random().toString(36).slice(2))))}var t,c,a;return t=e,(c=[{key:"getSelectedTopics",value:function(){Object(r.c)("getSelectedTopics");var e=(this.channelTopics||[]).map((function(e){return e._id}));if(this.element){var t=this.element.querySelectorAll('input[name="topics[]"]');e=[];for(var n=0;n<t.length;n+=1)"checkbox"!==t[n].type&&"radio"!==t[n].type||!t[n].checked||e.push(t[n].value)}return e}},{key:"getBrandingLinks",value:function(){var e=[];return this.config.hideBranding||e.push('<a href="https://cleverpush.com/" target="_blank" style="'.concat(this.config.confirmAlertThemeLinkColor?"color: "+this.config.confirmAlertThemeLinkColor+" !important":"",'">Powered by CleverPush</a>')),this.config.privacyPolicyUrl&&e.push('<a href="'.concat(this.config.privacyPolicyUrl,'" target="_blank" style="').concat(this.config.confirmAlertThemeLinkColor?"color: "+this.config.confirmAlertThemeLinkColor+" !important":"",'">').concat(this.config.privacyPolicyText||Object(i.a)("privacy"),"</a>")),this.config.faqText&&this.config.faqUrl&&e.push('<a href="'.concat(this.config.faqUrl,'" target="_blank" style="').concat(this.config.confirmAlertThemeLinkColor?"color: "+this.config.confirmAlertThemeLinkColor+" !important":"",'">').concat(this.config.faqText||"FAQ","</a>")),e.join(" &nbsp;/&nbsp; ")}},{key:"show",value:function(e){var t,n=this;this.isSubscribed=e,this.element.id="cleverpush-content-button-".concat(this.id);var r=function(){n.button=n.element.querySelector(".cleverpush-content-button-btn-subscribe"),n.button&&(n.button.addEventListener("click",n.onClick.bind(n)),n.element&&n.element.dataset&&(n.element.dataset.buttonBackgroundColor&&(n.button.style.backgroundColor=n.element.dataset.buttonBackgroundColor),n.element.dataset.buttonColor&&(n.button.style.color=n.element.dataset.buttonColor))),n.unsubscribeButton=n.element.querySelector(".cleverpush-content-button-btn-unsubscribe"),n.unsubscribeButton&&(n.unsubscribeButton.addEventListener("click",n.onClickUnsubscribe.bind(n)),n.element&&n.element.dataset&&n.element.dataset.buttonBackgroundColor&&n.unsubscribeButton.style.setProperty("border-color",n.element.dataset.buttonBackgroundColor,"important")),n.topicSelection=n.element.querySelector(".cleverpush-content-button-topics"),n.saveTopicsButton=n.element.querySelector(".cleverpush-content-button-save-topics-button"),n.saveTopicsButton&&(n.element.dataset.buttonBackgroundColor&&(n.saveTopicsButton.style.backgroundColor=n.element.dataset.buttonBackgroundColor),n.saveTopicsButton.addEventListener("click",n.saveTopics.bind(n))),n.reset(e)},s='\n<div class="cleverpush-content-button-btn-wrap">\n<button class="cleverpush-content-button-btn cleverpush-content-button-btn-subscribe">'.concat(this.elementConfig.buttonText||Object(i.a)("bell.subscribe"),'</button>\n<button class="cleverpush-content-button-btn cleverpush-content-button-btn-unsubscribe" title="').concat(Object(i.a)("unsubscribe.title"),'" style="display: none;">&times;</button>\n</div>\n');this.facebookEnabled&&("facebook"===CleverPush.browserType&&(s=""),this.config.facebookDoubleOptIn&&!this.facebookDoubleOptInConfirmed&&(s+='<div class="cleverpush-topics cleverpush-confirm-topics"><div><label><input type="'.concat(this.config.confirmAlertRadioButtonTopics?"radio":"checkbox",'" id="cleverpush-facebook-checkbox"> Ich akzeptiere die <a href="').concat(this.config.privacyPolicyUrl,'">Datenschutzerklärung</a></label></div></div>')),s+='<div class="fb-messenger-checkbox-wrap"><div class="fb-send-to-messenger" origin="'.concat(location.origin,'" page_id="').concat(this.config.facebookPageId,'" messenger_app_id="').concat(this.config.facebookAppId,'" user_ref="').concat(this.facebookUserRef,'" allow_login="true" size="large" style="margin-top: 10px;"></div></div>'));var c="";if(this.channelTopics&&this.channelTopics.length&&this.subscriptionManager.getTopics().then((function(r){c+='<div class="cleverpush-topics cleverpush-content-button-topics">',n.channelTopics.filter((function(e){return!e.parentTopic})).sort((function(e,t){return e.sort-t.sort})).forEach((function(t){var i=t.name;"windows-1252"!==document.characterSet&&"iso-8859-1"!==document.characterSet||(i=decodeURIComponent(escape(t.name)));var o=n.channelTopics.filter((function(e){return e.parentTopic===t._id}));c+='<div><label><input type="'.concat(n.config.confirmAlertRadioButtonTopics?"radio":"checkbox",'" name="topics[]" value="').concat(t._id,'"').concat(!e&&!t.defaultUnchecked||r&&r.indexOf(t._id)>-1?' checked="checked"':"","> ").concat(i,"</label></div>"),o.length&&o.forEach((function(e){var t=e.name;"windows-1252"!==document.characterSet&&"iso-8859-1"!==document.characterSet||(t=decodeURIComponent(escape(e.name))),c+='<div class="topic-child" style="margin-left: 20px; font-size: 90%"><label><input type="'.concat(n.config.confirmAlertRadioButtonTopics?"radio":"checkbox",'" name="topics[]" value="').concat(e._id,'" ').concat(e.defaultUnchecked?"":"checked","> ").concat(t,"</label></div>")}))})),c+='<button type="button" class="cleverpush-content-button-save-topics-button cleverpush-content-button-btn" style="display: none;">'.concat(Object(i.a)("panel.save"),"</button>"),c+="</div>",t()})),(t="box-simple"===this.elementConfig.type||"box-count"===this.elementConfig.type?function(){n.element.innerHTML='<div class="cleverpush-content-button-box cleverpush-content-button-'.concat(n.elementConfig.type,'">')+'<div class="cleverpush-content-button-top">'+'  <div class="cleverpush-content-button-icon" style="background-image: url(\''.concat(n.config.channelIcon,"')\"></div>")+'  <div class="cleverpush-content-button-body">'+'    <div class="cleverpush-content-button-title">'.concat(n.elementConfig.title||n.config.channelName,"</div>")+'    <div class="cleverpush-content-button-text">'.concat(n.elementConfig.text||Object(i.a)("confirm.info"),"</div>")+'  </div></div><div class="cleverpush-content-button-bottom">'+c+s+'  <div class="cleverpush-clearfix"></div></div><div class="cleverpush-content-button-branding">'+"  <span>\n               ".concat(n.getBrandingLinks(),"\n             </span>")+"</div></div>",r()}:function(){n.element.className+=" cleverpush-content-button-simple",n.element.innerHTML=s,r()})(),this.facebookEnabled){var a=function(){o.a.initFacebook((function(){"undefined"!=typeof FB&&FB.XFBML.parse()}))};this.config.facebookDoubleOptIn?(this.facebookDoubleOptInConfirmed=!0,this.facebookConfirmCheckbox=this.element.querySelector("#cleverpush-facebook-checkbox"),this.facebookConfirmCheckbox&&this.facebookConfirmCheckbox.addEventListener("click",(function(){a()}))):a()}}},{key:"reset",value:function(e){this.isSubscribed=e,this.button&&(e?(this.button.innerHTML=this.elementConfig.buttonTextSubscribed||"✓&nbsp; "+Object(i.a)("bell.subscribed"),this.button.disabled=!0,this.element&&this.element.dataset&&this.element.dataset.buttonBackgroundColor&&this.button.style.setProperty("border-color",this.element.dataset.buttonBackgroundColor,"important")):(this.button.innerHTML=this.elementConfig.buttonText||Object(i.a)("bell.subscribe"),this.button.disabled=!1,this.element&&this.element.dataset&&this.element.dataset.buttonBackgroundColor&&this.button.style.removeProperty("border-color"))),this.unsubscribeButton&&(this.unsubscribeButton.style.display=e?"block":"none"),this.topicSelection&&(this.topicSelection.style.display=e&&!this.showTopics?"none":"block"),this.saveTopicsButton&&(this.saveTopicsButton.style.display=e?"block":"none")}},{key:"onClick",value:function(e){var t,n=this;e.preventDefault(),this.api.confirmAlertShown(),this.subscriptionManager.setTopics(this.getSelectedTopics()),this.button.innerHTML='<div class="cleverpush-loader"><div></div><div></div><div></div><div></div></div>',this.config.confirmAlertSelectTopicsLater&&(t=!0,this.config.confirmAlertSelectTopicsLater=!1),this.subscriptionManager.subscribeForce(this.isSubscribed).then((function(e){t&&(n.config.confirmAlertSelectTopicsLater=!0)})).catch((function(e){!n.config.ownDomain||"https:"!==location.protocol||"denied"!==e.reason&&"default"!==e.reason?r.b.error(e):n.subscriptionManager.confirm&&n.subscriptionManager.confirm.showBackdrop(void 0,"denied",e.message)}))}},{key:"onClickUnsubscribe",value:function(e){e.preventDefault(),this.subscriptionManager.unsubscribe(!1).then((function(){}))}},{key:"saveTopics",value:function(e){var t=this;if(e.preventDefault(),!this.savingTopics){this.savingTopics=!0,this.saveTopicsButton.innerHTML+="...",this.saveTopicsButton.disabled=!0,this.element&&this.element.dataset&&this.element.dataset.buttonBackgroundColor&&this.saveTopicsButton.style.setProperty("border-color",this.element.dataset.buttonBackgroundColor,"important");var n=function(e){e?(t.saveTopicsButton.innerHTML='<span style="color: #009222">'.concat(Object(i.a)("panel.successfullySaved"),"</span>"),setTimeout((function(){t.saveTopicsButton.disabled=!1,t.saveTopicsButton.innerHTML=Object(i.a)("panel.save"),t.savingTopics=!1}),2e3)):(t.saveTopicsButton.disabled=!1,t.saveTopicsButton.innerHTML=Object(i.a)("panel.save"),t.savingTopics=!1)},r=this.getSelectedTopics();this.subscriptionManager.setTopics(r).then((function(){t.subscriptionManager.sync(!1,r).then((function(){n(!0)})).catch((function(){n(!1)}))})).catch((function(){n(!1)}))}}}])&&s(t.prototype,c),a&&s(t,a),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(135),n(266),n(82),n(196),n(201),n(264),n(468),n(153),n(112),n(81),n(465),n(83),n(137),n(90),n(211);var i=n(22),r=n(1),o=n(49);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(t,i,o,s,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.element=i,this.element?(this.config=o,this.subscriptionManager=s,this.api=c,this.pushSupported=!1,this.channelTopics=(this.config.channelTopics||[]).filter((function(e){var t=!0;return t&&e.matchPath&&e.matchPath.length&&(t=new RegExp(e.matchPath).test(window.location.pathname)),t&&e.notMatchPath&&e.notMatchPath.length&&(t=!new RegExp(e.notMatchPath).test(window.location.pathname)),t})),this.elementConfig=this.element.dataset||{},n(657),this.show(!1,void 0)):r.b.debug("MultiPlatformWidget: element not found")}var t,c,a;return t=e,(c=[{key:"getBrandingLinks",value:function(){var e=[];return this.config.hideBranding||e.push('<a href="https://cleverpush.com/" target="_blank" style="'.concat(this.config.confirmAlertThemeLinkColor?"color: "+this.config.confirmAlertThemeLinkColor+" !important":"",'">Powered by CleverPush</a>')),this.config.privacyPolicyUrl&&e.push('<a href="'.concat(this.config.privacyPolicyUrl,'" target="_blank" style="').concat(this.config.confirmAlertThemeLinkColor?"color: "+this.config.confirmAlertThemeLinkColor+" !important":"",'">').concat(this.config.privacyPolicyText||Object(i.a)("privacy"),"</a>")),this.config.faqText&&this.config.faqUrl&&e.push('<a href="'.concat(this.config.faqUrl,'" target="_blank" style="').concat(this.config.confirmAlertThemeLinkColor?"color: "+this.config.confirmAlertThemeLinkColor+" !important":"",'">').concat(this.config.faqText||"FAQ","</a>")),e.join(" &nbsp;/&nbsp; ")}},{key:"getSelectedTopics",value:function(){Object(r.c)("getSelectedTopics");var e=(this.channelTopics||[]).map((function(e){return e._id}));if(this.element){var t=this.element.querySelectorAll('input[name="topics[]"]');e=[];for(var n=0;n<t.length;n+=1)"checkbox"!==t[n].type&&"radio"!==t[n].type||!t[n].checked||e.push(t[n].value)}return e}},{key:"getMessengerParam",value:function(){var e="undefined"!=typeof localStorage&&localStorage.getItem("cleverpush-subscription-id")||"";if(e&&window.btoa)try{return window.btoa(JSON.stringify({connSubId:e}))}catch(e){}return""}},{key:"show",value:function(e,t){var n=this;Object(r.c)("MultiPlatformWidget.show",e,t),this.element.id="cleverpush-multi-platform-widget-".concat(this.id);var s=function(e){n.element&&n.element.dataset&&(n.element.dataset.buttonBackgroundColor&&(e.style.backgroundColor=n.element.dataset.buttonBackgroundColor),n.element.dataset.buttonColor&&(e.style.color=n.element.dataset.buttonColor))},c="",a="";e&&"true"!==this.elementConfig.pushDisabled&&(c='\n<div class="cleverpush-multi-platform-widget-btn-wrap">\n<button class="cleverpush-multi-platform-widget-btn cleverpush-multi-platform-widget-btn-subscribe"><i class="cleverpush-icon cleverpush-icon-bell"></i>'.concat(this.elementConfig.buttonText||Object(i.a)("bell.subscribe"),'</button>\n<button class="cleverpush-multi-platform-widget-btn cleverpush-multi-platform-widget-btn-unsubscribe" title="').concat(Object(i.a)("unsubscribe.title"),'" style="display: none;">&times;</button>\n<button class="cleverpush-multi-platform-widget-btn cleverpush-multi-platform-widget-btn-settings" title="').concat(Object(i.a)("panel.editTopics"),'" style="display: none;">').concat(Object(i.a)("panel.settings"),"</button>\n</div>\n"));var u="";this.config.multiChannels&&this.config.multiChannels.facebookChannel&&this.config.multiChannels.facebookChannel.facebookPage&&this.config.multiChannels.facebookChannel.facebookPage.id&&(u='<div class="cleverpush-multi-platform-widget-btn-wrap cleverpush-facebookchannel">\n<a href="https://m.me/'.concat(this.config.multiChannels.facebookChannel.facebookPage.id,"?ref=").concat(this.getMessengerParam(),'" target="_blank" class="cleverpush-multi-platform-widget-btn"><i class="cleverpush-icon cleverpush-icon-facebook"></i>Facebook Messenger</a>\n</div>\n'));var l="";this.config.multiChannels&&this.config.multiChannels.telegramChannel&&this.config.multiChannels.telegramChannel.telegramUsername&&(l='<div class="cleverpush-multi-platform-widget-btn-wrap cleverpush-telegramchannel">\n<a href="https://t.me/'.concat(this.config.multiChannels.telegramChannel.telegramUsername,"?start=").concat(this.getMessengerParam(),'" target="_blank" class="cleverpush-multi-platform-widget-btn"><i class="cleverpush-icon cleverpush-icon-telegram"></i>Telegram</a>\n</div>\n'));var _="";this.config.multiChannels&&this.config.multiChannels.appChannel&&("Android"===o.m.name&&this.config.multiChannels.appChannel.androidPackageName?_='<div class="cleverpush-multi-platform-widget-btn-wrap cleverpush-appchannel">\n<a href="https://play.google.com/store/apps/details?id='.concat(this.config.multiChannels.appChannel.androidPackageName,'" target="_blank" class="cleverpush-multi-platform-widget-btn"><i class="cleverpush-icon cleverpush-icon-android"></i>Android App</a>\n</div>\n'):"iOS"===o.m.name&&this.config.multiChannels.appChannel.iosStoreId&&(_='<div class="cleverpush-multi-platform-widget-btn-wrap cleverpush-appchannel">\n<a href="https://apps.apple.com/us/app/cleverpush/id'.concat(this.config.multiChannels.appChannel.iosStoreId,'" target="_blank" class="cleverpush-multi-platform-widget-btn"><i class="cleverpush-icon cleverpush-icon-ios"></i>iOS App</a>\n</div>\n')));var f=function(){n.element.innerHTML='<div class="cleverpush-multi-platform-widget-box cleverpush-multi-platform-widget-'.concat(n.elementConfig.type,'">')+'<div class="cleverpush-multi-platform-widget-top">'+'  <div class="cleverpush-multi-platform-widget-icon" style="background-image: url(\''.concat(n.config.channelIcon,"')\"></div>")+'  <div class="cleverpush-multi-platform-widget-body">'+'    <div class="cleverpush-multi-platform-widget-title">'.concat(n.elementConfig.title||n.config.channelName,"</div>")+'    <div class="cleverpush-multi-platform-widget-text">'.concat(n.elementConfig.text||"","</div>")+'  </div></div><div class="cleverpush-multi-platform-widget-bottom">'+c+a+u+l+_+'  <div class="cleverpush-clearfix"></div></div><div class="cleverpush-multi-platform-widget-branding">'+"  <span>\n               ".concat(n.getBrandingLinks(),"\n             </span>")+"</div></div>",n.button=n.element.querySelector(".cleverpush-multi-platform-widget-btn-subscribe"),n.button&&(n.button.addEventListener("click",n.onClick.bind(n)),s(n.button)),n.unsubscribeButton=n.element.querySelector(".cleverpush-multi-platform-widget-btn-unsubscribe"),n.unsubscribeButton&&(n.unsubscribeButton.addEventListener("click",n.onClickUnsubscribe.bind(n)),n.element&&n.element.dataset&&n.element.dataset.buttonBackgroundColor&&n.unsubscribeButton.style.setProperty("border-color",n.element.dataset.buttonBackgroundColor,"important")),n.topicSelection=n.element.querySelector(".cleverpush-topics"),n.settingsButton=n.element.querySelector(".cleverpush-multi-platform-widget-btn-settings"),n.settingsButton&&(n.settingsButton.addEventListener("click",n.onClickSettings.bind(n)),s(n.settingsButton)),n.saveTopicsButton=n.element.querySelector(".cleverpush-multi-platform-widget-save-topics-button"),n.saveTopicsButton&&(n.saveTopicsButton.addEventListener("click",n.saveTopics.bind(n)),s(n.saveTopicsButton)),n.reset(e,t)};f(),this.channelTopics&&this.channelTopics.length&&this.subscriptionManager&&this.subscriptionManager.getTopics().then((function(e){a+='<div class="cleverpush-topics cleverpush-multi-platform-widget-topics" style="display: none">',n.channelTopics.filter((function(e){return!e.parentTopic})).sort((function(e,t){return e.sort-t.sort})).forEach((function(i){var r=i.name;"windows-1252"!==document.characterSet&&"iso-8859-1"!==document.characterSet||(r=decodeURIComponent(escape(i.name)));var o=n.channelTopics.filter((function(e){return e.parentTopic===i._id}));a+='<div><label><input type="'.concat(n.config.confirmAlertRadioButtonTopics?"radio":"checkbox",'" name="topics[]" value="').concat(i._id,'"').concat(!t&&!i.defaultUnchecked||e&&e.indexOf(i._id)>-1?' checked="checked"':"","> ").concat(r,"</label></div>"),o.length&&o.forEach((function(e){var t=e.name;"windows-1252"!==document.characterSet&&"iso-8859-1"!==document.characterSet||(t=decodeURIComponent(escape(e.name))),a+='<div class="topic-child" style="margin-left: 20px; font-size: 90%"><label><input type="'.concat(n.config.confirmAlertRadioButtonTopics?"radio":"checkbox",'" name="topics[]" value="').concat(e._id,'" ').concat(e.defaultUnchecked?"":"checked","> ").concat(t,"</label></div>")}))})),a+='<button type="button" class="cleverpush-multi-platform-widget-save-topics-button cleverpush-multi-platform-widget-btn">'.concat(Object(i.a)("panel.save"),"</button>"),a+="</div>",f()}))}},{key:"reset",value:function(e,t){this.button&&(t?(this.button.innerHTML='<i class="cleverpush-icon cleverpush-icon-bell"></i>'+(this.elementConfig.buttonTextSubscribed||"✓&nbsp; "+Object(i.a)("bell.subscribed")),this.button.disabled=!0,this.element&&this.element.dataset&&this.element.dataset.buttonBackgroundColor&&this.button.style.setProperty("border-color",this.element.dataset.buttonBackgroundColor,"important")):(this.button.innerHTML='<i class="cleverpush-icon cleverpush-icon-bell"></i>'+(this.elementConfig.buttonText||Object(i.a)("bell.subscribe")),this.button.disabled=!1,this.element&&this.element.dataset&&this.element.dataset.buttonBackgroundColor&&this.button.style.removeProperty("border-color"))),this.unsubscribeButton&&(this.unsubscribeButton.style.display=t?"block":"none"),this.settingsButton&&this.topicSelection&&(this.settingsButton.style.display=t?"block":"none")}},{key:"saveTopics",value:function(e){var t=this;if(e.preventDefault(),!this.savingTopics){this.savingTopics=!0,this.saveTopicsButton.innerHTML+="...",this.saveTopicsButton.disabled=!0,this.element&&this.element.dataset&&this.element.dataset.buttonBackgroundColor&&this.saveTopicsButton.style.setProperty("border-color",this.element.dataset.buttonBackgroundColor,"important");var n=function(e){e?(t.saveTopicsButton.innerHTML='<span style="color: #009222">'.concat(Object(i.a)("panel.successfullySaved"),"</span>"),setTimeout((function(){t.saveTopicsButton.disabled=!1,t.saveTopicsButton.innerHTML=Object(i.a)("panel.save"),t.savingTopics=!1}),2e3)):(t.saveTopicsButton.disabled=!1,t.saveTopicsButton.innerHTML=Object(i.a)("panel.save"),t.savingTopics=!1)},r=this.getSelectedTopics();this.subscriptionManager.setTopics(r).then((function(){t.subscriptionManager.sync(!1,r).then((function(){n(!0)})).catch((function(){n(!1)}))})).catch((function(){n(!1)}))}}},{key:"onClick",value:function(e){var t=this;e.preventDefault(),this.api.confirmAlertShown(),this.button.innerHTML='<div class="cleverpush-loader"><div></div><div></div><div></div><div></div></div>',this.subscriptionManager.subscribe(!0).then((function(e){})).catch((function(e){!t.config.ownDomain||"https:"!==location.protocol||"denied"!==e.reason&&"default"!==e.reason?r.b.error(e):t.subscriptionManager.confirm&&t.subscriptionManager.confirm.showBackdrop(void 0,"denied",e.message)}))}},{key:"onClickUnsubscribe",value:function(e){e.preventDefault(),this.subscriptionManager.unsubscribe(!1).then((function(){}))}},{key:"onClickSettings",value:function(e){e.preventDefault(),this.topicSelection&&(this.topicSelection.style.display=this.settingsVisible?"none":"block",this.settingsVisible=!this.settingsVisible)}}])&&s(t.prototype,c),a&&s(t,a),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(153),n(81);var i=n(22),r=n(1);function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(t,n,i,r,o){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.element=n,this.element&&(this.config=i,this.subscriptionManager=r,this.api=o,this.isSubscribed=!1,this.hasTag=!1,this.elementConfig=this.element.dataset||{},this.subscriptionManager.storageManager.hasTag(this.elementConfig.tag).then((function(e){s.hasTag=e})),this.subscriptionManager.isSubscribed().then((function(e){s.reset(e)})),this.element&&(this.element.addEventListener("click",this.onClick.bind(this)),this.element.addEventListener("touchstart",this.onClick.bind(this))))}var t,n,s;return t=e,(n=[{key:"reset",value:function(e){this.isSubscribed=e,this.element&&(e&&this.hasTag?this.element.innerHTML=this.elementConfig.buttonTextSubscribed||"✓&nbsp; "+Object(i.a)("bell.subscribed"):this.element.innerHTML=this.elementConfig.buttonText||Object(i.a)("bell.subscribe"))}},{key:"onClick",value:function(e){var t=this;e.preventDefault();var n=function(e){t.hasTag?(t.api.untagSubscription(e,t.elementConfig.tag),t.subscriptionManager.storageManager.removeTag(t.elementConfig.tag)):(t.api.tagSubscription(e,t.elementConfig.tag),t.subscriptionManager.storageManager.addTag(t.elementConfig.tag)),t.hasTag=!t.hasTag,t.reset(t.isSubscribed)};this.isSubscribed?this.subscriptionManager.getSubscriptionId().then((function(e){n(e)})):(this.api.confirmAlertShown(),this.subscriptionManager.subscribe(!0).then((function(e){e?n(e):t.subscriptionManager.getSubscriptionId().then((function(e){n(e)}))})).catch((function(e){!t.config.ownDomain||"https:"!==location.protocol||"denied"!==e.reason&&"default"!==e.reason?r.b.error(e):t.subscriptionManager.confirm&&t.subscriptionManager.confirm.showBackdrop(void 0,"denied",e.message)})))}}])&&o(t.prototype,n),s&&o(t,s),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(196),n(494),n(153),n(81);var i=n(22),r=n(1);function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(t,n,i,r,o){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.element=n,this.element&&(this.config=i,this.subscriptionManager=r,this.api=o,this.isSubscribed=!1,this.hasTopic=!1,this.topics=[],this.elementConfig=this.element.dataset||{},this.subscriptionManager.storageManager.getTopics().then((function(e){s.topics=e,s.hasTopic=e.indexOf(s.elementConfig.topic)>-1,s.subscriptionManager.isSubscribed().then((function(e){s.reset(e)}))})),this.element&&this.element.addEventListener("click",this.onClick.bind(this)))}var t,n,s;return t=e,(n=[{key:"reset",value:function(e){this.isSubscribed=e,this.element&&(e&&this.hasTopic?this.element.innerHTML=this.elementConfig.buttonTextSubscribed||"✓&nbsp; "+Object(i.a)("bell.subscribed"):this.element.innerHTML=this.elementConfig.buttonText||Object(i.a)("bell.subscribe")),this.toggleButtons(!1)}},{key:"toggleButtons",value:function(e){Object(r.c)("toggleButtons");for(var t=0;t<CleverPush.topicButtons.length;t+=1)CleverPush.topicButtons[t].element.disabled=e}},{key:"onClick",value:function(e){var t=this;e.preventDefault(),this.toggleButtons(!0);var n=function(e){var n=t.topics.indexOf(t.elementConfig.topic);n>-1?t.topics.splice(n,1):t.topics.push(t.elementConfig.topic),t.hasTopic=!t.hasTopic,t.subscriptionManager.setTopics(t.topics).then((function(){t.subscriptionManager.sync(!1,t.topics).then((function(){t.reset(!0)})).catch((function(){t.reset(!1)}))})).catch((function(){t.reset(!1)}))};this.isSubscribed?this.subscriptionManager.getSubscriptionId().then((function(e){n()})):(this.api.confirmAlertShown(),this.subscriptionManager.subscribe(!0).then((function(e){e?n():t.subscriptionManager.getSubscriptionId().then((function(e){n()}))})).catch((function(e){!t.config.ownDomain||"https:"!==location.protocol||"denied"!==e.reason&&"default"!==e.reason?r.b.error(e):t.subscriptionManager.confirm&&t.subscriptionManager.confirm.showBackdrop(void 0,"denied",e.message),t.toggleButtons(!1)})))}}])&&o(t.prototype,n),s&&o(t,s),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(108),n(195);function i(e){var t=new Request("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",{method:"HEAD",mode:"no-cors"});fetch(t).then((function(e){return e})).then((function(t){e(!1)})).catch((function(t){e(!0)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(81);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};i(r,"CONNECTED","connect"),i(r,"REMOTE_NOTIFICATION_PERMISSION","cleverpush.remoteNotificationPermission"),i(r,"REMOTE_OPERATION_COMPLETE","cleverpush.operationComplete"),i(r,"REMOTE_RETRIGGER_EVENT","cleverpush.remoteRetriggerEvent"),i(r,"MODAL_LOADED","cleverpush.modalPrompt.loaded"),i(r,"MODAL_PROMPT_ACCEPTED","cleverpush.modalPrompt.accepted"),i(r,"MODAL_PROMPT_REJECTED","cleverpush.modalPrompt.canceled"),i(r,"POPUP_LOADED","cleverpush.popup.loaded"),i(r,"POPUP_ACCEPTED","cleverpush.popup.accepted"),i(r,"POPUP_REJECTED","cleverpush.popup.canceled"),i(r,"POPUP_CLOSING","cleverpush.popup.closing"),i(r,"REMOTE_NOTIFICATION_PERMISSION_CHANGED","cleverpush.remoteNotificationPermissionChanged"),i(r,"IFRAME_POPUP_INITIALIZE","cleverpush.iframePopupInitialize"),i(r,"UNSUBSCRIBE_FROM_PUSH","cleverpush.unsubscribeFromPush"),i(r,"BEGIN_BROWSING_SESSION","cleverpush.beginBrowsingSession"),i(r,"REQUEST_HOST_URL","cleverpush.requestHostUrl"),i(r,"SHOW_HTTP_PERMISSION_REQUEST","cleverpush.showHttpPermissionRequest"),i(r,"IS_SHOWING_HTTP_PERMISSION_REQUEST","cleverpush.isShowingHttpPermissionRequest"),i(r,"WINDOW_TIMEOUT","cleverpush.windowTimeout"),i(r,"FINISH_REMOTE_REGISTRATION","cleverpush.finishRemoteRegistration"),i(r,"FINISH_REMOTE_REGISTRATION_IN_PROGRESS","cleverpush.finishRemoteRegistrationInProgress"),i(r,"POPUP_BEGIN_MESSAGEPORT_COMMS","cleverpush.beginMessagePortComms"),i(r,"SERVICEWORKER_COMMAND_REDIRECT","cleverpush.command.redirect"),i(r,"HTTP_PERMISSION_REQUEST_RESUBSCRIBE","cleverpush.httpPermissionRequestResubscribe"),i(r,"MARK_PROMPT_DISMISSED","cleverpush.markPromptDismissed")},,function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));n(148),n(149),n(150),n(135),n(196),n(91),n(102),n(112),n(254),n(81),n(533),n(255),n(256),n(108),n(195),n(257),n(583),n(137),n(98),n(144);var i=n(471),r=n.n(i),o=n(268),s=n(534),c=n(1),a=n(258),u=n(61),l=n(55),_=n(22),f=n(49);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=m(e);if(t){var r=m(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(b,e);var t,i,o,d=g(b);function b(e,t,n){var i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(i=d.call(this,e,t,n)).storageManager.initDb(),Object(s.a)(e.gcmManifestPath),e.loadIframe){var o="https://".concat(i.config.subdomain,".cleverpush.com"),a=document.createElement("div");a.style.display="none",document.body.appendChild(a),r.a.debug=c.b.getLevel()<2;var u=r.a.connectToChild({url:"".concat(o,"/iframe?origin=").concat(encodeURIComponent(location.origin)),appendTo:a,timeout:3e4});u.iframe.style.display="none",u.promise.then((function(e){c.b.debug("child ready",e),i.iframeMessenger=e,e.setConfig(i.config).then((function(){i.triggerEvent(l.a.INITIALIZED)}))})).catch((function(e){c.b.error("iFrame connection error",e),i.triggerEvent(l.a.INITIALIZED)}))}else i.triggerEvent(l.a.INITIALIZED);return!navigator.permissions||"Firefox"===f.a.name&&f.c<46||navigator.permissions.query({name:"notifications"}).then((function(e){e.onchange=function(){i.isSubscribing||("granted"!==window.Notification.permission&&i.triggerEvent(l.a.UNSUBSCRIBED),"denied"===window.Notification.permission?i.unsubscribe():i.isSubscribed().then((function(e){e||i.triggerEvent(l.a.PERMISSION_RE_GRANTED)})))}})),i}return t=b,(i=[{key:"unsubscribe",value:function(e){var t=this;return this.iframeMessenger?this.iframeMessenger.getSubscriptionId().then((function(n){return t.iframeMessenger.unsubscribe(!0).then((function(){return h(m(b.prototype),"unsubscribe",t).call(t,e,n)}))})):h(m(b.prototype),"unsubscribe",this).call(this,e)}},{key:"isSubscribedViaSubdomain",value:function(){return!0}},{key:"replaceRootWorker",value:function(){var e=this;return new Promise((function(t){"granted"===window.Notification.permission&&navigator.serviceWorker&&"/"===e.getWorkerScope()&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.scriptURL&&navigator.serviceWorker.controller.scriptURL.indexOf(e.getWorkerPath())<0?(c.b.debug("replacing root service worker..."),navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(e){c.b.debug("replacing root worker result",e),t()})).catch(t)})).catch((function(e){c.b.debug("replacing root service worker failed",e),t()}))):t()}))}},{key:"isSubscribed",value:function(){var e=this;return new Promise((function(t){if("PREVIEW"===e.config.env)return t(!1);var n=function(){e.storageManager.checkIfShouldSync().then((function(n){n?e.sync().then((function(){c.b.debug("httpsManager subscribed = true (1)"),e.subscribed=!0,t(!0)})).catch((function(n){c.b.warn("error while syncing",n),c.b.debug("httpsManager subscribed = true (2)"),e.subscribed=!0,t(!0)})):(c.b.debug("httpsManager subscribed = true (3)"),e.subscribed=!0,t(!0))}))},i=function(){e.isSubscribing?(c.b.debug("httpsManager subscribed = true (6)"),e.subscribed=!0,t(!0)):(e.isSubscribing=!0,e.storageManager.isSubscribed().then((function(n){n?e.registerWorker().then((function(t){return e.pushManagerSubscribe(t)})).then((function(n){return e.sync(n).then((function(){e.isSubscribing=!1,e.triggerEvent(l.a.SUBSCRIBED,e.storageManager.getSubscriptionId()),c.b.debug("httpsManager subscribed = true (4)"),e.subscribed=!0,t(!0)}))})).catch((function(n){c.b.error(n),e.isSubscribing=!1,c.b.debug("httpsManager subscribed = false (5)"),e.subscribed=!1,t(!1)})):(e.isSubscribing=!1,t(!1))})))},r=function(){if("granted"===window.Notification.permission&&navigator.serviceWorker)return e.getActiveWorkerRegistration().then((function(r){return r.pushManager.getSubscription().then((function(o){if(e.tryWorkerUpdate(r),o)return e.storageManager.isSubscribed().then((function(i){i?n():(c.b.debug("httpsManager subscribed = false (7)"),e.subscribed=!1,t(!1))}));c.b.debug("isSubscribed: no subscription found -> resubscribe"),i()}))})).catch((function(n){if(e.config.showConfirmAlertResubscribe)return e.config.showConfirmAlert=!0,void t(!1);c.b.debug("isSubscribed: -> resubscribe ",n),i()}));c.b.debug("isSubscribed: no perm or SW found"),c.b.debug("httpsManager subscribed = false (8)"),e.subscribed=!1,t(!1)};e.replaceRootWorker().then((function(){if(!e.iframeMessenger)return r();e.iframeMessenger.isSubscribed().then((function(t){return c.b.debug("isSubscribed",t),t?e.iframeMessenger.getSubscriptionId().then((function(t){return t===e.storageManager.getSubscriptionId()?r():n()})):r()})).catch((function(n){n&&(c.b.debug("isSubscribed err",n),c.b.error(n)),c.b.debug("httpsManager subscribed = false (9)"),e.subscribed=!1,t(!1)}))}))}))}},{key:"pushManagerSubscribe",value:function(e,t){var n=this;return new Promise((function(i,r){e.pushManager.subscribe(n.getPushManagerSubscribeOptions()).then((function(t){i(t),n.unregisterOtherPushSubscriptions(e)})).catch((function(o){!t&&o&&o.message&&(o.message.indexOf("subscription with a different application server key")>-1||o.message.indexOf("subscription with a different applicationServerKey")>-1)?e.pushManager.getSubscription().then((function(t){t?(n.migratedSubscription=!0,t.unsubscribe().then((function(){n.pushManagerSubscribe(e,!0).then(i).catch(r)})).catch(r)):r(o)})).catch(r):r(o)}))}))}},{key:"canSubscribe",value:function(){var e=this;return new Promise((function(t,n){if("denied"===window.Notification.permission&&e.config.alertHoursDeny&&"was-denied"===localStorage.getItem("cleverpush-subscription-status")&&"denied"!==sessionStorage.getItem("cleverpush-subscription-status"))return e.config.showUnblockTutorial=!0,e.config.showConfirmAlert=!0,void t(!0);var i=function(){"denied"===window.Notification.permission?n(new u.a("User has manually denied notifications","unsubscribed")):e.storageManager.canSubscribe().then((function(i){c.b.debug("storageStatus canSubscribe",i),i?e.isSubscribed().then((function(e){e?n(new u.a("User is already subscribed","subscribed")):t(!0)})):n(new u.a("User has manually unsubscribed or denied notifications","unsubscribed"))}))},r=function(){if("accengage"!==e.config.importedSubscriptionsProvider||!e.config.importedSubscriptionsSubdomain)return i();var n;(n=e.config,new Promise((function(e){window.addEventListener("message",(function t(n){if(console.log("acc message",n.data),n.data&&"mid:get:storage"===n.data.type)if(window.removeEventListener("message",t),n.data.body){var i=JSON.parse(n.data.body);e(!!i&&!0===i.isOptin)}else e(!1)}));var t=document.querySelector('iframe[name="acc_proxy"]');t?t.contentWindow.postMessage({topic:"mid:get:storage",type:"mid:get:storage",body:{}},"*"):((t=document.createElement("iframe")).src="https://"+n.importedSubscriptionsSubdomain+".accengage.net/pushweb/assets/m_main.html",t.style.display="none",t.style.border="none",t.name="acc_proxy",t.onload=function(){t.contentWindow.postMessage({topic:"mid:get:storage",type:"mid:get:storage",body:{}},"*")},t.onerror=function(){return e(!1)},document.body.appendChild(t))}))).then((function(e){if(!e)return i();t(!1)}))};if(!e.iframeMessenger)return r();e.iframeMessenger.canSubscribe().then((function(e){var t=e.result,i=e.message,o=e.reason;if(c.b.debug("canSubscribe from iframe",t),!0===t)return r();n(new u.a(i,o))}),(function(e){e&&c.b.debug("canSubscribe err iframe",e),n(e)}))}))}},{key:"getSubscriptionId",value:function(){var e=this;return new Promise((function(t){var n=e.storageManager.getSubscriptionId();n?t(n):e.iframeMessenger?e.iframeMessenger.getSubscriptionId().then((function(e){t(e)})):t(null)}))}},{key:"hasNotificationPermission",value:function(){var e=this;return new Promise((function(t){if("PREVIEW"===e.config.env)return t(!1);"granted"===window.Notification.permission?t(!0):t(!1)}))}},{key:"registerForPush",value:function(){var e=this;return new Promise((function(t,n){e.storageManager.setAllowed(),!(e.topics||[]).length&&e.config.confirmAlertNativeTheme&&"cleverpush-confirm-default"!==e.config.confirmAlertNativeTheme&&e.confirm&&e.confirm.hasTopicCheckboxes()&&e.setTopics(e.confirm.getSelectedTopics()),e.registerWorker().then((function(t){return e.pushManagerSubscribe(t)})).then((function(n){return e.sync(n).then((function(){e.isSubscribing=!1,e.triggerEvent(l.a.SUBSCRIBED,e.storageManager.getSubscriptionId()),t("granted")}))})).catch((function(t){c.b.error(t),e.isSubscribing=!1,n(t)}))}))}},{key:"subscribeForce",value:function(e){var t=this;return new Promise((function(i,r){e?i():t.isSubscribing?r(new a.a("A subscription process is already in progress.")):(t.isSubscribing=!0,"default"===Notification.permission?Notification.requestPermission((function(e){if("granted"===e){if(t.registerForPushLater=!1,t.registerForPushLater?t.storageManager.setPending():t.registerForPush().then(i).catch(r),t.confirm&&(t.confirm.hideBackdrop(e),t.config.confirmAlertSelectTopicsLater&&(t.confirm.appendConfirmBox(t.config.confirmAlertSelectTopicsLaterTheme||"cleverpush-confirm-default",!0),t.config.confirmAlertSubscribeLater&&(t.registerForPushLater=!0)),t.config.confirmAlertSelectAttributesLater)){var o=n(585).default;t.selectAttributes=new o(t.config,t),t.selectAttributes.appendConfirmBox(t.config.confirmAlertSelectTopicsLaterTheme||"cleverpush-confirm-default",!0)}}else t.isSubscribing=!1,"default"===e&&(t.storageManager.setClosed(),"Firefox"===f.a.name&&t.storageManager.setTempBlocked()),"denied"===e&&(t.api.confirmAlertDenied(),t.storageManager.setDenied()),r(new u.a(Object(_.a)("popup.info").formatCleverPush("<strong>"+(Object(_.a)("confirm.allowBrowser")||Object(_.a)("confirm.allow"))+"</strong>"),e));c.b.debug("HTTP Permission Request Result:",e)})):"denied"===Notification.permission?(t.isSubscribing=!1,r(new u.a(Object(_.a)("popup.info").formatCleverPush("<strong>"+(Object(_.a)("confirm.allowBrowser")||Object(_.a)("confirm.allow"))+"</strong>"),"denied"))):(c.b.debug("PermissionAlreadyGranted"),t.registerForPush().then(i).catch(r),t.confirm&&t.confirm.hideBackdrop("granted")))}))}},{key:"subscribe",value:function(){var e=this;return this.isSubscribed().then((function(t){return e.subscribeForce(t)}))}}])&&p(t.prototype,i),o&&p(t,o),b}(o.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n(148),n(149),n(150),n(135),n(91),n(102),n(153),n(112),n(254),n(81),n(255),n(256),n(108),n(195),n(257),n(137),n(98),n(144),n(211);var i=n(471),r=n.n(i),o=n(268),s=n(1);var c=n(55),a=n(258),u=n(61),l=n(49);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=g(e);if(t){var r=g(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(p,e);var t,i,o,_=d(p);function p(e,t,n){var i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(i=_.call(this,e,t,n)).isSubscribing=!1,i.iframeMessenger=null,i.popupMessenger=null,i.setTopics=i.setTopics.bind(h(i)),i.config.subdomain&&i.config.subdomain.length&&!1!==i.config.loadIframe){var o="https://".concat(i.config.subdomain.toLowerCase(),".cleverpush.com"),a=document.createElement("div");a.style.display="none",document.body.appendChild(a),r.a.debug=s.b.getLevel()<2;var u=r.a.connectToChild({url:"".concat(o,"/iframe?origin=").concat(encodeURIComponent(location.origin)),appendTo:a,methods:{onSubscribed:function(e){i.triggerEvent(c.a.SUBSCRIBED,e)}}});u.iframe.style.display="none",u.promise.then((function(e){s.b.debug("child ready",e),i.iframeMessenger=e,e.setConfig(i.config).then((function(){i.triggerEvent(c.a.INITIALIZED)})),i.getTopics().then((function(e){return i.topics=e}))})).catch((function(){s.b.debug("iframe connection failed"),i.triggerEvent(c.a.INITIALIZED)}))}else s.b.debug("iframe subdomain not available"),i.triggerEvent(c.a.INITIALIZED);return!navigator.permissions||"Firefox"===l.a.name&&l.c<46||navigator.permissions.query({name:"notifications"}).then((function(e){e.onchange=function(){i.isSubscribing||("denied"===window.Notification.permission?i.unsubscribe():"granted"===window.Notification.permission&&i.isSubscribed().then((function(e){e||i.triggerEvent(c.a.PERMISSION_RE_GRANTED)})))}})),i}return t=p,(i=[{key:"isSubscribed",value:function(){var e=this;return new Promise((function(t){e.iframeMessenger?e.iframeMessenger.isSubscribed().then((function(n){s.b.debug("isSubscribed from iframe",n),n?(s.b.debug("hostManager subscribed = true (3)"),e.subscribed=!0,t(!0)):e.storageManager.isSubscribed(!1).then((function(n){n?e.storageManager.checkIfShouldSync().then((function(n){n&&e.sync().then((function(){s.b.debug("hostManager subscribed = true (1)"),e.subscribed=!0,t(!0)})).catch((function(n){s.b.warn("error while syncing",n),s.b.debug("hostManager subscribed = true (2)"),e.subscribed=!0,t(!0)}))})):(s.b.debug("hostManager subscribed = false (4)"),e.subscribed=!1,t(!1))}))})).catch((function(n){n&&(s.b.debug("isSubscribed err",n),s.b.error(n)),s.b.debug("hostManager subscribed = false (5)"),e.subscribed=!1,t(!1)})):(s.b.debug("hostManager subscribed = false (6)"),e.subscribed=!1,t(!1))}))}},{key:"canSubscribe",value:function(){var e=this;return new Promise((function(t,n){e.iframeMessenger?e.iframeMessenger.canSubscribe().then((function(i){var r=i.result,o=i.message,c=i.reason;s.b.debug("canSubscribe from iframe",r),!0===r?e.storageManager.canSubscribe().then((function(i){s.b.debug("storageStatus canSubscribe",i),i?e.isSubscribed().then((function(e){e?n(new u.a("User is already subscribed","subscribed")):t(!0)})):n(new u.a("User has manually unsubscribed or denied notifications","unsubscribed"))})):n(new u.a(o,c))}),(function(e){s.b.debug("canSubscribe err iframe",e),n(e)})):e.storageManager.canSubscribe().then((function(i){s.b.debug("storageStatus canSubscribe",i),i?e.isSubscribed().then((function(e){e?n(new u.a("User is already subscribed","subscribed")):t(!0)})):n(new u.a("User has manually unsubscribed or denied notifications","unsubscribed"))}))}))}},{key:"subscribeForce",value:function(){return this.subscribe()}},{key:"subscribe",value:function(){var e,t=this;if(!this.isSubscribing){var i="https://".concat(this.config.subdomain||this.config.channelSubdomain,".cleverpush.com/subscribe");this.config.confirmAlertTestId&&(i+="?confirmAlertTestId=".concat(this.config.confirmAlertTestId)),e=function(e,t,n,i){Object(s.c)("popup",e,t,n);var r=void 0!==window.screenLeft?window.screenLeft:screen.left,o=void 0!==window.screenTop?window.screenTop:screen.top,c=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-t/2+r,a=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-n/2+o,u="scrollbars=yes";"boolean"==typeof i&&i&&(a=1e5,c=1e5,u="toolbar=no,status=no,menubar=no,scrollbars=no,resizable=no,visible=none");var l=window.open(e,"_blank","width=".concat(t,", height=").concat(n,", top=").concat(a,", left=").concat(c).concat(void 0!==u?u:""));return l&&(!i&&l.focus?l.focus():i&&(l.blur(),l.opener.window.focus(),window.self.window.blur(),window.focus())),l}(i,800,600)}return new Promise((function(i,r){if(t.isSubscribing)s.b.error("A subscription process is already in progress."),r(new a.a);else{t.isSubscribing=!0;var o=function(){t.isSubscribing=!1,t.getSubscriptionId().then((function(e){if(e){if(t.storageManager.setSubscribed(e),t.iframeMessenger&&t.iframeMessenger.setSubscribed(e),t.triggerEvent(c.a.SUBSCRIBED,e),t.config.confirmAlertSelectTopicsLater&&t.confirm.appendConfirmBox(t.config.confirmAlertSelectTopicsLaterTheme||"cleverpush-confirm-default",!0),t.config.confirmAlertSelectAttributesLater){var r=n(585).default;t.selectAttributes=new r(t.config,t),t.selectAttributes.appendConfirmBox(t.config.confirmAlertSelectTopicsLaterTheme||"cleverpush-confirm-default",!0)}i("granted")}else t.storageManager.setClosed(),i("default")}))};e?function(e,t){if(e){var n,i=function(){n&&(clearInterval(n),n=null),t()};n=setInterval((function(){try{e&&!e.closed||i()}catch(e){i()}}),100)}}(e,o):(s.b.error("Popup blocked - Somehow we tried to open a popup without a click event."),o())}}))}},{key:"unsubscribe",value:function(e){var t=this;if(this.iframeMessenger)return this.iframeMessenger.unsubscribe(e).then((function(){t.storageManager.setUnsubscribed(e),t.triggerEvent(c.a.UNSUBSCRIBED)}));this.storageManager.setUnsubscribed(e),this.triggerEvent(c.a.UNSUBSCRIBED)}},{key:"getSubscriptionId",value:function(){var e=this;return new Promise((function(t){e.iframeMessenger.getSubscriptionId().then((function(e){t(e)}))}))}},{key:"hasNotificationPermission",value:function(){var e=this;return new Promise((function(t){if("PREVIEW"===e.config.env)return t(!1);e.iframeMessenger?e.iframeMessenger.hasNotificationPermission().then((function(e){t(e)})):t(!1)}))}},{key:"getNotificationPermission",value:function(){var e=this;return new Promise((function(t){e.iframeMessenger?e.iframeMessenger.getNotificationPermission().then((function(e){t(e)})):t()}))}},{key:"setTopics",value:function(e){return this.topics=e,this.iframeMessenger?this.iframeMessenger.setTopics(e):Promise.resolve()}},{key:"getTopics",value:function(){return this.iframeMessenger?this.iframeMessenger.getTopics():Promise.resolve([])}},{key:"getStoredNotifications",value:function(){var e=this;return new Promise((function(t){e.iframeMessenger?e.iframeMessenger.getStoredNotifications().then((function(e){t(e)})):t([])}))}},{key:"deleteStoredNotification",value:function(e){var t=this;return new Promise((function(n){t.iframeMessenger?t.iframeMessenger.deleteStoredNotification(e).then(n):n()}))}}])&&f(t.prototype,i),o&&f(t,o),p}(o.a)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var i=new(n(586).a);i.init({channelId:"2et4HQsqBnH6ZMRXr",bellLocalization:{subscribe:"Push-Nachrichten von heise online abonnieren",subscribed:"Push-Nachrichten abonniert",hide:"Dieses Menü nicht mehr anzeigen"},loadConfigUrl:"https://static.cleverpush.com/channel/config/2et4HQsqBnH6ZMRXr.json"}),window.CleverPush=i},function(e,t,n){"use strict";var i=n(4),r=n(648).start,o=Math.abs,s=Date.prototype,c=s.getTime,a=s.toISOString;e.exports=i((function(){return"0385-07-25T07:06:39.999Z"!=a.call(new Date(-5e13-1))}))||!i((function(){a.call(new Date(NaN))}))?function(){if(!isFinite(c.call(this)))throw RangeError("Invalid time value");var e=this.getUTCFullYear(),t=this.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+r(o(e),n?6:4,0)+"-"+r(this.getUTCMonth()+1,2,0)+"-"+r(this.getUTCDate(),2,0)+"T"+r(this.getUTCHours(),2,0)+":"+r(this.getUTCMinutes(),2,0)+":"+r(this.getUTCSeconds(),2,0)+"."+r(t,3,0)+"Z"}:a},function(e,t,n){var i=n(23),r=n(505),o=n(34),s=Math.ceil,c=function(e){return function(t,n,c){var a,u,l=String(o(t)),_=l.length,f=void 0===c?" ":String(c),d=i(n);return d<=_||""==f?l:(a=d-_,(u=r.call(f,s(a/f.length))).length>a&&(u=u.slice(0,a)),e?l+u:u+l)}};e.exports={start:c(!1),end:c(!0)}},function(e,t,n){"use strict";var i,r=n(3),o=n(56).f,s=n(23),c=n(482),a=n(34),u=n(483),l=n(58),_="".endsWith,f=Math.min,d=u("endsWith");r({target:"String",proto:!0,forced:!!(l||d||(i=o(String.prototype,"endsWith"),!i||i.writable))&&!d},{endsWith:function(e){var t=String(a(this));c(e);var n=arguments.length>1?arguments[1]:void 0,i=s(t.length),r=void 0===n?i:f(s(n),i),o=String(e);return _?_.call(t,o,r):t.slice(r-o.length,r)===o}})},function(e,t,n){n(3)({target:"String",proto:!0},{repeat:n(505)})},function(e,t,n){var i=n(3),r=n(15),o=n(12),s=n(11),c=n(4),a=n(17),u=n(56),l=n(113),_=n(42);i({target:"Reflect",stat:!0,forced:c((function(){var e=a.f({},"a",{configurable:!0});return!1!==Reflect.set(l(e),"a",1,e)}))},{set:function e(t,n,i){var c,f,d=arguments.length<4?t:arguments[3],p=u.f(r(t),n);if(!p){if(o(f=l(t)))return e(f,n,i,d);p=_(0)}if(s(p,"value")){if(!1===p.writable||!o(d))return!1;if(c=u.f(d,n)){if(c.get||c.set||!1===c.writable)return!1;c.value=i,a.f(d,n,c)}else a.f(d,n,_(0,i));return!0}return void 0!==p.set&&(p.set.call(d,i),!0)}})},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){}]);